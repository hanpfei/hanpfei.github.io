<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/freesoft.jpg?v=6.0.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/freesoft.jpg?v=6.0.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/freesoft.jpg?v=6.0.3">


  <link rel="mask-icon" href="/images/freesoft.jpg?v=6.0.3" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="网络协议,HTTP2,翻译," />


<meta name="description" content="摘要这份文档描述了一种传输层安全(TLS)扩展，即TLS握手消息里的应用层协议协商。比如在一些在相同的TCP或UDP端口上支持多种应用层协议的应用中，这个扩展允许应用层协商将在TLS连接内使用的协议。">
<meta property="og:type" content="article">
<meta property="og:title" content="应用层协议协商（ALPN）规范（RFC7301）">
<meta property="og:url" content="https://www.wolfcstech.com/2016/10/29/alpn-spec/index.html">
<meta property="og:site_name" content="WolfcsTech">
<meta property="og:description" content="摘要这份文档描述了一种传输层安全(TLS)扩展，即TLS握手消息里的应用层协议协商。比如在一些在相同的TCP或UDP端口上支持多种应用层协议的应用中，这个扩展允许应用层协商将在TLS连接内使用的协议。">
<meta property="og:updated_time" content="2017-02-21T05:02:16.752Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="应用层协议协商（ALPN）规范（RFC7301）">
<meta name="twitter:description" content="摘要这份文档描述了一种传输层安全(TLS)扩展，即TLS握手消息里的应用层协议协商。比如在一些在相同的TCP或UDP端口上支持多种应用层协议的应用中，这个扩展允许应用层协商将在TLS连接内使用的协议。">






  <link rel="canonical" href="https://www.wolfcstech.com/2016/10/29/alpn-spec/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>应用层协议协商（ALPN）规范（RFC7301） | WolfcsTech</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-109419024-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-109419024-1');
</script>



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3c736b12c32c019fd9ff6c825b6b9b44";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">WolfcsTech</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="http://www.ixirong.com/404.html" rel="section">
            <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />公益 404</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wolfcstech.com/2016/10/29/alpn-spec/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Pengfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/freesoft.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WolfcsTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">应用层协议协商（ALPN）规范（RFC7301）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-29T13:44:49+08:00">2016-10-29</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/网络协议/" itemprop="url" rel="index"><span itemprop="name">网络协议</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/29/alpn-spec/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2016/10/29/alpn-spec/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/10/29/alpn-spec/" class="leancloud_visitors" data-flag-title="应用层协议协商（ALPN）规范（RFC7301）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>这份文档描述了一种传输层安全(TLS)扩展，即TLS握手消息里的应用层协议协商。比如在一些在相同的TCP或UDP端口上支持多种应用层协议的应用中，这个扩展允许应用层协商将在TLS连接内使用的协议。</p>
<a id="more"></a>
<h1 id="Status-of-This-Memo"><a href="#Status-of-This-Memo" class="headerlink" title="Status of This Memo"></a>Status of This Memo</h1><p>This is an Internet Standards Track document.</p>
<p>This document is a product of the Internet Engineering Task Force(IETF).  It represents the consensus of the IETF community.  It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG).  Further information on Internet Standards is available in Section 2 of RFC 5741.</p>
<p>Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at <a href="http://www.rfc-editor.org/info/rfc7301" target="_blank" rel="external">http://www.rfc-editor.org/info/rfc7301</a>.</p>
<h1 id="Copyright-Notice"><a href="#Copyright-Notice" class="headerlink" title="Copyright Notice"></a>Copyright Notice</h1><p>Copyright (c) 2014 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust’s Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info" target="_blank" rel="external">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1.  简介"></a>1.  简介</h2><h2 id="2-需求语言"><a href="#2-需求语言" class="headerlink" title="2.  需求语言"></a>2.  需求语言</h2><h2 id="3-应用层协议协商"><a href="#3-应用层协议协商" class="headerlink" title="3.  应用层协议协商"></a>3.  应用层协议协商</h2><h3 id="3-1-应用层协议协商扩展"><a href="#3-1-应用层协议协商扩展" class="headerlink" title="3.1.  应用层协议协商扩展"></a>3.1.  应用层协议协商扩展</h3><h3 id="3-2-协议选择"><a href="#3-2-协议选择" class="headerlink" title="3.2.  协议选择"></a>3.2.  协议选择</h3><h2 id="4-设计注意事项"><a href="#4-设计注意事项" class="headerlink" title="4.  设计注意事项"></a>4.  设计注意事项</h2><h2 id="5-安全注意事项"><a href="#5-安全注意事项" class="headerlink" title="5.  安全注意事项"></a>5.  安全注意事项</h2><h2 id="6-IANA注意事项"><a href="#6-IANA注意事项" class="headerlink" title="6.  IANA注意事项"></a>6.  IANA注意事项</h2><h2 id="7-致谢"><a href="#7-致谢" class="headerlink" title="7.  致谢"></a>7.  致谢</h2><h2 id="8-参考文献"><a href="#8-参考文献" class="headerlink" title="8.  参考文献"></a>8.  参考文献</h2><h3 id="8-1-规范性参考文献"><a href="#8-1-规范性参考文献" class="headerlink" title="8.1.  规范性参考文献"></a>8.1.  规范性参考文献</h3><h3 id="8-2-参考资料"><a href="#8-2-参考资料" class="headerlink" title="8.2.  参考资料"></a>8.2.  参考资料</h3><h1 id="1-简介-1"><a href="#1-简介-1" class="headerlink" title="1. 简介"></a>1. 简介</h1><p>越来越多的应用层协议被封装在了TLS协议[<a href="https://tools.ietf.org/html/rfc5246" target="_blank" rel="external">RFC 5246</a>]中。这种封装使得应用程序可以使用已经存在的，几乎遍布全球的IP基础设施的已经出现在端口443上的安全的通信链路。</p>
<p>当在单个服务器端端口号上支持多个应用协议时，比如端口443,客户端和服务器需要协商用于每个连接的应用协议。希望能在不增加客户端与服务器之间的网络往返的情况下完成这种协商，因为每次往返都将降低终端用户的体验。此外，最好能允许证书选择基于协商的应用协议。</p>
<p>本文档描述了一种TLS扩展，它允许应用层在TLS握手中协商协议。这项工作是HTTPbis工作组请求的，用以解决基于TLS的 HTTP/2 ([HTTP2]) 的协商；然而，ALPN便于任意应用层协议的协商。</p>
<p>使用ALPN，客户端发送支持的应用协议的列表作为TLS <code>ClientHello</code>消息的一部分。服务器选择一个协议，并将所选择的协议作为TLS <code>ServerHello</code>消息的一部分发送。因此，如果需要，可以在TLS握手期间完成应用层协议协商，而不增加网络往返，且允许服务器为每种应用协议关联不同的证书。</p>
<h1 id="2-需求语言-1"><a href="#2-需求语言-1" class="headerlink" title="2. 需求语言"></a>2. 需求语言</h1><p>本文档中的关键字”MUST”，”MUST NOT”，”REQUIRED”，”SHALL”，”SHALL NOT”，”SHOULD”，”SHOULD NOT”，”RECOMMENDED”，”MAY”，和 “OPTIONAL”依照[<a href="https://tools.ietf.org/html/rfc2119" target="_blank" rel="external">RFC2119</a>]的描述进行解释。</p>
<h1 id="3-应用层协议协商-1"><a href="#3-应用层协议协商-1" class="headerlink" title="3. 应用层协议协商"></a>3. 应用层协议协商</h1><h2 id="3-1-应用层协议协商扩展-1"><a href="#3-1-应用层协议协商扩展-1" class="headerlink" title="3.1. 应用层协议协商扩展"></a>3.1. 应用层协议协商扩展</h2><p>定义了新的扩展类型 (“application_layer_protocol_negotiation(16)”)，并且 <strong>可以(MAY)</strong> 被客户端包含在其 “ClientHello” 消息中。</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> &#123;</span></div><div class="line">    application_layer_protocol_negotiation(<span class="number">16</span>), (<span class="number">65535</span>)</div><div class="line">&#125; ExtensionType;</div></pre></td></tr></table></figure>
<p><code>(&quot;application_layer_protocol_negotiation(16)&quot;)</code> 扩展的 <code>&quot;extension_data&quot;</code> 字段 <strong>应该(SHALL)</strong> 包含一个<code>&quot;ProtocolNameList&quot;</code>值。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">opaque ProtocolName&lt;<span class="number">1.</span><span class="number">.2</span>^<span class="number">8</span><span class="number">-1</span>&gt;;</div><div class="line"></div><div class="line">struct &#123;</div><div class="line">    ProtocolName protocol_name_list&lt;<span class="number">2.</span><span class="number">.2</span>^<span class="number">16</span><span class="number">-1</span>&gt;</div><div class="line">&#125; ProtocolNameList;</div></pre></td></tr></table></figure>
<p><code>&quot;ProtocolNameList&quot;</code>包含了由客户端发布的协议的列表，按优先级降序排列。协议按照IANA注册的，不透明的非空字节字符串命名，如在本文档的第6节 (“IANA注意事项”) 中所述。 <strong>一定不能(MUST NOT)</strong> 包含空字符串，字节串 <strong>一定不能(MUST NOT)</strong> 被截断。</p>
<p>接收到了包含<code>&quot;application_layer_protocol_negotiation&quot;</code>扩展的<code>ClientHello</code>消息的服务器 <strong>可以(MAY)</strong> 向客户端返回适当的协议选择响应。服务器将忽略任何它无法识别的协议名。 <strong>可以(MAY)</strong> 在扩展的<code>ServerHello</code>消息中向客户端返回新的<code>ServerHello</code>扩展类型<code>(&quot;application_layer_protocol_negotiation(16)&quot;)</code>。除了<code>&quot;ProtocolNameList&quot;</code> <strong>必须(MUST)</strong> 恰好包含一个 <code>&quot;ProtocolName&quot;</code>外，<code>(&quot;application_layer_protocol_negotiation(16)&quot;)</code>扩展的<code>&quot;extension_data&quot;</code>字段的结构与上述客户端<code>&quot;extension_data&quot;</code>一样。</p>
<p>因而，ClientHello和ServerHello消息中包含了<code>&quot;application_layer_protocol_negotiation&quot;</code>扩展的完整的握手的流程如下 (对比 [RFC5246] 的 7.3节)：</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="type">Client</span>                                              <span class="type">Server</span></div><div class="line"></div><div class="line"><span class="type">ClientHello</span>                     <span class="comment">--------&gt;       ServerHello</span></div><div class="line">  (<span class="type">ALPN</span> extension &amp;                               (<span class="type">ALPN</span> extension &amp;</div><div class="line">   list <span class="keyword">of</span> protocols)                              selected protocol)</div><div class="line">                                                <span class="type">Certificate</span>*</div><div class="line">                                                <span class="type">ServerKeyExchange</span>*</div><div class="line">                                                <span class="type">CertificateRequest</span>*</div><div class="line">                                &lt;-<span class="comment">-------       ServerHelloDone</span></div><div class="line"><span class="type">Certificate</span>*</div><div class="line"><span class="type">ClientKeyExchange</span></div><div class="line"><span class="type">CertificateVerify</span>*</div><div class="line">[<span class="type">ChangeCipherSpec</span>]</div><div class="line"><span class="type">Finished</span>                        <span class="comment">--------&gt;</span></div><div class="line">                                                [<span class="type">ChangeCipherSpec</span>]</div><div class="line">                                &lt;-<span class="comment">-------       Finished</span></div><div class="line"><span class="type">Application</span> <span class="type">Data</span>                &lt;-<span class="comment">------&gt;       Application Data</span></div><div class="line"></div><div class="line">                              <span class="type">Figure</span> <span class="number">1</span></div></pre></td></tr></table></figure>
<ul>
<li>表示 不总是发送的可选的或情境相关的消息。</li>
</ul>
<p>包含了<code>&quot;application_layer_protocol_negotiation&quot;</code>扩展的简短的握手过程如下：</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="type">Client</span>                                              <span class="type">Server</span></div><div class="line"></div><div class="line"><span class="type">ClientHello</span>                     <span class="comment">--------&gt;       ServerHello</span></div><div class="line">  (<span class="type">ALPN</span> extension &amp;                               (<span class="type">ALPN</span> extension &amp;</div><div class="line">   list <span class="keyword">of</span> protocols)                              selected protocol)</div><div class="line">                                                [<span class="type">ChangeCipherSpec</span>]</div><div class="line">                                &lt;-<span class="comment">-------       Finished</span></div><div class="line">[<span class="type">ChangeCipherSpec</span>]</div><div class="line"><span class="type">Finished</span>                        <span class="comment">--------&gt;</span></div><div class="line"><span class="type">Application</span> <span class="type">Data</span>                &lt;-<span class="comment">------&gt;       Application Data</span></div></pre></td></tr></table></figure>
<p>图 2</p>
<p>与许多其它TLS扩展不同，这个扩展不建立会话属性，而只建立连接的。当使用会话恢复或会话tickets [RFC5077] 时，此扩展之前的内容是不相关的，而只考虑新握手消息中的值。</p>
<h2 id="3-2-协议选择-1"><a href="#3-2-协议选择-1" class="headerlink" title="3.2. 协议选择"></a>3.2. 协议选择</h2><p>预计服务器将有一个它支持的协议的列表，以优先级排序，而将只选择一个客户端支持的协议。在这种情况下，服务器 <strong>应该(SHOULD)</strong> 选择它支持且也由客户端发布的最优选的一个。如果服务器不支持客户端发布的协议，则服务器 <strong>应该(SHALL)</strong> 用 致命的<code>&quot;no_application_protocol&quot;</code>警告进行响应。</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> &#123;</span></div><div class="line">    no_application_protocol(<span class="number">120</span>),</div><div class="line">    (<span class="number">255</span>)</div><div class="line">&#125; AlertDescription;</div></pre></td></tr></table></figure>
<p>在<code>ServerHello</code>的<code>&quot;application_layer_protocol_negotiation&quot;</code>扩展类型中标识的协议对于连接 <strong>应该(SHALL)</strong> 确定的，直到重新协商为止。服务器 <strong>不应该(SHALL NOT)</strong> 以一个选择的协议进行响应，而后续却为应用数据交换使用一个不同的协议。</p>
<h1 id="4-设计注意事项-1"><a href="#4-设计注意事项-1" class="headerlink" title="4. 设计注意事项"></a>4. 设计注意事项</h1><p>ALPN扩展旨在遵循TLS协议扩展的典型设计。具体地，协商完全是在 客户端/服务器 交换hello的过程中执行的，而与已建立的TLS架构保持一致。”application_layer_protocol_negotiation” ServerHello扩展意在对于连接是确定的 (直到连接被重协商)，且以明文发送，以允许当连接中使用的应用层协议的TCP或UDP端口号不确定的时候，网络元素为连接提供不同的服务。通过将协议选择权放在服务器，ALPN便于证书选择或连接重路由可以基于已协商的协议的情况。</p>
<p>最后，通过以作为握手消息的一部分的明文管理协议选择，ALPN避免了引入关于 在建立连接之前隐藏协商的协议 的能力 的虚假信任。如果需要隐藏协议，则在连接建立之后重协商，这将提供真正的TLS安全性保证，将是一个优选的方法。</p>
<h1 id="5-安全注意事项-1"><a href="#5-安全注意事项-1" class="headerlink" title="5. 安全注意事项"></a>5. 安全注意事项</h1><p>ALPN扩展不影响TLS会话建立或数据交换的安全性。ALPN服务于为与TLS连接关联的应用层协议提供一个外部可见的标记。历史上，与一个连接关联的应用层协议，可以从使用的TCP或UDP端口号来确定。</p>
<p>想要通过添加新的协议标识符来扩展协议标识符注册表的实现者和文档编辑者应该考虑到在TLS版本1.2及更低的情况下，客户端是明文发送这些标识符的。他们还应该考虑到，最少在下一个十年内，预计浏览器将正常地在初始的ClientHello中使用这些较早的TLS版本。</p>
<p>必须注意这些标识符可能泄漏个人的可识别的信息，或当这种泄漏可能导致分析或泄漏敏感信息时。如果这些情况中的任何一个适用于新的协议标识符，则标识符 <strong>不应该(SHOULD NOT)</strong> 被用在TLS配置中，TLS配置将是明文可见的，在描述这种协议标识符的文档中 <strong>应该(SHOULD)</strong> 反对这种不安全的使用。</p>
<h1 id="6-IANA注意事项-1"><a href="#6-IANA注意事项-1" class="headerlink" title="6. IANA注意事项"></a>6. IANA注意事项</h1><p>IANA已经更新了它的 “ExtensionType Values” 注册表来包含如下的项：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">16 </span>application_layer_protocol_negotiation</div></pre></td></tr></table></figure>
<p>该文档在现有的“传输层安全（TLS）扩展”标题下建立了名为“应用层协议协商（ALPN）协议ID”的协议标识符的注册表。</p>
<p>注册表中的项需要下面的这些字段：</p>
<ul>
<li>协议：协议的名字。</li>
<li>标识序列：标识协议的精确的字节值集合。这可以是UTF-8编码 [RFC3629] 的协议名字。</li>
<li>参考文献：对一份定义了这个协议的规范的引用。</li>
</ul>
<p>这个注册表依照 [RFC5226] 中定义的”Expert Review” 策略操作。建议指定的专家鼓励包含对一个永久的现成的规范的引用，以使能够创建标识的协议的可互操作的实现。</p>
<p>这个注册表的初始注册集合如下：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">协议：<span class="selector-tag">HTTP</span>/<span class="selector-tag">1</span><span class="selector-class">.1</span></div><div class="line">标识序列：<span class="selector-tag">0x68</span> <span class="selector-tag">0x74</span> <span class="selector-tag">0x74</span> <span class="selector-tag">0x70</span> <span class="selector-tag">0x2f</span> <span class="selector-tag">0x31</span> <span class="selector-tag">0x2e</span> <span class="selector-tag">0x31</span> (<span class="string">"http/1.1"</span>)</div><div class="line">参考文献：<span class="selector-attr">[RFC7230]</span></div><div class="line"></div><div class="line">协议：<span class="selector-tag">SPDY</span>/<span class="selector-tag">1</span></div><div class="line">标识序列：<span class="selector-tag">0x73</span> <span class="selector-tag">0x70</span> <span class="selector-tag">0x64</span> <span class="selector-tag">0x79</span> <span class="selector-tag">0x2f</span> <span class="selector-tag">0x31</span> (<span class="string">"spdy/1"</span>)</div><div class="line">参考文献：<span class="selector-tag">http</span>:<span class="comment">//dev.chromium.org/spdy/spdy-protocol/spdy-protocol-draft1</span></div><div class="line"></div><div class="line">协议：<span class="selector-tag">SPDY</span>/<span class="selector-tag">2</span></div><div class="line">标识序列：<span class="selector-tag">0x73</span> <span class="selector-tag">0x70</span> <span class="selector-tag">0x64</span> <span class="selector-tag">0x79</span> <span class="selector-tag">0x2f</span> <span class="selector-tag">0x32</span> (<span class="string">"spdy/2"</span>)</div><div class="line">参考文献：<span class="selector-tag">http</span>:<span class="comment">//dev.chromium.org/spdy/spdy-protocol/spdy-protocol-draft2</span></div><div class="line"></div><div class="line">协议：<span class="selector-tag">SPDY</span>/<span class="selector-tag">3</span></div><div class="line">标识序列：<span class="selector-tag">0x73</span> <span class="selector-tag">0x70</span> <span class="selector-tag">0x64</span> <span class="selector-tag">0x79</span> <span class="selector-tag">0x2f</span> <span class="selector-tag">0x33</span> (<span class="string">"spdy/3"</span>)</div><div class="line">参考文献：<span class="selector-tag">http</span>:<span class="comment">//dev.chromium.org/spdy/spdy-protocol/spdy-protocol-draft3</span></div></pre></td></tr></table></figure>
<h1 id="7-致谢-1"><a href="#7-致谢-1" class="headerlink" title="7. 致谢"></a>7. 致谢</h1><p>这份文档特别受益于由Adam Langley撰写的 下一个协议协商 (NPN) 扩展 文档，及与Cisco的Tom Wesselman和Cullen Jennings的讨论。</p>
<h1 id="8-参考文献-1"><a href="#8-参考文献-1" class="headerlink" title="8.  参考文献"></a>8.  参考文献</h1><h2 id="8-1-规范性参考文献-1"><a href="#8-1-规范性参考文献-1" class="headerlink" title="8.1.  规范性参考文献"></a>8.1.  规范性参考文献</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[RFC2119]  Bradner, S., <span class="string">"Key words for use in RFCs to Indicate Requirement Levels"</span>, BCP <span class="number">14</span>, RFC <span class="number">2119</span>, March <span class="number">1997.</span></div><div class="line"></div><div class="line">[RFC3629]  Yergeau, F., <span class="string">"UTF-8, a transformation format of ISO</span></div><div class="line">           10646", STD <span class="number">63</span>, RFC <span class="number">3629</span>, November <span class="number">2003.</span></div><div class="line"></div><div class="line">[RFC5226]  Narten, T. and H. Alvestrand, <span class="string">"Guidelines for Writing an</span></div><div class="line">           IANA Considerations Section in RFCs", BCP <span class="number">26</span>, RFC <span class="number">5226</span>,</div><div class="line">              May <span class="number">2008.</span></div><div class="line"></div><div class="line">[RFC5246]  Dierks, T. and E. Rescorla, <span class="string">"The Transport Layer Security</span></div><div class="line">           (TLS) Protocol Version 1.2", RFC <span class="number">5246</span>, August <span class="number">2008.</span></div><div class="line"></div><div class="line">[RFC7230]  Fielding, R. and J. Reschke, <span class="string">"Hypertext Transfer Protocol</span></div><div class="line">           (HTTP/1.1): Message Syntax and Routing", RFC <span class="number">7230</span>, June <span class="number">2014.</span></div></pre></td></tr></table></figure>
<h2 id="8-2-参考资料-1"><a href="#8-2-参考资料-1" class="headerlink" title="8.2.  参考资料"></a>8.2.  参考资料</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[HTTP2]    Belshe, M., Peon, R., <span class="built_in">and</span> M. Thomson,  <span class="comment">"Hypertext Transfer Protocol </span></div><div class="line">           <span class="keyword">version</span> <span class="number">2</span><span class="comment">", Work in Progress, June 2014.</span></div><div class="line"></div><div class="line">[RFC5077]  Salowey, J., Zhou, H., Eronen, <span class="keyword">P</span>., <span class="built_in">and</span> H. Tschofenig, <span class="comment">"Transport Layer </span></div><div class="line">           Security (TLS) Session Resumption without  Server-Side State<span class="comment">", RFC 5077, January 2008.</span></div></pre></td></tr></table></figure>
<h1 id="作者的地址"><a href="#作者的地址" class="headerlink" title="作者的地址"></a>作者的地址</h1><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Stephan Friedl</div><div class="line">Cisco Systems, <span class="keyword">Inc</span>.</div><div class="line"><span class="number">170</span> West Tasman Drive</div><div class="line">San Jose, CA  <span class="number">95134</span></div><div class="line">USA</div><div class="line"></div><div class="line"><span class="symbol">Phone:</span> (<span class="number">720</span>)<span class="number">562</span><span class="number">-6785</span></div><div class="line"><span class="symbol">EMail:</span> sfriedl@cisco.com</div></pre></td></tr></table></figure>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Andrei </span><span class="keyword">Popov</span></div><div class="line"><span class="symbol">Microsoft</span> Corp.</div><div class="line"><span class="symbol">One</span> Microsoft Way</div><div class="line"><span class="symbol">Redmond</span>, WA  <span class="number">98052</span></div><div class="line"><span class="symbol">USA</span></div><div class="line"><span class="symbol"></span></div><div class="line">EMail: <span class="keyword">andreipo@microsoft.com</span></div></pre></td></tr></table></figure>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Adam Langley</div><div class="line">Google <span class="keyword">Inc</span>.</div><div class="line">USA</div><div class="line"></div><div class="line"><span class="symbol">EMail:</span> agl@google.com</div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">Emile</span> <span class="selector-tag">Stephan</span></div><div class="line"><span class="selector-tag">Orange</span></div><div class="line">2 <span class="selector-tag">avenue</span> <span class="selector-tag">Pierre</span> <span class="selector-tag">Marzin</span></div><div class="line"><span class="selector-tag">Lannion</span>  <span class="selector-tag">F-22307</span></div><div class="line"><span class="selector-tag">France</span></div><div class="line"></div><div class="line"><span class="selector-tag">EMail</span>: <span class="selector-tag">emile</span><span class="selector-class">.stephan</span>@<span class="keyword">orange</span>.<span class="keyword">com</span></div></pre></td></tr></table></figure>
<p><a href="https://tools.ietf.org/html/rfc7301" target="_blank" rel="external">原文</a></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wxpay.png" alt="Han Pengfei 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Han Pengfei 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/网络协议/" rel="tag"># 网络协议</a>
          
            <a href="/tags/HTTP2/" rel="tag"># HTTP2</a>
          
            <a href="/tags/翻译/" rel="tag"># 翻译</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/29/http2-spec/" rel="next" title="HTTP2规范（RFC7540）">
                <i class="fa fa-chevron-left"></i> HTTP2规范（RFC7540）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/29/hpack-spec/" rel="prev" title="HPACK：HTTP/2的首部压缩 (RFC7541)">
                HPACK：HTTP/2的首部压缩 (RFC7541) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/freesoft.jpg"
                alt="Han Pengfei" />
            
              <p class="site-author-name" itemprop="name">Han Pengfei</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">207</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/hanpfei" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.douban.com/people/3681478/" target="_blank" title="豆瓣"><i class="fa fa-fw fa-globe"></i>豆瓣</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.zhihu.com/people/han-peng-fei-49" target="_blank" title="知乎"><i class="fa fa-fw fa-globe"></i>知乎</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:hanpfei@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://developer.android.com/index.html" title="Android Developers" target="_blank">Android Developers</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://source.android.com/" title="Android Open Source Project" target="_blank">Android Open Source Project</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.vants.org/" title="蚂蚁网" target="_blank">蚂蚁网</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#摘要"><span class="nav-number">1.</span> <span class="nav-text">摘要</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Status-of-This-Memo"><span class="nav-number">2.</span> <span class="nav-text">Status of This Memo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Copyright-Notice"><span class="nav-number">3.</span> <span class="nav-text">Copyright Notice</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#目录"><span class="nav-number">4.</span> <span class="nav-text">目录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-简介"><span class="nav-number">4.1.</span> <span class="nav-text">1.  简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-需求语言"><span class="nav-number">4.2.</span> <span class="nav-text">2.  需求语言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-应用层协议协商"><span class="nav-number">4.3.</span> <span class="nav-text">3.  应用层协议协商</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-应用层协议协商扩展"><span class="nav-number">4.3.1.</span> <span class="nav-text">3.1.  应用层协议协商扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-协议选择"><span class="nav-number">4.3.2.</span> <span class="nav-text">3.2.  协议选择</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-设计注意事项"><span class="nav-number">4.4.</span> <span class="nav-text">4.  设计注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-安全注意事项"><span class="nav-number">4.5.</span> <span class="nav-text">5.  安全注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-IANA注意事项"><span class="nav-number">4.6.</span> <span class="nav-text">6.  IANA注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-致谢"><span class="nav-number">4.7.</span> <span class="nav-text">7.  致谢</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-参考文献"><span class="nav-number">4.8.</span> <span class="nav-text">8.  参考文献</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-规范性参考文献"><span class="nav-number">4.8.1.</span> <span class="nav-text">8.1.  规范性参考文献</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-参考资料"><span class="nav-number">4.8.2.</span> <span class="nav-text">8.2.  参考资料</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-简介-1"><span class="nav-number">5.</span> <span class="nav-text">1. 简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-需求语言-1"><span class="nav-number">6.</span> <span class="nav-text">2. 需求语言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-应用层协议协商-1"><span class="nav-number">7.</span> <span class="nav-text">3. 应用层协议协商</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-应用层协议协商扩展-1"><span class="nav-number">7.1.</span> <span class="nav-text">3.1. 应用层协议协商扩展</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-协议选择-1"><span class="nav-number">7.2.</span> <span class="nav-text">3.2. 协议选择</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-设计注意事项-1"><span class="nav-number">8.</span> <span class="nav-text">4. 设计注意事项</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-安全注意事项-1"><span class="nav-number">9.</span> <span class="nav-text">5. 安全注意事项</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-IANA注意事项-1"><span class="nav-number">10.</span> <span class="nav-text">6. IANA注意事项</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-致谢-1"><span class="nav-number">11.</span> <span class="nav-text">7. 致谢</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-参考文献-1"><span class="nav-number">12.</span> <span class="nav-text">8.  参考文献</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-规范性参考文献-1"><span class="nav-number">12.1.</span> <span class="nav-text">8.1.  规范性参考文献</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-参考资料-1"><span class="nav-number">12.2.</span> <span class="nav-text">8.2.  参考资料</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作者的地址"><span class="nav-number">13.</span> <span class="nav-text">作者的地址</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016.09.16 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Han Pengfei</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.0.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.3"></script>



  



	





  





  









<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 's9sbM9ODdusCzKcm5JcIj6t8-gzGzoHsz',
    appKey: 'UoO9ia1DLNwOXRUsTBQ6QXxm',
    placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊!',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: true,
    lang: '' || 'zh-cn'
  });
</script>


  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  
  

  

  

  

  

</body>
</html>
