<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>HPACK：HTTP/2的首部压缩 (RFC7541) | WolfcsTech</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.2.0"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=1.2.0"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">HPACK：HTTP/2的首部压缩 (RFC7541)</h1><a id="logo" href="/.">WolfcsTech</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">HPACK：HTTP/2的首部压缩 (RFC7541)</h1><div class="post-meta">Oct 29, 2016<span> | </span><span class="category"><a href="/categories/网络协议/">网络协议</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/10/29/hpack-spec/" href="/2016/10/29/hpack-spec/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>这份规范定义了HPACK，一个用于HTTP/2，为有效地表示HTTP首部字段而设计的压缩格式。</p>
<h1 id="此备忘录的状态"><a href="#此备忘录的状态" class="headerlink" title="此备忘录的状态"></a>此备忘录的状态</h1><p>这是一份互联网标准跟踪文档。</p>
<a id="more"></a>
<p>本文档是互联网工程任务组（IETF）的产品。它代表了IETF社区的共识。它已经接受公众审查，并已获得互联网工程指导小组（IESG）的发布允准。有关互联网标准的更多信息，请参见<a href="https://tools.ietf.org/html/rfc5741#section-2" target="_blank" rel="external">RFC 5741的第2节</a>。</p>
<p>有关本文档的当前状态，任何勘误以及如何提供反馈的信息，请访问 <a href="http://www.rfc-editor.org/info/rfc7541。" target="_blank" rel="external">http://www.rfc-editor.org/info/rfc7541。</a></p>
<h1 id="版权声明"><a href="#版权声明" class="headerlink" title="版权声明"></a>版权声明</h1><p>版权所有©2015 IETF信托和被确定为文档作者的人。版权所有。</p>
<p>本文件受BCP 78和IETF信托有关IETF文件的法律规定（<a href="http://trustee.ietf.org/license-info" target="_blank" rel="external">http://trustee.ietf.org/license-info</a>）对本文件出版日期的影响。请仔细阅读这些文档，它们描述了您对本文档的权利和限制。从本文档中提取的代码组件必须包括如信托法律规定第4.e节所述的简化BSD许可文本，并且不提供简化BSD许可中描述的保证。</p>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><h2 id="1-引言"><a href="#1-引言" class="headerlink" title="1. 引言"></a><a href="https://tools.ietf.org/html/rfc7541#section-1" target="_blank" rel="external">1. 引言</a></h2><h3 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a><a href="https://tools.ietf.org/html/rfc7541#section-1.1" target="_blank" rel="external">1.1 概述</a></h3><h3 id="1-2-约定"><a href="#1-2-约定" class="headerlink" title="1.2 约定"></a><a href="https://tools.ietf.org/html/rfc7541#section-1.2" target="_blank" rel="external">1.2 约定</a></h3><h3 id="1-3-术语"><a href="#1-3-术语" class="headerlink" title="1.3 术语"></a><a href="https://tools.ietf.org/html/rfc7541#section-1.3" target="_blank" rel="external">1.3 术语</a></h3><h2 id="2-压缩过程概述"><a href="#2-压缩过程概述" class="headerlink" title="2. 压缩过程概述"></a><a href="https://tools.ietf.org/html/rfc7541#section-2" target="_blank" rel="external">2. 压缩过程概述</a></h2><h3 id="2-1-头部列表排序"><a href="#2-1-头部列表排序" class="headerlink" title="2.1 头部列表排序"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.1" target="_blank" rel="external">2.1 头部列表排序</a></h3><h3 id="2-2-编码和解码上下文"><a href="#2-2-编码和解码上下文" class="headerlink" title="2.2 编码和解码上下文"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.2" target="_blank" rel="external">2.2 编码和解码上下文</a></h3><h3 id="2-3-索引表"><a href="#2-3-索引表" class="headerlink" title="2.3 索引表"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.3" target="_blank" rel="external">2.3 索引表</a></h3><h4 id="2-3-1-静态表"><a href="#2-3-1-静态表" class="headerlink" title="2.3.1 静态表"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.3.1" target="_blank" rel="external">2.3.1 静态表</a></h4><h4 id="2-3-2-动态表"><a href="#2-3-2-动态表" class="headerlink" title="2.3.2 动态表"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.3.2" target="_blank" rel="external">2.3.2 动态表</a></h4><h4 id="2-3-3-索引地址空间"><a href="#2-3-3-索引地址空间" class="headerlink" title="2.3.3 索引地址空间"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.3.3" target="_blank" rel="external">2.3.3 索引地址空间</a></h4><h3 id="2-4-头部字段表示"><a href="#2-4-头部字段表示" class="headerlink" title="2.4 头部字段表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.4" target="_blank" rel="external">2.4 头部字段表示</a></h3><h2 id="3-头部块解码"><a href="#3-头部块解码" class="headerlink" title="3. 头部块解码"></a><a href="https://tools.ietf.org/html/rfc7541#section-3" target="_blank" rel="external">3. 头部块解码</a></h2><h3 id="3-1-头部块处理"><a href="#3-1-头部块处理" class="headerlink" title="3.1 头部块处理"></a><a href="https://tools.ietf.org/html/rfc7541#section-3.1" target="_blank" rel="external">3.1 头部块处理</a></h3><h3 id="3-2-头部字段表示处理"><a href="#3-2-头部字段表示处理" class="headerlink" title="3.2 头部字段表示处理"></a><a href="https://tools.ietf.org/html/rfc7541#section-3.2" target="_blank" rel="external">3.2 头部字段表示处理</a></h3><h2 id="4-动态表管理"><a href="#4-动态表管理" class="headerlink" title="4. 动态表管理"></a><a href="https://tools.ietf.org/html/rfc7541#section-4" target="_blank" rel="external">4. 动态表管理</a></h2><h3 id="4-1-计算表大小"><a href="#4-1-计算表大小" class="headerlink" title="4.1 计算表大小"></a><a href="https://tools.ietf.org/html/rfc7541#section-4.1" target="_blank" rel="external">4.1 计算表大小</a></h3><h3 id="4-2-最大表大小"><a href="#4-2-最大表大小" class="headerlink" title="4.2 最大表大小"></a><a href="https://tools.ietf.org/html/rfc7541#section-4.2" target="_blank" rel="external">4.2 最大表大小</a></h3><h3 id="4-3-动态表大小改变时的条目逐出"><a href="#4-3-动态表大小改变时的条目逐出" class="headerlink" title="4.3 动态表大小改变时的条目逐出"></a><a href="https://tools.ietf.org/html/rfc7541#section-4.3" target="_blank" rel="external">4.3 动态表大小改变时的条目逐出</a></h3><h3 id="4-4-添加新条目时的条目逐出"><a href="#4-4-添加新条目时的条目逐出" class="headerlink" title="4.4 添加新条目时的条目逐出"></a><a href="https://tools.ietf.org/html/rfc7541#section-4.4" target="_blank" rel="external">4.4 添加新条目时的条目逐出</a></h3><h2 id="5-原始数据类型表示"><a href="#5-原始数据类型表示" class="headerlink" title="5. 原始数据类型表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-5" target="_blank" rel="external">5. 原始数据类型表示</a></h2><h3 id="5-1-整数的表示"><a href="#5-1-整数的表示" class="headerlink" title="5.1 整数的表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-5.1" target="_blank" rel="external">5.1 整数的表示</a></h3><h3 id="5-2-字符串字面量的表示"><a href="#5-2-字符串字面量的表示" class="headerlink" title="5.2 字符串字面量的表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-5.2" target="_blank" rel="external">5.2 字符串字面量的表示</a></h3><h2 id="6-二进制格式"><a href="#6-二进制格式" class="headerlink" title="6. 二进制格式"></a><a href="https://tools.ietf.org/html/rfc7541#section-6" target="_blank" rel="external">6. 二进制格式</a></h2><h3 id="6-1-索引的头部字段表示"><a href="#6-1-索引的头部字段表示" class="headerlink" title="6.1 索引的头部字段表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.1" target="_blank" rel="external">6.1 索引的头部字段表示</a></h3><h3 id="6-2-字面量头部字段表示"><a href="#6-2-字面量头部字段表示" class="headerlink" title="6.2 字面量头部字段表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.2" target="_blank" rel="external">6.2 字面量头部字段表示</a></h3><h4 id="6-2-1-增量索引的字面量头部字段"><a href="#6-2-1-增量索引的字面量头部字段" class="headerlink" title="6.2.1 增量索引的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.2.1" target="_blank" rel="external">6.2.1 增量索引的字面量头部字段</a></h4><h4 id="6-2-2-无索引的字面量头部字段"><a href="#6-2-2-无索引的字面量头部字段" class="headerlink" title="6.2.2 无索引的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.2.2" target="_blank" rel="external">6.2.2 无索引的字面量头部字段</a></h4><h4 id="6-2-3-从不索引的字面量头部字段"><a href="#6-2-3-从不索引的字面量头部字段" class="headerlink" title="6.2.3 从不索引的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.2.3" target="_blank" rel="external">6.2.3 从不索引的字面量头部字段</a></h4><h3 id="6-3-动态表-大小更新"><a href="#6-3-动态表-大小更新" class="headerlink" title="6.3 动态表 大小更新"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.3" target="_blank" rel="external">6.3 动态表 大小更新</a></h3><h2 id="7-安全注意事项"><a href="#7-安全注意事项" class="headerlink" title="7. 安全注意事项"></a><a href="https://tools.ietf.org/html/rfc7541#section-7" target="_blank" rel="external">7. 安全注意事项</a></h2><h3 id="7-1-探测动态表状态"><a href="#7-1-探测动态表状态" class="headerlink" title="7.1 探测动态表状态"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.1" target="_blank" rel="external">7.1 探测动态表状态</a></h3><h4 id="7-1-1-HPACK-和-HTTP的适用性"><a href="#7-1-1-HPACK-和-HTTP的适用性" class="headerlink" title="7.1.1 HPACK 和 HTTP的适用性"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.1.1" target="_blank" rel="external">7.1.1 HPACK 和 HTTP的适用性</a></h4><h4 id="7-1-2-缓解"><a href="#7-1-2-缓解" class="headerlink" title="7.1.2 缓解"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.1.2" target="_blank" rel="external">7.1.2 缓解</a></h4><h4 id="7-1-3-从不索引的字面量"><a href="#7-1-3-从不索引的字面量" class="headerlink" title="7.1.3 从不索引的字面量"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.1.3" target="_blank" rel="external">7.1.3 从不索引的字面量</a></h4><h3 id="7-2-静态Huffman编码"><a href="#7-2-静态Huffman编码" class="headerlink" title="7.2 静态Huffman编码"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.2" target="_blank" rel="external">7.2 静态Huffman编码</a></h3><h3 id="7-3-内存消耗"><a href="#7-3-内存消耗" class="headerlink" title="7.3 内存消耗"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.3" target="_blank" rel="external">7.3 内存消耗</a></h3><h3 id="7-4-实现的限制"><a href="#7-4-实现的限制" class="headerlink" title="7.4 实现的限制"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.4" target="_blank" rel="external">7.4 实现的限制</a></h3><h2 id="8-参考文献"><a href="#8-参考文献" class="headerlink" title="8. 参考文献"></a><a href="https://tools.ietf.org/html/rfc7541#section-8" target="_blank" rel="external">8. 参考文献</a></h2><h3 id="8-1-规范性参考文献"><a href="#8-1-规范性参考文献" class="headerlink" title="8.1 规范性参考文献"></a><a href="https://tools.ietf.org/html/rfc7541#section-8.1" target="_blank" rel="external">8.1 规范性参考文献</a></h3><h3 id="8-2-参考资料"><a href="#8-2-参考资料" class="headerlink" title="8.2 参考资料"></a><a href="https://tools.ietf.org/html/rfc7541#section-8.2" target="_blank" rel="external">8.2 参考资料</a></h3><h2 id="附录-A-静态表定义"><a href="#附录-A-静态表定义" class="headerlink" title="附录 A. 静态表定义"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-A" target="_blank" rel="external">附录 A. 静态表定义</a></h2><h2 id="附录-B-Huffman-码"><a href="#附录-B-Huffman-码" class="headerlink" title="附录 B. Huffman 码"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-B" target="_blank" rel="external">附录 B. Huffman 码</a></h2><h2 id="附录-C-示例"><a href="#附录-C-示例" class="headerlink" title="附录 C. 示例"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C" target="_blank" rel="external">附录 C. 示例</a></h2><h3 id="C-1-整数表示示例"><a href="#C-1-整数表示示例" class="headerlink" title="C.1 整数表示示例"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.1" target="_blank" rel="external">C.1 整数表示示例</a></h3><h4 id="C-1-1-示例-1：使用5位前缀编码10"><a href="#C-1-1-示例-1：使用5位前缀编码10" class="headerlink" title="C.1.1 示例 1：使用5位前缀编码10"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.1.1" target="_blank" rel="external">C.1.1 示例 1：使用5位前缀编码10</a></h4><h4 id="C-1-2-示例-2：使用5位前缀编码1337"><a href="#C-1-2-示例-2：使用5位前缀编码1337" class="headerlink" title="C.1.2 示例 2：使用5位前缀编码1337"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.1.2" target="_blank" rel="external">C.1.2 示例 2：使用5位前缀编码1337</a></h4><h4 id="C-1-3-示例-3-以字节边界为起始位置编码42"><a href="#C-1-3-示例-3-以字节边界为起始位置编码42" class="headerlink" title="C.1.3 示例 3: 以字节边界为起始位置编码42"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.1.3" target="_blank" rel="external">C.1.3 示例 3: 以字节边界为起始位置编码42</a></h4><h3 id="C-2-头部字段表示示例"><a href="#C-2-头部字段表示示例" class="headerlink" title="C.2 头部字段表示示例"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.2" target="_blank" rel="external">C.2 头部字段表示示例</a></h3><h4 id="C-2-1-有索引的字面量头部字段"><a href="#C-2-1-有索引的字面量头部字段" class="headerlink" title="C.2.1 有索引的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.2.1" target="_blank" rel="external">C.2.1 有索引的字面量头部字段</a></h4><h4 id="C-2-2-无索引的字面量头部字段"><a href="#C-2-2-无索引的字面量头部字段" class="headerlink" title="C.2.2 无索引的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.2.2" target="_blank" rel="external">C.2.2 无索引的字面量头部字段</a></h4><h4 id="C-2-3-从不索引的字面量头部字段"><a href="#C-2-3-从不索引的字面量头部字段" class="headerlink" title="C.2.3 从不索引的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.2.3" target="_blank" rel="external">C.2.3 从不索引的字面量头部字段</a></h4><h4 id="C-2-4-索引的头部字段"><a href="#C-2-4-索引的头部字段" class="headerlink" title="C.2.4 索引的头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.2.4" target="_blank" rel="external">C.2.4 索引的头部字段</a></h4><h3 id="C-3-不带Huffman编码的请求示例"><a href="#C-3-不带Huffman编码的请求示例" class="headerlink" title="C.3 不带Huffman编码的请求示例"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.3" target="_blank" rel="external">C.3 不带Huffman编码的请求示例</a></h3><h4 id="C-3-1-第一个请求"><a href="#C-3-1-第一个请求" class="headerlink" title="C.3.1 第一个请求"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.3.1" target="_blank" rel="external">C.3.1 第一个请求</a></h4><h4 id="C-3-2-第二个请求"><a href="#C-3-2-第二个请求" class="headerlink" title="C.3.2 第二个请求"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.3.2" target="_blank" rel="external">C.3.2 第二个请求</a></h4><h4 id="C-3-3-第三个请求"><a href="#C-3-3-第三个请求" class="headerlink" title="C.3.3 第三个请求"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.3.3" target="_blank" rel="external">C.3.3 第三个请求</a></h4><h3 id="C-4-带Huffman编码的请求示例"><a href="#C-4-带Huffman编码的请求示例" class="headerlink" title="C.4 带Huffman编码的请求示例"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.4" target="_blank" rel="external">C.4 带Huffman编码的请求示例</a></h3><h4 id="C-4-1-第一个请求"><a href="#C-4-1-第一个请求" class="headerlink" title="C.4.1 第一个请求"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.4.1" target="_blank" rel="external">C.4.1 第一个请求</a></h4><h4 id="C-4-2-第二个请求"><a href="#C-4-2-第二个请求" class="headerlink" title="C.4.2 第二个请求"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.4.2" target="_blank" rel="external">C.4.2 第二个请求</a></h4><h4 id="C-4-3-第三个请求"><a href="#C-4-3-第三个请求" class="headerlink" title="C.4.3 第三个请求"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.4.3" target="_blank" rel="external">C.4.3 第三个请求</a></h4><h3 id="C-5-不带Huffman编码的响应示例"><a href="#C-5-不带Huffman编码的响应示例" class="headerlink" title="C.5 不带Huffman编码的响应示例"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.5" target="_blank" rel="external">C.5 不带Huffman编码的响应示例</a></h3><h4 id="C-5-1-第一个响应"><a href="#C-5-1-第一个响应" class="headerlink" title="C.5.1 第一个响应"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.5.1" target="_blank" rel="external">C.5.1 第一个响应</a></h4><h4 id="C-5-2-第二个响应"><a href="#C-5-2-第二个响应" class="headerlink" title="C.5.2 第二个响应"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.5.2" target="_blank" rel="external">C.5.2 第二个响应</a></h4><h4 id="C-5-3-第三个响应"><a href="#C-5-3-第三个响应" class="headerlink" title="C.5.3 第三个响应"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.5.3" target="_blank" rel="external">C.5.3 第三个响应</a></h4><h3 id="C-6-带Huffman编码的响应示例"><a href="#C-6-带Huffman编码的响应示例" class="headerlink" title="C.6 带Huffman编码的响应示例"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.6" target="_blank" rel="external">C.6 带Huffman编码的响应示例</a></h3><h4 id="C-6-1-第一个响应"><a href="#C-6-1-第一个响应" class="headerlink" title="C.6.1 第一个响应"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.6.1" target="_blank" rel="external">C.6.1 第一个响应</a></h4><h4 id="C-6-2-第二个响应"><a href="#C-6-2-第二个响应" class="headerlink" title="C.6.2 第二个响应"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.6.2" target="_blank" rel="external">C.6.2 第二个响应</a></h4><h4 id="C-6-3-第三个响应"><a href="#C-6-3-第三个响应" class="headerlink" title="C.6.3 第三个响应"></a><a href="https://tools.ietf.org/html/rfc7541#appendix-C.6.3" target="_blank" rel="external">C.6.3 第三个响应</a></h4><h2 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h2><h2 id="作者地址"><a href="#作者地址" class="headerlink" title="作者地址"></a>作者地址</h2><h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a><a href="https://tools.ietf.org/html/rfc7541#section-1" target="_blank" rel="external">1. 简介</a></h1><p>在 HTTTP/1.1中 (见 [<a href="https://tools.ietf.org/html/rfc7230" target="_blank" rel="external">RFC7230</a>])， 首部字段是不压缩的。随着web页面逐步成长到需要发出几十甚至几百个请求，这些请求中冗余的首部字段不必要地消耗了带宽，并导致了可测量的延迟增加。</p>
<p><a href="https://tools.ietf.org/html/rfc7541#ref-SPDY" target="_blank" rel="external">SPDY</a> [SPDY] 最初通过使用 <a href="https://tools.ietf.org/html/rfc7541#ref-DEFLATE" target="_blank" rel="external">DEFLATE</a> [DEFLATE] 格式压缩头部字段来解决这种冗余，这在有效地表示冗余的首部字段方面非常有效。然而，该方法暴露了CRIME (Compression Ratio Info-leak Made Easy) 攻击 (参见 <a href="https://tools.ietf.org/html/rfc7541#ref-CRIME" target="_blank" rel="external">[CRIME]</a>) 所示的安全风险。</p>
<p>本规范定义了HPACK，它是一种新的压缩器，它消除了冗余的首部字段，限制了对已知安全攻击的脆弱性，并却具有在受限环境中使用的有限内存要求。<a href="https://tools.ietf.org/html/rfc7541#section-7" target="_blank" rel="external">第 7 节</a>介绍了HPACK的潜在安全问题。</p>
<p>HPACK格式有意地被设计的简单而不灵活。这两个特性降低了由于实现错误而导致互操作性和安全性问题的风险。没有定义可扩展性机制；只能通过定义完全的替代品来更改格式。</p>
<h2 id="1-1-概述-1"><a href="#1-1-概述-1" class="headerlink" title="1.1 概述"></a><a href="https://tools.ietf.org/html/rfc7541#section-1.1" target="_blank" rel="external">1.1 概述</a></h2><p>本规范中定义的格式将首部字段列表视为可包含重复对的名-值对的有序集合。名字和值被认为是不透明的字节序列，并且头部字段的顺序在压缩和解压后被保留。</p>
<p>编码通过将头部字段映射到索引值的头部字段表来获知。这些头部字段表可以随着新头部字段的编码和解码而增量地更新。</p>
<p>在编码形式中，头部字段被字面地表示，或者作为对头部字段表之一中的头部字段。因此，可以使用引用和字面量值的混合来编码头部字段列表。</p>
<p>字面量值直接编码或使用一个静态Huffman码。</p>
<p>编码器负责决定将哪些头部字段作为新条目插入头部字段表。解码器执行由编码器规定的对头部字段表的修改，及重建头部字段列表的过程。这使解码器保持简单，并能与各种编码器的互操作。</p>
<p><a href="https://tools.ietf.org/html/rfc7541#appendix-C" target="_blank" rel="external">附录 C</a> 中提供了说明使用这些不同机制表示头字段的示例。</p>
<h2 id="1-2-约定-1"><a href="#1-2-约定-1" class="headerlink" title="1.2 约定"></a><a href="https://tools.ietf.org/html/rfc7541#section-1.2" target="_blank" rel="external">1.2 约定</a></h2><p>本文档中的关键字 “MUST”，”MUST NOT”，”REQUIRED”，”SHALL”，”SHALL NOT”，”SHOULD”，”SHOULD NOT”，”RECOMMENDED”，”MAY”，和 “OPTIONAL”以如[<a href="https://tools.ietf.org/html/rfc2119" target="_blank" rel="external">RFC2119</a>]中所描述的来解释。</p>
<p>所有的数值都是网络字节序。除非另有说明，否则值为无符号的。字面值以十进制或十六进制的形式提供。</p>
<h2 id="1-3-术语-1"><a href="#1-3-术语-1" class="headerlink" title="1.3 术语"></a><a href="https://tools.ietf.org/html/rfc7541#section-1.3" target="_blank" rel="external">1.3 术语</a></h2><p>本规范使用了如下的术语：</p>
<p><strong>头部字段</strong>：一个名-值对。名字和值都被视为不透明的字节序列。</p>
<p><strong>动态表</strong>：动态表 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-2.3.2" target="_blank" rel="external">2.3.2节</a>) 是将存储的<strong>头部字段</strong>和<strong>索引值</strong>关联起来的表。这个表是动态的，并且特定于编码或解码上下文。</p>
<p><strong>静态表</strong>：静态表是 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-2.3.1" target="_blank" rel="external">2.3.1节</a>) 是静态地将<strong>频繁出现的头部字段</strong>与<strong>索引值</strong>关联起来的表。这个表是有序的，只读的，总是可访问的，且可以在所有的编码或解码上下文间共享的。</p>
<p><strong>头部列表</strong>：头部列表是一个联合编码的头部字段可出现重复的有序头部字段集合。一个HTTP/2 <strong>头部块</strong> 中包含的完整的 <strong>头部字段列表</strong> 是一个 <strong>头部列表</strong>。</p>
<p><strong>头部字段表示</strong>：头部字段可以以字面量或索引的编码形式表示( 见 <a href="https://tools.ietf.org/html/rfc7541#section-2.4" target="_blank" rel="external">2.4节</a>)。</p>
<p><strong>头部块</strong>：头部字段表示的有序列表，当解码时，产生完整的头部列表。</p>
<h1 id="2-压缩过程概述-1"><a href="#2-压缩过程概述-1" class="headerlink" title="2. 压缩过程概述"></a><a href="https://tools.ietf.org/html/rfc7541#section-2" target="_blank" rel="external">2. 压缩过程概述</a></h1><p>本规范没有描述用于编码器的特定算法。相反，它精确地定义了解码器如何操作，以允许编码器产生本定义允许的任何编码。</p>
<h2 id="2-1-头部列表排序-1"><a href="#2-1-头部列表排序-1" class="headerlink" title="2.1 头部列表排序"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.1" target="_blank" rel="external">2.1 头部列表排序</a></h2><p>HPACK保留头部列表中头部字段的顺序。编码器 <strong>必须(MUST)</strong> 根据 <strong>头部字段</strong> 在原始头部列表中的顺序在头部块中对 <strong>头部字段表示</strong> 进行排序。解码器 <strong>必须(MUST)</strong> 根据 <strong>头部字段表示</strong> 在头部块中的顺序在解码的头部列表中对 <strong>头部字段</strong> 进行排序。</p>
<h2 id="2-2-编码和解码上下文-1"><a href="#2-2-编码和解码上下文-1" class="headerlink" title="2.2 编码和解码上下文"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.2" target="_blank" rel="external">2.2 编码和解码上下文</a></h2><p>要解压缩 <strong>头部块</strong>，解码器只需维护 <strong>动态表</strong> (参见 <a href="https://tools.ietf.org/html/rfc7541#section-2.3.2" target="_blank" rel="external">2.3.2节</a>) 作为解码上下文。不需要其它的动态状态。</p>
<p>当被用于双向通信时，比如在HTTP中，编码和解码动态表完全独立地由一端维护，比如，请求和响应的动态表是分开的。</p>
<h2 id="2-3-索引表-1"><a href="#2-3-索引表-1" class="headerlink" title="2.3 索引表"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.3" target="_blank" rel="external">2.3 索引表</a></h2><p>HPACK使用两个表将 <strong>头部字段</strong> 与 <strong>索引</strong> 关联起来。 <strong>静态表</strong> (参见 <a href="https://tools.ietf.org/html/rfc7541#section-2.3.1" target="_blank" rel="external">2.3.1节</a>) 是预定义的，它包含了常见的头部字段（其中的大多数值为空）。 <strong>动态表</strong> (参见 <a href="https://tools.ietf.org/html/rfc7541#section-2.3.2" target="_blank" rel="external">2.3.2节</a>) 是动态的，它可被编码器用于在编码的头部列表中重复地索引头部字段。</p>
<p>这两个表被组合成用于定义索引值的单个地址空间(参见 <a href="https://tools.ietf.org/html/rfc7541#section-2.3.3" target="_blank" rel="external">2.3.3节</a>)。</p>
<h3 id="2-3-1-静态表-1"><a href="#2-3-1-静态表-1" class="headerlink" title="2.3.1 静态表"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.3.1" target="_blank" rel="external">2.3.1 静态表</a></h3><p>静态表由一个预定义的头部字段的静态列表组成。它的条目在 <a href="https://tools.ietf.org/html/rfc7541#appendix-A" target="_blank" rel="external">附录 A</a> 中定义。</p>
<h3 id="2-3-2-动态表-1"><a href="#2-3-2-动态表-1" class="headerlink" title="2.3.2 动态表"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.3.2" target="_blank" rel="external">2.3.2 动态表</a></h3><p>动态表由以先进先出顺序维护的 <strong>头部字段列表</strong> 组成。动态表中第一个且最新的条目索引值最低，动态表最旧的条目索引值最高。</p>
<p>动态表最初是空的。条目随着每个头部块的解压而添加。</p>
<p>动态表可以包含重复的条目 (比如，具有相同的名字和相同的值的条目)。因而，重复条目 <strong>一定不能(MUST NOT)</strong> 被解码器视为错误。</p>
<p>编码器决定如何更新动态表，并因此可以控制动态表使用多少内存。为了限制解码器的内存需求，动态表的大小被严格地进行限制(参见 <a href="https://tools.ietf.org/html/rfc7541#section-4.2" target="_blank" rel="external">4.2节</a>)。</p>
<p>解码器在处理 <strong>头部字段表示</strong> (参见<a href="https://tools.ietf.org/html/rfc7541#section-3.2" target="_blank" rel="external">3.2节</a>) 列表的过程中更新动态表</p>
<h3 id="2-3-3-索引地址空间-1"><a href="#2-3-3-索引地址空间-1" class="headerlink" title="2.3.3 索引地址空间"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.3.3" target="_blank" rel="external">2.3.3 索引地址空间</a></h3><p>静态表和动态表被组合为单独的索引地址空间。</p>
<p>在1和静态表的长度(包含)之间的索引值指向静态表 (见第 <a href="https://tools.ietf.org/html/rfc7541#section-2.3.1" target="_blank" rel="external">2.3.1节</a>) 中的元素。</p>
<p>严格地大于静态表长度的索引值指向动态表 (见第 <a href="https://tools.ietf.org/html/rfc7541#section-2.3.2" target="_blank" rel="external">2.3.2节</a>) 中的元素。通过减去静态表的长度来查找指向动态表的索引。</p>
<p>严格地大于两表长度之和的索引值 <strong>必须(MUST)</strong> 被视为一个解码错误。</p>
<p>对于静态表大小为s，动态表大小为k的情况，下图展示了完整的有效索引地址空间。</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="variable">&lt;----------  Index Address Space ----------&gt;</span></div><div class="line"><span class="variable">&lt;-- Static  Table --&gt;</span>  <span class="variable">&lt;-- Dynamic Table --&gt;</span></div><div class="line">+---+-----------+---+  +---+-----------+---+</div><div class="line">|<span class="string"> 1 </span>|<span class="string">    ...    </span>|<span class="string"> s </span>|<span class="string">  </span>|<span class="string">s+1</span>|<span class="string">    ...    </span>|<span class="string">s+k</span>|</div><div class="line">+---+-----------+---+  +---+-----------+---+</div><div class="line">                       ^                   |<span class="string"></span></div><div class="line">                       |<span class="string">                   V</span></div><div class="line">                Insertion Point      Dropping Point</div></pre></td></tr></table></figure>
<p>图 1：索引地址空间</p>
<h2 id="2-4-头部字段表示-1"><a href="#2-4-头部字段表示-1" class="headerlink" title="2.4 头部字段表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-2.4" target="_blank" rel="external">2.4 头部字段表示</a></h2><p>一个编码的头部字段可由一个索引或一个字面量表示。</p>
<p>索引的表示法将头部字段定义为对静态表或动态表中条目的引用(见第 <a href="https://tools.ietf.org/html/rfc7541#section-6.1" target="_blank" rel="external">6.1节</a>)。</p>
<p>字面量的表示通过描述头部字段的名称和值来定义头部字段。头部字段的名称可被字面地表示，或表示为对静态表或动态表中条目的引用。头部字段的值由字面量表示。</p>
<p>定义了三种不同的字面的表示：</p>
<ul>
<li>将头部字段作为新条目添加到动态表的起始位置的字面地表示(见第 <a href="https://tools.ietf.org/html/rfc7541#section-6.2.1" target="_blank" rel="external">6.2.1节</a>)。</li>
<li>不向动态表添加 <strong>头部字段</strong> 的字面量表示(见第 <a href="https://tools.ietf.org/html/rfc7541#section-6.2.2" target="_blank" rel="external">6.2.2节</a>)。</li>
<li>不向动态表添加头部字段的字面量表示，此外还规定这个头部字段总是使用字面的表示，特别是由一个中介重编码时 (见第 <a href="https://tools.ietf.org/html/rfc7541#section-6.2.3" target="_blank" rel="external">6.2.3节</a>)。这种表示的目的是保护那些在压缩时有一定风险的头部字段值 (见第 <a href="https://tools.ietf.org/html/rfc7541#section-7.1.3" target="_blank" rel="external">7.1.3节</a> 来获取更多详细信息)。</li>
</ul>
<p>可按照 <strong>安全注意事项</strong> 的指导来选择这三种字面的表示中的一个，以保护敏感的头部字段值 (见第 <a href="https://tools.ietf.org/html/rfc7541#section-7.1" target="_blank" rel="external">7.1节</a>)。</p>
<p>头部字段的名字或值的字面表示的字节序列可以是直接地编码，或使用静态Huffman码 (见第 <a href="https://tools.ietf.org/html/rfc7541#section-5.2" target="_blank" rel="external">5.2节</a>)。</p>
<h1 id="3-头部块解码-1"><a href="#3-头部块解码-1" class="headerlink" title="3. 头部块解码"></a><a href="https://tools.ietf.org/html/rfc7541#section-3" target="_blank" rel="external">3. 头部块解码</a></h1><h2 id="3-1-头部块处理-1"><a href="#3-1-头部块处理-1" class="headerlink" title="3.1 头部块处理"></a><a href="https://tools.ietf.org/html/rfc7541#section-3.1" target="_blank" rel="external">3.1 头部块处理</a></h2><p>解码器顺序地处理头部块来重建原始的头部列表。</p>
<p>头部块是 <strong>头部字段表示</strong> 的连接。不同的可能的头部字段表示在第 <a href="https://http2.github.io/http2-spec/compression.html#detailed.format" target="_blank" rel="external">6节</a> 描述。</p>
<p>一旦头部字段被解码并加进了重建的头部列表，它就不能被移除了。被加进头部列表的头部字段可以被安全地传给应用程序。</p>
<p>通过将得到的头部字段传给应用程序，除了动态表所需的内存外，可以利用最小的临时存储器承诺来实现解码器。</p>
<h2 id="3-2-头部字段表示处理-1"><a href="#3-2-头部字段表示处理-1" class="headerlink" title="3.2 头部字段表示处理"></a><a href="https://tools.ietf.org/html/rfc7541#section-3.2" target="_blank" rel="external">3.2 头部字段表示处理</a></h2><p>本节定义对头部块进行处理以获得头部列表。为了确保解码将成功地产生 <strong>头部列表</strong>，解码器 <strong>必须(MUST)</strong> 遵守以下规则。</p>
<p>包含在一个头部块中的所有头部字段表示以它们出现的顺序处理，如下所述。关于不同的头部字段表示的格式的细节和一些额外的处理指令参见 <a href="https://tools.ietf.org/html/rfc7541#section-6" target="_blank" rel="external">第6节</a>。</p>
<p><strong><em>索引的表示</em></strong> 需要执行以下操作：</p>
<ul>
<li>静态表或动态表中被引用的条目对应的头部字段被加到解码的头部列表。</li>
</ul>
<p><strong><em>不加进</em></strong> 动态表的 <strong><em>字面的表示</em></strong> 需要执行以下操作：</p>
<ul>
<li>头部字段被加到解码的头部列表。</li>
</ul>
<p><strong><em>加进</em></strong> 动态表的 <strong><em>字面的表示</em></strong> 需要执行以下操作：</p>
<ul>
<li>头部字段被加到解码的头部列表。</li>
<li>头部字段被插入动态表的起始位置。这种插入可能导致动态表中之前的条目被逐出 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-4.4" target="_blank" rel="external">第 4.4节</a>)。</li>
</ul>
<h1 id="4-动态表管理-1"><a href="#4-动态表管理-1" class="headerlink" title="4. 动态表管理"></a><a href="https://tools.ietf.org/html/rfc7541#section-4" target="_blank" rel="external">4. 动态表管理</a></h1><p>为了限制解码器端的内存需求，动态表大小受到限制。</p>
<h2 id="4-1-计算表大小-1"><a href="#4-1-计算表大小-1" class="headerlink" title="4.1 计算表大小"></a><a href="https://tools.ietf.org/html/rfc7541#section-4.1" target="_blank" rel="external">4.1 计算表大小</a></h2><p>动态表大小是它的条目大小的总和。</p>
<p>条目大小是它名字的字节长度 ( 如 <a href="https://tools.ietf.org/html/rfc7541#section-5.2" target="_blank" rel="external">第 5.2 节</a> 所述) 及它值的字节长度的总和，外加32。</p>
<p>任何条目的大小使用未应用Huffman编码条件下，它的名字和值的长度来计算。</p>
<p><strong>注意</strong>：额外的32字节是考虑到与一个条目关联的预估开销。比如，条目结构使用两个64位的指针引用条目的名字和值，及两个64位整数来计数引用了名字和值的引用数目，这将有32字节的开销。</p>
<h2 id="4-2-最大表大小-1"><a href="#4-2-最大表大小-1" class="headerlink" title="4.2 最大表大小"></a><a href="https://tools.ietf.org/html/rfc7541#section-4.2" target="_blank" rel="external">4.2 最大表大小</a></h2><p>使用HPACK的协议决定允许编码器使用的动态表最大大小。在HTTP/2中，这个值由SETTINGS_HEADER_TABLE_SIZE 设置项决定 (参见 <a href="https://tools.ietf.org/html/rfc7541#ref-HTTP2" target="_blank" rel="external">[HTTP2]</a> 的第 6.5.2节)。</p>
<p>编码器可以选择使用比此最大大小(参见 <a href="https://tools.ietf.org/html/rfc7541#section-6.3" target="_blank" rel="external">第6.3节</a>)更小的容量，但选择的大小 <strong>必须(MUST)</strong> 小于等于协议设置的最大大小。</p>
<p>动态表最大大小的修改通过动态表大小更新(见 <a href="https://tools.ietf.org/html/rfc7541#section-6.3" target="_blank" rel="external">第6.3节</a>)来通知。这种动态表大小更新 <strong>必须(MUST)</strong> 发生在遵循该动态表大小改变的第一个头部块的起始处。在HTTP/2中，这发生在设置项确认(参见 <a href="https://tools.ietf.org/html/rfc7541#ref-HTTP2" target="_blank" rel="external">[HTTP2]</a> 的第6.5.3节)之后。</p>
<p>两个头部块的传输之间可能发生多次对最大表大小的更新。对于在这个间隔内该大小改变超过一次的情况，那个间隔内发生的最小最大表大小 <strong>必须(MUST)</strong> 在一个动态表大小更新中通知。最终的最大大小总是用信号通知的，这导致至多两个动态表大小更新。这确保解码器能够基于减小的动态表大小来执行逐出(见 <a href="https://tools.ietf.org/html/rfc7541#section-4.3" target="_blank" rel="external">第 4.3节</a>)。</p>
<p>通过将最大大小设置为0，此机制可被用于完全地清除动态表中的条目，随后可以恢复这些条目。</p>
<h2 id="4-3-动态表大小改变时的条目逐出-1"><a href="#4-3-动态表大小改变时的条目逐出-1" class="headerlink" title="4.3 动态表大小改变时的条目逐出"></a><a href="https://tools.ietf.org/html/rfc7541#section-4.3" target="_blank" rel="external">4.3 动态表大小改变时的条目逐出</a></h2><p>无论何时动态表最大大小减小，将条目从动态表的结尾处逐出，直到动态表的大小小于或等于最大大小。</p>
<h2 id="4-4-添加新条目时的条目逐出-1"><a href="#4-4-添加新条目时的条目逐出-1" class="headerlink" title="4.4 添加新条目时的条目逐出"></a><a href="https://tools.ietf.org/html/rfc7541#section-4.4" target="_blank" rel="external">4.4 添加新条目时的条目逐出</a></h2><p>在把新条目加到动态表之前，需要先从动态表的结尾处把条目逐出，直到动态表大小小于或等于(最大大小 - 新条目大小)，或直到表为空。</p>
<p>如果新条目小于等于最大大小，则将那个条目加进表里。尝试将大于最大大小的条目加进表里不是错误；尝试添加大于最大大小的条目导致所有已有条目被清空，并产生一个空表。</p>
<p>当把新条目加进动态表时，该新条目可以引用动态表中将被逐出的条目的名字。实现要注意，如果引用的条目在新条目插入之前被从动态表逐出了，则要避免删除引用的名字。</p>
<h1 id="5-原始数据类型的表示"><a href="#5-原始数据类型的表示" class="headerlink" title="5. 原始数据类型的表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-5" target="_blank" rel="external">5. 原始数据类型的表示</a></h1><p>HPACK编码使用两种原始数据类型：无符号的变长整数和字节串。</p>
<h2 id="5-1-整数的表示-1"><a href="#5-1-整数的表示-1" class="headerlink" title="5.1 整数的表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-5.1" target="_blank" rel="external">5.1 整数的表示</a></h2><p>整数用于表示名字索引，头部字段索引或字符串长度。整数的表示可在字节内的任何位置开始。为了处理上的优化，整数的表示总是在字节的结尾处结束。</p>
<p>整数由两部分表示：填满当前字节的前缀，及前缀不足以表示整数时的一个可选字节列表。前缀的位数 (称为 N) 是整数表示过程的一个参数。</p>
<p>如果整数值足够小，比如，严格地小于2^N-1，则把它编码进N位前缀。<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| ? | ? | ? |       Value       |</span></div><div class="line">+---+---+---+-------------------+</div></pre></td></tr></table></figure></p>
<p>图 2：前缀中编码的整数值 (显示 N = 5)</p>
<p>否则，前缀的所有位被设置为1，值减去2^N-1，然后使用一个或多个字节的列表编码。每个字节的最高有效位被用作连续标记：除列表的最后一个字节外，该位的值都被设为1。字节中剩余的位被用于编码减小后的值。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| ? | ? | ? | 1   1   1   1   1 |</span></div><div class="line">+---+---+---+-------------------+</div><div class="line"><span class="section">| 1 |    Value-(2^N-1) LSB      |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">               ...</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| 0 |    Value-(2^N-1) MSB      |</span></div><div class="line">+---+---------------------------+</div></pre></td></tr></table></figure>
<p>图 3：前缀之后的整数值的编码(显示 N =  5)</p>
<p>要由字节列表解码整数值，首先需要将列表中的字节顺序反过来。然后，移除每个字节的最高有效位。连接字节的剩余位，再将结果加2^N-1获得整数值。</p>
<p>前缀大小，N，总是在1到8位之间。从字节边界开始编码的整数值其前缀为8位。</p>
<p>表示整数I的伪代码如下：<br><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">if <span class="keyword">I</span> &lt; <span class="number">2</span>^<span class="keyword">N</span> - <span class="number">1</span>, encode <span class="keyword">I</span> on <span class="keyword">N</span> bits</div><div class="line">else</div><div class="line">    encode (<span class="number">2</span>^<span class="keyword">N</span> - <span class="number">1</span>) on <span class="keyword">N</span> bits</div><div class="line">    <span class="keyword">I</span> = <span class="keyword">I</span> - (<span class="number">2</span>^<span class="keyword">N</span> - <span class="number">1</span>)</div><div class="line">    while <span class="keyword">I</span> &gt;= <span class="number">128</span></div><div class="line">         encode (<span class="keyword">I</span> % <span class="number">128</span> + <span class="number">128</span>) on <span class="number">8</span> bits</div><div class="line">         <span class="keyword">I</span> = <span class="keyword">I</span> / <span class="number">128</span></div><div class="line">    encode <span class="keyword">I</span> on <span class="number">8</span> bits</div></pre></td></tr></table></figure></p>
<font color="red">注意，在表示大整数时，字节序列中每个字节的最高有效位仅仅被用作了连续标记，它没有被用于表示整数值。(I % 128 + 128) 这个式子只是为了说明，字节的最高有效位要被设置为1。</font>

<p>解码整数I的伪代码如下：<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">decode</span> I from the next <span class="keyword">N</span> bits</div><div class="line"><span class="keyword">if</span> I &lt; 2^<span class="keyword">N</span> - 1, <span class="keyword">return</span> <span class="built_in">I</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    <span class="keyword">M</span> = 0</div><div class="line">    <span class="keyword">repeat</span></div><div class="line">        B = next octet</div><div class="line">        I = I + (B &amp; 127) * 2^<span class="built_in">M</span></div><div class="line">        <span class="keyword">M</span> = <span class="keyword">M</span> + 7</div><div class="line">    <span class="keyword">while</span> B &amp; 128 == 128</div><div class="line">    <span class="keyword">return</span> <span class="built_in">I</span></div></pre></td></tr></table></figure></p>
<font color="red">要如何判断I小于 (2^N - 1) 呢？ 可以根据下一个字节的最高有效位判断么？好像不行吧。</font>

<p>说明了 <strong>整数的编码</strong> 的示例可参见<a href="https://tools.ietf.org/html/rfc7541#appendix-C.1" target="_blank" rel="external">附录C.1</a>。</p>
<p>这种整数表示法允许无限大的值。编码器还可能发送大量0值，这可以浪费字节，并且可能用于溢出整数值。超出实现限制的整数的编码——值或字节长度—— <strong>必须(MUST)</strong> 被视为解码错误。可以基于实现的限制，为整数的每个不同使用设置不同的限制。</p>
<font color="red">浪费字节 是什么鬼？溢出整数值 又是要干什么？<strong>整数的每个不同使用</strong> 是神马意思？</font>

<h2 id="5-2-字符串的字面表示"><a href="#5-2-字符串的字面表示" class="headerlink" title="5.2 字符串的字面表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-5.2" target="_blank" rel="external">5.2 字符串的字面表示</a></h2><p>头部字段名和头部字段值可使用字符串字面量表示。字符串字面量可通过直接编码其字节或使用Huffman码 (见 <a href="https://tools.ietf.org/html/rfc7541#ref-HUFFMAN" target="_blank" rel="external">[HUFFMAN]</a>)编码为字节序列。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| H |    String Length (7+)     |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">|  String Data (Length octets)  |</span></div><div class="line">+-------------------------------+</div></pre></td></tr></table></figure>
<p>图 4：字符串字面量表示</p>
<p>字符串字面量表示包含如下的字段：</p>
<p><strong>H：</strong> 一位的标记，H，指示字符串的字节是否为Huffman编码。</p>
<p><strong>字符串长度：</strong> 编码字符串字面量的字节数，用一个7位前缀的整数编码 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-5.1" target="_blank" rel="external">第5.1节</a>)。</p>
<p><strong>字符串数据：</strong> 字符串字面量的编码数据。如果H是’0’，则编码数据是字符串字面量的原始字节。如果H是’1’，则编码数据是字符串字面量的Huffman编码。</p>
<p>以Huffman码编码的字符串字面量使用 <a href="https://tools.ietf.org/html/rfc7541#appendix-B" target="_blank" rel="external">附录 B</a> 中定义的Huffman码 ( 参见 <a href="https://tools.ietf.org/html/rfc7541#appendix-C.4" target="_blank" rel="external">附录 C.4</a> 中请求的例子和 <a href="https://tools.ietf.org/html/rfc7541#appendix-C.6" target="_blank" rel="external">附录  C.6</a> 中响应的例子)。编码的数据是字符串字面量每个字节对应的代码的位的连接。</p>
<p>由于Huffman编码数据不总是在字节边界处结束，因而要在它的后面插入一些填充，至下个字节的边界。为了防止这种填充被错误地解释为字符串字面量的一部分，而将代码的最高有效位用作 EOS (end-of-string) 符号。</p>
<p>一旦解码完成，编码数据结尾处不完整的代码被视为填充并丢弃。严格地长于7位的填充 <strong>必须(MUST)</strong> 被视为解码错误。包含EOS符号的Huffman编码字符串字面量 <strong>必须(MUST)</strong> 被视为解码错误。</p>
<font color="red">所以EOS符号究竟是如何用的？Hufffman编码字符串字面的填充又是如何识别的？</font>

<h1 id="6-二进制格式-1"><a href="#6-二进制格式-1" class="headerlink" title="6. 二进制格式"></a><a href="https://tools.ietf.org/html/rfc7541#section-6" target="_blank" rel="external">6. 二进制格式</a></h1><p>本节描述每个不同头部字段表示和动态表大小更新指令的详细格式。</p>
<h2 id="6-1-索引的头部字段表示-1"><a href="#6-1-索引的头部字段表示-1" class="headerlink" title="6.1 索引的头部字段表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.1" target="_blank" rel="external">6.1 索引的头部字段表示</a></h2><font color="red">指将头部字段表示为索引值。</font>

<p>索引的头部字段表示标识静态表或动态表 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-2.3" target="_blank" rel="external">第2.3节</a>) 中的条目。</p>
<p>索引的头部字段表示使头部字段被加进解码的头部列表，如 <a href="https://tools.ietf.org/html/rfc7541#section-3.2" target="_blank" rel="external">第 3.2节</a> 所述。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 1 |        Index (7+)         |</span></div><div class="line">+---+---------------------------+</div></pre></td></tr></table></figure>
<p>图 5：索引的头部字段</p>
<p>索引的头部字段以’1’的 1位模式开始，后面是匹配的头部字段索引，由一个7位前缀的整数 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-5.1" target="_blank" rel="external">第5.1节</a>) 表示。</p>
<p>不使用索引值0。如果在索引的头部字段表示中发现则 <strong>必须(MUST)</strong> 将其视为解码错误。</p>
<h2 id="6-2-字面的头部字段表示"><a href="#6-2-字面的头部字段表示" class="headerlink" title="6.2 字面的头部字段表示"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.2" target="_blank" rel="external">6.2 字面的头部字段表示</a></h2><p>字面的头部字段表示包含一个 <strong>字面的头部字段值</strong>。头部字段名由一个字面量或对静态表或动态表 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-2.3" target="_blank" rel="external">第2.3节</a>)中一个已有表条目的引用表示。</p>
<font color="red">字面的头部字段表示法中，头部字段的名可以用索引或字面量表示，而值则必须以字面量表示。</font>

<p>本规范定义三种 <strong>字面的头部字段</strong> 表示格式：有索引的，无索引的，和从不索引的。</p>
<h3 id="6-2-1-增量索引表示的字面量头部字段"><a href="#6-2-1-增量索引表示的字面量头部字段" class="headerlink" title="6.2.1 增量索引表示的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.2.1" target="_blank" rel="external">6.2.1 增量索引表示的字面量头部字段</a></h3><p><strong>增量索引表示的字面量头部字段</strong> 导致将头部字段加进解码的头部列表，并将其作为新条目插入到动态表中。</p>
<font color="red">通信的双方不会专门发送动态表。编码时动态表被编码进头部列表。解码时解码器从头部列表动态地构建出动态表。</font>

<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 0 | 1 |      Index (6+)       |</span></div><div class="line">+---+---+-----------------------+</div><div class="line"><span class="section">| H |     Value Length (7+)     |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| Value String (Length octets)  |</span></div><div class="line">+-------------------------------+</div></pre></td></tr></table></figure>
<p>图 6：增量索引表示的字面量头部字段 - 索引的名字<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 0 | 1 |           0           |</span></div><div class="line">+---+---+-----------------------+</div><div class="line"><span class="section">| H |     Name Length (7+)      |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">|  Name String (Length octets)  |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| H |     Value Length (7+)     |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| Value String (Length octets)  |</span></div><div class="line">+-------------------------------+</div></pre></td></tr></table></figure></p>
<p>图 7：增量索引表示的字面量头部字段 - 新的名字</p>
<p>增量索引表示的字面量头部字段表示以’01’ 2位模式开始。</p>
<p>如果头部字段名与静态表或动态表中存储的条目的头部字段名匹配，则头部字段名称可用那个条目的索引表示。在这种情况下，条目的索引以一个具有6位前缀的整数(参见 <a href="https://tools.ietf.org/html/rfc7541#section-5.1" target="_blank" rel="external">第5.1节</a>)表示。这个值总是非0。</p>
<p>否则，头部字段名由一个字符串字面量 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-5.2" target="_blank" rel="external">第5.2节</a>) 表示，使用0值代替6位索引，其后是头字段名。</p>
<p>两种形式的 <strong>头部字段名表示</strong> 之后是字符串字面量表示的头部字段值 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-5.2" target="_blank" rel="external">第5.2节</a>)。</p>
<h3 id="6-2-2-无索引的字面量头部字段-1"><a href="#6-2-2-无索引的字面量头部字段-1" class="headerlink" title="6.2.2 无索引的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.2.2" target="_blank" rel="external">6.2.2 无索引的字面量头部字段</a></h3><p>无索引的字面量头部字段表示导致将头部字段加进解码的头部列表而 <strong>不改变动态表</strong>。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 0 | 0 | 0 | 0 |  Index (4+)   |</span></div><div class="line">+---+---+-----------------------+</div><div class="line"><span class="section">| H |     Value Length (7+)     |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| Value String (Length octets)  |</span></div><div class="line">+-------------------------------+</div></pre></td></tr></table></figure>
<p>图 8：无索引的字面量头部字段 - 索引的名字<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 0 | 0 | 0 | 0 |       0       |</span></div><div class="line">+---+---+-----------------------+</div><div class="line"><span class="section">| H |     Name Length (7+)      |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">|  Name String (Length octets)  |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| H |     Value Length (7+)     |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| Value String (Length octets)  |</span></div><div class="line">+-------------------------------+</div></pre></td></tr></table></figure></p>
<p>图 9：无索引的字面量头部字段 - 新的名字</p>
<p>无索引的字面量头部字段表示以’0000’ 4位模式开始。</p>
<p>如果头部字段名与静态表或动态表中存储的条目的头部字段名匹配，则头部字段名可使用那个条目的索引表示。在这种情况下，条目的索引以一个有着4位前缀的整数 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-5.1" target="_blank" rel="external">第5.1节</a>)表示。这个值总是非0。</p>
<p>否则，头部字段名由一个字符串字面量 (参见 <a href="https://http2.github.io/http2-spec/compression.html#string.literal.representation" target="_blank" rel="external">第5.2节</a>) 表示，使用值0代替4位索引，其后是头部字段名。</p>
<p>两种形式的 <strong>头部字段名表示</strong> 之后是字符串字面量形式表示的头部字段值 (见 <a href="https://tools.ietf.org/html/rfc7541#section-5.2" target="_blank" rel="external">第5.2节</a>)。</p>
<h3 id="6-2-3-从不索引的字面量头部字段-1"><a href="#6-2-3-从不索引的字面量头部字段-1" class="headerlink" title="6.2.3 从不索引的字面量头部字段"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.2.3" target="_blank" rel="external">6.2.3 从不索引的字面量头部字段</a></h3><p>从不索引的字面量头部字段表示导致头部字段被加进解码的头部列表而不改变动态表。中介在编码这个头部字段时 <strong>必须(MUST)</strong> 使用相同的表示。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 0 | 0 | 0 | 1 |  Index (4+)   |</span></div><div class="line">+---+---+-----------------------+</div><div class="line"><span class="section">| H |     Value Length (7+)     |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| Value String (Length octets)  |</span></div><div class="line">+-------------------------------+</div></pre></td></tr></table></figure>
<p>图 10：从不索引的字面量头部字段 - 索引的名字<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 0 | 0 | 0 | 1 |       0       |</span></div><div class="line">+---+---+-----------------------+</div><div class="line"><span class="section">| H |     Name Length (7+)      |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">|  Name String (Length octets)  |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| H |     Value Length (7+)     |</span></div><div class="line">+---+---------------------------+</div><div class="line"><span class="section">| Value String (Length octets)  |</span></div><div class="line">+-------------------------------+</div></pre></td></tr></table></figure></p>
<p>图 11：从不索引的字面量头部字段 - 新的名字</p>
<p>从不索引的字面量头部字段表示以’0001’ 4位模式开始。</p>
<p>当头部字段被表示为从 <strong>不索引的字面量头部字段</strong> 时，它 <strong>必须(MUST)</strong> 总是以该特定的 <strong>字面量表示</strong> 编码。尤其是当一个端点发送它接收的以 <strong>从不索引的字面量头部字段</strong> 表示的头部字段，它 <strong>必须(MUST)</strong> 以相同的表示转发该头部字段。</p>
<p>这种表示旨在保护不会由于压缩而带来风险的头部字段值 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-7.1" target="_blank" rel="external">第 7.1 节</a> 获得更多细节)。</p>
<font color="red">这是啥意思呢？</font>

<p>此表示的编码与无索引的字面量头部字段(参见 <a href="https://tools.ietf.org/html/rfc7541#section-6.2.2" target="_blank" rel="external">第 6.2.2节</a>)一致。</p>
<h2 id="6-3-动态表-大小更新-1"><a href="#6-3-动态表-大小更新-1" class="headerlink" title="6.3 动态表 大小更新"></a><a href="https://tools.ietf.org/html/rfc7541#section-6.3" target="_blank" rel="external">6.3 动态表 大小更新</a></h2><p><strong>动态表大小更新</strong> 通知一个对动态表大小的改变。<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 0 | 0 | 1 |   Max size (5+)   |</span></div><div class="line">+---+---------------------------+</div></pre></td></tr></table></figure></p>
<p>图 12：最大动态表大小更改</p>
<p>动态表大小更新以 ‘001’ 的 3位模式开始，后面是新的最大大小，以一个具有5位前缀的整数 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-5.1" target="_blank" rel="external">第5.1节</a>) 表示。</p>
<p>新的最大大小 <strong>必须(MUST)</strong> 小于等于使用HPACK的协议决定的限制。超出该限制的值 <strong>必须(MUST)</strong> 被视为解码错误。在HTTP/2中，这个限制是从解码器接收而由编码器确认 (参见 [<a href="https://tools.ietf.org/html/rfc7541#ref-HTTP2" target="_blank" rel="external">HTTP2</a>] 的 第6.5.3节) 的最后的SETTINGS_HEADER_TABLE_SIZE 参数值 (参见 [<a href="https://tools.ietf.org/html/rfc7541#ref-HTTP2" target="_blank" rel="external">HTTP2</a>] 的第 6.5.2节)，</p>
<p>减小动态表的最大大小可能导致条目被逐出 (参见 <a href="https://tools.ietf.org/html/rfc7541#section-4.3" target="_blank" rel="external">第4.3节</a>) 。</p>
<h1 id="7-安全注意事项-1"><a href="#7-安全注意事项-1" class="headerlink" title="7. 安全注意事项"></a><a href="https://tools.ietf.org/html/rfc7541#section-7" target="_blank" rel="external">7. 安全注意事项</a></h1><p>本节介绍与HPACK有关可能发生安全问题的潜在区域：</p>
<ul>
<li>使用压缩作为基于长度的预示来验证关于压缩到共享的压缩上下文的机密的猜测。</li>
<li>由于解码器耗尽处理或存储能力而导致的拒绝服务。</li>
</ul>
<h2 id="7-1-探测动态表状态-1"><a href="#7-1-探测动态表状态-1" class="headerlink" title="7.1 探测动态表状态"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.1" target="_blank" rel="external">7.1 探测动态表状态</a></h2><p>HPACK通过利用诸如HTTP之类的协议中固有的冗余来减少头部字段编码的长度。最终的目标是减少发送HTTP请求或响应所需的数据量。</p>
<p>可以同时定义编码并传输的头部字段，且在它们被编码之后可以立即观察那些字段的长度的攻击者，可以探测到用于编码头部字段的上下文。当一个攻击者可以做到这两点，他们可以自适应地修改请求以确认关于动态表状态的猜测。如果猜测被压缩到更短的长度，攻击者可以观察编码长度并推断猜测是正确的。</p>
<p>即使是基于 传输层安全 (TLS) 协议 (参见 [<a href="https://tools.ietf.org/html/rfc7541#ref-TLS12" target="_blank" rel="external">TLS12</a>]这也是可能的，因为尽管TLS为内容提供了机密的保护，但只为内容的长度提供了有限数量的保护。</p>
<p><strong>注意：</strong>填充方案只提供了针对具有这些能力的攻击者的有限的保护，潜在地仅仅迫使增加猜测的数量来了解与给定猜测相关联的长度。填充方案也通过增加发送的比特数而直接对抗压缩。</p>
<p>类似 CRIME [<a href="https://tools.ietf.org/html/rfc7541#ref-CRIME" target="_blank" rel="external">CRIME</a>] 的攻击证明了这些一般攻击者能力的存在。特定攻击利用了 DEFLATE [<a href="https://tools.ietf.org/html/rfc7541#ref-DEFLATE" target="_blank" rel="external">DEFLATE</a>]  基于前缀匹配删除冗余的事实。这允许攻击者一次确认一个字符的猜测，将指数时间的攻击减少为线性时间的攻击。</p>
<h3 id="7-1-1-HPACK-和-HTTP的适用性-1"><a href="#7-1-1-HPACK-和-HTTP的适用性-1" class="headerlink" title="7.1.1 HPACK 和 HTTP的适用性"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.1.1" target="_blank" rel="external">7.1.1 HPACK 和 HTTP的适用性</a></h3><p>HPACK通过强制一个猜测匹配整个头部字段值而不是单独的字符，而缓解但没有完全消除基于模型 CRIME [<a href="https://http2.github.io/http2-spec/compression.html#CRIME" target="_blank" rel="external">CRIME</a>]的攻击。攻击者只能知道一个猜测是对的还是错的，因此他们被降低为粗略的猜测头部字段值。</p>
<p>然而恢复特定的头部字段值依赖于值的熵。结果是，具有高熵的值不可能成功地恢复，低熵的值仍然脆弱。</p>
<p>这种属性的攻击在两个互不信任的实体控制放在单独的HTTP/2连接上的请求或响应的任何时候都是可能的。如果共享的HPACK压缩器允许一个实体向动态表中添加条目另一个访问那些条目，则表的状态可以被获取。</p>
<p>具有来自相互不信任实体的请求或响应的情况发生在中间方：在单个连接上向原始服务器发送来自于多个客户端的请求，或者从多个源服务器获得响应并将它们放置在朝向客户端的共享连接上。</p>
<p>Web浏览器还需要假设由不同的web源 [<a href="https://tools.ietf.org/html/rfc7541#ref-ORIGIN" target="_blank" rel="external">ORIGIN</a>] 在同一连接上发出的请求由相互不可信的实体创建。</p>
<h3 id="7-1-2-减轻"><a href="#7-1-2-减轻" class="headerlink" title="7.1.2 减轻"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.1.2" target="_blank" rel="external">7.1.2 减轻</a></h3><p>需要对头部字段保密的HTTP用户可以使用具有足以使猜测不可行的熵的值。然而，作为一般解决方案这是不切实际的，因为它迫使所有的HTTP用户采取措施以减轻攻击。它将在如何使用HTTP方面引入新的限制。它将对如何使用HTTP施加新的约束。</p>
<p>不是对HTTP的用户施加约束，HPACK的实现可以通过限制应用压缩的顺序来限制潜在的对动态表的探测。</p>
<p>不是对HTTP的用户施加约束，HPACK的实现可以替代地限制如何应用压缩以便限制动态表探测的可能性。</p>
<p>理想的方案是基于构建头部字段的实体隔离对动态表的访问。添加到表里的头部字段值归属于实体，只有创建了特定值的实体可以提取那个值。</p>
<p>要提升这个选项的压缩性能，某些条目可以被标记为public。比如，浏览器可以使所有的请求都能访问Accept-Encoding头部字段的值。</p>
<p>不知道头部字段的来源的编码器可以替代地对具有许多不同值的头部字段引入惩罚机制，以此大量地尝试猜测头部字段值，使得在未来的消息中，头部字段不再与动态表的条目比较，从而有效地避免进一步的猜测。</p>
<p><strong>注意：</strong>简单地移除对应于来自动态表的头部字段的条目可能是无效的，如果攻击者具有可靠的使值被重新安装的方法的话。例如，在网络浏览器中加载图像的请求通常包括Cookie头部字段 (对于这种攻击而言潜在地高价值目标)，并且网站可以简单地强制加载图像，从而刷新动态表。</p>
<p>该响应可以与头部字段值的长度成反比。将头部字段标记为不再使用动态表可以对于更短的值更快地或以比更长的值更高的概率发生。</p>
<h3 id="7-1-3-从不索引的字面量-1"><a href="#7-1-3-从不索引的字面量-1" class="headerlink" title="7.1.3 从不索引的字面量"></a><a href="https://tools.ietf.org/html/rfc7541#section-7.1.3" target="_blank" rel="external">7.1.3 从不索引的字面量</a></h3><p>实现也可以通过选择不压缩敏感头部字段而以字面值编码来保护它们。</p>
<p>拒绝为头部字段产生索引的表示只有在所有跳段上都避免压缩时才有效。从不索引字面量(参见<a href="https://tools.ietf.org/html/rfc7541#section-6.2.3" target="_blank" rel="external">第6.2.3节</a>)可被用于通知中介，一个特定的值有意以字面的形式发送。</p>
<p>中介 <strong>一定不能(MUST NOT)</strong> 以将索引面量表示的另一种表示重编码使用从不索引字面量表示的值。如果HPACK被用于重编码，则 <strong>必须(MUST)</strong> 使用从不索引字面量表示。</p>
<p>选择为头部字段使用从不索引字面量表示依赖于几个因素。由于HPACK不保护对完整的头部字段值的猜测，短的或低熵的值更容易被对手恢复。因而编码器可以选择不索引低熵的值</p>
<p>编码器也可以选择不索引被认为具有很高价值或敏感的头部字段值，比如Cookie或Authorization头部字段。</p>
<p>相反地，编码器可以优先索引那些如果暴露，价值比较小或无价值的头部字段。比如，在发送给任何服务器的请求间通常不变的User-Agent头部字段。在这种情况下，确认使用了一个特定的User-Agent值提供很低的价值。</p>
<p>注意，决定使用从不索引字面量表示的这些标准将随着时间流逝，新的攻击被发现而发展。</p>
<h2 id="7-2-静态Huffman编码-1"><a href="#7-2-静态Huffman编码-1" class="headerlink" title="7.2 静态Huffman编码"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.7.2" target="_blank" rel="external">7.2 静态Huffman编码</a></h2><p>目前还没有已知的针对静态Huffman编码的攻击。一项研究显示使用静态Huffman编码表造成了信息泄漏；然而，相同的研究得出结论攻击者无法利用这些信息泄漏来恢复任何有意义数量的信息 (见 <a href="https://http2.github.io/http2-spec/compression.html#PETAL" target="_blank" rel="external">[PETAL]</a>)。</p>
<h2 id="7-3-内存消耗-1"><a href="#7-3-内存消耗-1" class="headerlink" title="7.3 内存消耗"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.7.3" target="_blank" rel="external">7.3 内存消耗</a></h2><p>攻击者可能尝试导致一个终端耗尽它的内存。HPACK旨在限制端点分配的内存的峰值和状态量</p>
<p>编码器使用的内存量由使用HPACK的协议通过定义动态表的最大大小来限制。在HTTP/2中，这个值由解码器通过设置参数 SETTINGS_HEADER_TABLE_SIZE (见 <a href="https://http2.github.io/http2-spec/compression.html#HTTP2" target="_blank" rel="external">[HTTP2]</a> 的 <a href="https://tools.ietf.org/html/rfc7540#section-6.5.2" target="_blank" rel="external">Section 6.5.2</a>) 控制。这个限制考虑了存储在动态表中的数据的大小，加一个小的开销的宽限两者。</p>
<p>解码器可以通过为动态表的最大大小设置一个适当的值来限制内存使用的状态数量。在HTTP/2中，这是通过为SETTINGS_HEADER_TABLE_SIZE参数设置一个适当的值来实现的。编码器可以通过发信号通知一个比解码器允许的更小的动态表大小来限制内存使用的状态数量 (见 <a href="https://http2.github.io/http2-spec/compression.html#encoding.context.update" target="_blank" rel="external">Section 6.3</a>)。</p>
<p>编码器或解码器临时内存的消耗数量可以通过顺序地处理头部字段来限制。实现不需要保留完整的头部字段的列表。注意，然而，应用程序可能由于其它原因而需要保留完整的头部列表；即使HPACK不强制这种情况发生，应用程序约束可能使这是必要的。</p>
<h2 id="7-4-实现的限制-1"><a href="#7-4-实现的限制-1" class="headerlink" title="7.4 实现的限制"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.7.4" target="_blank" rel="external">7.4 实现的限制</a></h2><p>HPACK的实现需要确保整数的大值，整数的长编码，或长的字符串字面量不会创造安全弱点。</p>
<p>实现不得不为它接收的整数值，及编码的长度设置一个限制(见 <a href="https://http2.github.io/http2-spec/compression.html#integer.representation" target="_blank" rel="external">Section 5.1</a>)。以同样的方式，它不得不为它接收的字符串字面量(见 <a href="https://http2.github.io/http2-spec/compression.html#string.literal.representation" target="_blank" rel="external">Section 5.2</a> )的长度设置一个限制。</p>
<h1 id="8-参考文献-1"><a href="#8-参考文献-1" class="headerlink" title="8. 参考文献"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.8" target="_blank" rel="external">8. 参考文献</a></h1><h2 id="8-1-规范性参考文献-1"><a href="#8-1-规范性参考文献-1" class="headerlink" title="8.1 规范性参考文献"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.8.1" target="_blank" rel="external">8.1 规范性参考文献</a></h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">**[HTTP2]**     Belshe, M., Peon, R., and M. Thomson, Ed., “[Hypertext Transfer Protocol Version <span class="number">2</span> </div><div class="line">                (HTTP<span class="regexp">/2)](https:/</span><span class="regexp">/tools.ietf.org/</span>html<span class="regexp">/rfc7540)”, RFC 7540, [DOI 10.17487/</span>RFC7540](<span class="string">http:</span><span class="comment">//dx.doi.org/10.17487/RFC7540), May 2015, &lt;[http://www.rfc-</span></div><div class="line">                editor.org<span class="regexp">/info/</span>rfc7540](<span class="string">http:</span><span class="comment">//www.rfc-editor.org/info/rfc7540)&gt;.</span></div><div class="line"></div><div class="line">**[RFC2119]**   Bradner, S., “[Key words <span class="keyword">for</span> use <span class="keyword">in</span> RFCs to Indicate Requirement Levels](<span class="string">https:</span><span class="comment">//tools.ietf.org/html/rfc2119)”, BCP 14, </span></div><div class="line">                RFC <span class="number">2119</span>, [DOI <span class="number">10.17487</span><span class="regexp">/RFC2119](http:/</span><span class="regexp">/dx.doi.org/</span><span class="number">10.17487</span><span class="regexp">/RFC2119), March 1997, &lt;[http:/</span>/www.rfc-</div><div class="line">                editor.org<span class="regexp">/info/</span>rfc2119](<span class="string">http:</span><span class="comment">//www.rfc-editor.org/info/rfc2119)&gt;.</span></div><div class="line"></div><div class="line">**[RFC7230]**   Fielding, R., Ed. and J. Reschke, Ed., “[Hypertext Transfer Protocol (HTTP/<span class="number">1.1</span>): </div><div class="line">                Message Syntax and Routing](<span class="string">https:</span><span class="comment">//tools.ietf.org/html/rfc7230)”, RFC 7230, [DOI 10.17487/RFC7230](http://dx.doi.org/10.17487/RFC7230), June 2014, </span></div><div class="line">                &lt;[<span class="string">http:</span><span class="comment">//www.rfc-editor.org/info/rfc7230](http://www.rfc-editor.org/info/rfc7230)&gt;.</span></div></pre></td></tr></table></figure>
<h2 id="8-2-参考资料-1"><a href="#8-2-参考资料-1" class="headerlink" title="8.2 参考资料"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.8.2" target="_blank" rel="external">8.2 参考资料</a></h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="strong">**[CANONICAL]**</span>  Schwartz, E. and B. Kallick, “[<span class="string">Generating a canonical prefix encoding</span>](<span class="link">https://dl.acm.org/citation.cfm?id=363991</span>)”, </div><div class="line"><span class="code">                 Communications of the ACM, Volume 7 Issue 3, pp. 166-169, March 1964, </span></div><div class="line"><span class="code">                 &lt;[https://dl.acm.org/citation.cfm?id=363991](https://dl.acm.org/citation.cfm?id=363991)&gt;.</span></div><div class="line"></div><div class="line"><span class="strong">**[CRIME]**</span>      Wikipedia, “[CRIME](http://en.wikipedia.org/w/index.php?</div><div class="line"><span class="code">                 title=CRIME&amp;oldid=660948120)”, May 2015, &lt;[http://en.wikipedia.org/w/index.php?title=CRIME&amp;oldid=660948120](http://en.wikipedia.org/w/index.php?title=CRIME&amp;oldid=660948120)&gt;.</span></div><div class="line"></div><div class="line"><span class="strong">**[DEFLATE]**</span>    Deutsch, P., “[<span class="string">DEFLATE Compressed Data Format Specification version 1.3</span>](<span class="link">https://tools.ietf.org/html/rfc1951</span>)”, </div><div class="line"><span class="code">                 RFC 1951, [DOI 10.17487/RFC1951](http://dx.doi.org/10.17487/RFC1951), May 1996, &lt;[http://www.rfc-</span></div><div class="line"><span class="code">                 editor.org/info/rfc1951](http://www.rfc-editor.org/info/rfc1951)&gt;.</span></div><div class="line"></div><div class="line"><span class="strong">**[HUFFMAN]**</span>    Huffman, D., “[<span class="string">A Method for the Construction of Minimum-Redundancy Codes</span>](<span class="link">http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119</span>)”, </div><div class="line"><span class="code">                 Proceedings of the Institute of Radio Engineers, Volume 40, Number 9, pp. 1098-</span></div><div class="line"><span class="code">                 1101, September 1952, &lt;[http://ieeexplore.ieee.org/xpl/articleDetails.jsp?</span></div><div class="line"><span class="code">                 arnumber=4051119](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119)&gt;.</span></div><div class="line"></div><div class="line"><span class="strong">**[ORIGIN]**</span>     Barth, A., “[<span class="string">The Web Origin Concept</span>](<span class="link">https://tools.ietf.org/html/rfc6454</span>)”, RFC 6454, [<span class="string">DOI 10.17487/RFC6454</span>](<span class="link">http://dx.doi.org/10.17487/RFC6454</span>), </div><div class="line"><span class="code">                 December 2011, &lt;[http://www.rfc-editor.org/info/rfc6454](http://www.rfc-editor.org/info/rfc6454)&gt;.</span></div><div class="line"></div><div class="line"><span class="strong">**[PETAL]**</span>      Tan, J. and J. Nahata, “[<span class="string">PETAL: Preset Encoding Table Information Leakage</span>](<span class="link">http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf</span>)”, </div><div class="line"><span class="code">                 April 2013, &lt;[http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf](http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf)&gt;.</span></div><div class="line"></div><div class="line"><span class="strong">**[SPDY]**</span>       Belshe, M. and R. Peon, “[<span class="string">SPDY Protocol</span>](<span class="link">https://tools.ietf.org/html/draft-mbelshe-httpbis-spdy-00</span>)”, Internet-Draft draft-mbelshe-httpbis-</div><div class="line"><span class="code">                 spdy-00 (work in progress), February 2012.</span></div><div class="line"></div><div class="line"><span class="strong">**[TLS12]**</span>      Dierks, T. and E. Rescorla, “[The Transport Layer Security (TLS) Protocol Version </div><div class="line"><span class="code">                 1.2](https://tools.ietf.org/html/rfc5246)”, RFC 5246, [DOI 10.17487/RFC5246](http://dx.doi.org/10.17487/RFC5246), August 2008, &lt;[http://www.rfc-</span></div><div class="line"><span class="code">                 editor.org/info/rfc5246](http://www.rfc-editor.org/info/rfc5246)&gt;.</span></div></pre></td></tr></table></figure>
<h1 id="A-静态表定义"><a href="#A-静态表定义" class="headerlink" title="A. 静态表定义"></a><a href="https://http2.github.io/http2-spec/compression.html#static.table.definition" target="_blank" rel="external">A. 静态表定义</a></h1><p>静态表 (参见 <a href="https://http2.github.io/http2-spec/compression.html#static.table" target="_blank" rel="external">Section 2.3.1</a>) 由一个预定义的且不可改变的头部字段列表组成。</p>
<p>静态表从流行的web站点最常使用的头部字段创建，还包含了HTTP/2特有的伪头部字段 (参见 <a href="https://http2.github.io/http2-spec/compression.html#HTTP2" target="_blank" rel="external">[HTTP2]
</a> 的 <a href="https://tools.ietf.org/html/rfc7540#section-8.1.2.1" target="_blank" rel="external">Section 8.1.2.1</a>)。对于有多个常用值的头部字段，将为这些常用值的每个都添加一个条目。对于其它的头部字段，将为其添加一个值为空的条目。</p>
<p><a href="https://http2.github.io/http2-spec/compression.html#static.table.entries" target="_blank" rel="external">Table 1</a> 列出了组成静态表的预定义的头部字段，并给出了每个条目的索引。</p>
<table>
<thead>
<tr>
<th>Index</th>
<th>Header Name</th>
<th>Header Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>:authority</code></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td><code>:method</code></td>
<td>GET</td>
</tr>
<tr>
<td>3</td>
<td><code>:method</code></td>
<td>POST</td>
</tr>
<tr>
<td>4</td>
<td><code>:path</code></td>
<td>/</td>
</tr>
<tr>
<td>5</td>
<td><code>:path</code></td>
<td>/index.html</td>
</tr>
<tr>
<td>6</td>
<td><code>:scheme</code></td>
<td>http</td>
</tr>
<tr>
<td>7</td>
<td><code>:scheme</code></td>
<td>https</td>
</tr>
<tr>
<td>8</td>
<td><code>:status</code></td>
<td>200</td>
</tr>
<tr>
<td>9</td>
<td><code>:status</code></td>
<td>204</td>
</tr>
<tr>
<td>10</td>
<td><code>:status</code></td>
<td>206</td>
</tr>
<tr>
<td>11</td>
<td><code>:status</code></td>
<td>304</td>
</tr>
<tr>
<td>12</td>
<td><code>:status</code></td>
<td>400</td>
</tr>
<tr>
<td>13</td>
<td><code>:status</code></td>
<td>404</td>
</tr>
<tr>
<td>14</td>
<td><code>:status</code></td>
<td>500</td>
</tr>
<tr>
<td>15</td>
<td>accept-charset</td>
<td></td>
</tr>
<tr>
<td>16</td>
<td>accept-encoding</td>
<td>gzip, deflate</td>
</tr>
<tr>
<td>17</td>
<td>accept-language</td>
<td></td>
</tr>
<tr>
<td>18</td>
<td>accept-ranges</td>
<td></td>
</tr>
<tr>
<td>19</td>
<td>accept</td>
<td></td>
</tr>
<tr>
<td>20</td>
<td>access-control-allow-origin</td>
<td></td>
</tr>
<tr>
<td>21</td>
<td>age</td>
<td></td>
</tr>
<tr>
<td>22</td>
<td>allow</td>
<td></td>
</tr>
<tr>
<td>23</td>
<td>authorization</td>
<td></td>
</tr>
<tr>
<td>24</td>
<td>cache-control</td>
<td></td>
</tr>
<tr>
<td>25</td>
<td>content-disposition</td>
<td></td>
</tr>
<tr>
<td>26</td>
<td>content-encoding</td>
<td></td>
</tr>
<tr>
<td>27</td>
<td>content-language</td>
<td></td>
</tr>
<tr>
<td>28</td>
<td>content-length</td>
<td></td>
</tr>
<tr>
<td>29</td>
<td>content-location</td>
<td></td>
</tr>
<tr>
<td>30</td>
<td>content-range</td>
<td></td>
</tr>
<tr>
<td>31</td>
<td>content-type</td>
<td></td>
</tr>
<tr>
<td>32</td>
<td>cookie</td>
<td></td>
</tr>
<tr>
<td>33</td>
<td>date</td>
<td></td>
</tr>
<tr>
<td>34</td>
<td>etag</td>
<td></td>
</tr>
<tr>
<td>35</td>
<td>expect</td>
<td></td>
</tr>
<tr>
<td>36</td>
<td>expires</td>
<td></td>
</tr>
<tr>
<td>37</td>
<td>from</td>
<td></td>
</tr>
<tr>
<td>38</td>
<td>host</td>
<td></td>
</tr>
<tr>
<td>39</td>
<td>if-match</td>
<td></td>
</tr>
<tr>
<td>40</td>
<td>if-modified-since</td>
<td></td>
</tr>
<tr>
<td>41</td>
<td>if-none-match</td>
<td></td>
</tr>
<tr>
<td>42</td>
<td>if-range</td>
<td></td>
</tr>
<tr>
<td>43</td>
<td>if-unmodified-since</td>
<td></td>
</tr>
<tr>
<td>44</td>
<td>last-modified</td>
<td></td>
</tr>
<tr>
<td>45</td>
<td>link</td>
<td></td>
</tr>
<tr>
<td>46</td>
<td>location</td>
<td></td>
</tr>
<tr>
<td>47</td>
<td>max-forwards</td>
<td></td>
</tr>
<tr>
<td>48</td>
<td>proxy-authenticate</td>
<td></td>
</tr>
<tr>
<td>49</td>
<td>proxy-authorization</td>
<td></td>
</tr>
<tr>
<td>50</td>
<td>range</td>
<td></td>
</tr>
<tr>
<td>51</td>
<td>referer</td>
<td></td>
</tr>
<tr>
<td>52</td>
<td>refresh</td>
<td></td>
</tr>
<tr>
<td>53</td>
<td>retry-after</td>
<td></td>
</tr>
<tr>
<td>54</td>
<td>server</td>
<td></td>
</tr>
<tr>
<td>55</td>
<td>set-cookie</td>
<td></td>
</tr>
<tr>
<td>56</td>
<td>strict-transport-security</td>
<td></td>
</tr>
<tr>
<td>57</td>
<td>transfer-encoding</td>
<td></td>
</tr>
<tr>
<td>58</td>
<td>user-agent</td>
<td></td>
</tr>
<tr>
<td>59</td>
<td>vary</td>
<td></td>
</tr>
<tr>
<td>60</td>
<td>via</td>
<td></td>
</tr>
<tr>
<td>61</td>
<td>www-authenticate</td>
</tr>
</tbody>
</table>
<p>Table 1: 静态表条目</p>
<h1 id="B-Huffman码"><a href="#B-Huffman码" class="headerlink" title="B. Huffman码"></a><a href="https://http2.github.io/http2-spec/compression.html#huffman.code" target="_blank" rel="external">B. Huffman码</a></h1><p>当使用Huffman编码对字符串字面量进行编码时，使用了以下Huffman码（<a href="https://http2.github.io/http2-spec/compression.html#string.literal.representation" target="_blank" rel="external">见第5.2节</a>）。</p>
<p>这里的Huffman码是从基于大量的HTTP头部采样获取的统计而产生的。它是一个包含了一些调整以确保没有符号具有唯一的代码长度的规范Huffman码 (见 <a href="https://http2.github.io/http2-spec/compression.html#CANONICAL" target="_blank" rel="external">[CANONICAL]
</a> )。</p>
<p>表中的每一行定义了用于表示一个符号的代码：</p>
<p><strong>sym:</strong> 要表示的符号。它是一个字节的十进制值，可能在其ASCII表示前面。一个特别的符号， “EOS”，被用于指示一个字符传字面量的结束。</p>
<p><strong>code as bits:</strong> 二进制整数表示的符号的Huffman码，在最高有效位 (MSB) 对齐。</p>
<p><strong>code as hex:</strong> 符号的Huffman码，以16进制整数表示，在最低有效位对齐。</p>
<p><strong>len:</strong> 表示符号的码的位数。</p>
<p>比如，符号 47 (对应于ASCII字符”/“) 的代码由 6 位”0”，”1”，”1”，”0”，”0”，”0”组成。这对应于用6位编码的值 0x18 (以十六进制)。</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div></pre></td><td class="code"><pre><div class="line">                                                     code</div><div class="line">                       code as bits                 as hex   len</div><div class="line">     sym              aligned to MSB                aligned   in</div><div class="line">                                                    to LSB   bits</div><div class="line">    (  0)  |<span class="string">11111111</span>|<span class="string">11000                             1ff8  [13]</span></div><div class="line">    (  1)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011000                7fffd8  [23]</span></div><div class="line">    (  2)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">0010         fffffe2  [28]</span></div><div class="line">    (  3)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">0011         fffffe3  [28]</span></div><div class="line">    (  4)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">0100         fffffe4  [28]</span></div><div class="line">    (  5)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">0101         fffffe5  [28]</span></div><div class="line">    (  6)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">0110         fffffe6  [28]</span></div><div class="line">    (  7)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">0111         fffffe7  [28]</span></div><div class="line">    (  8)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1000         fffffe8  [28]</span></div><div class="line">    (  9)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11101010               ffffea  [24]</span></div><div class="line">    ( 10)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">111100      3ffffffc  [30]</span></div><div class="line">    ( 11)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1001         fffffe9  [28]</span></div><div class="line">    ( 12)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1010         fffffea  [28]</span></div><div class="line">    ( 13)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">111101      3ffffffd  [30]</span></div><div class="line">    ( 14)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1011         fffffeb  [28]</span></div><div class="line">    ( 15)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1100         fffffec  [28]</span></div><div class="line">    ( 16)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1101         fffffed  [28]</span></div><div class="line">    ( 17)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1110         fffffee  [28]</span></div><div class="line">    ( 18)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1111         fffffef  [28]</span></div><div class="line">    ( 19)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">0000         ffffff0  [28]</span></div><div class="line">    ( 20)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">0001         ffffff1  [28]</span></div><div class="line">    ( 21)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">0010         ffffff2  [28]</span></div><div class="line">    ( 22)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">111110      3ffffffe  [30]</span></div><div class="line">    ( 23)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">0011         ffffff3  [28]</span></div><div class="line">    ( 24)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">0100         ffffff4  [28]</span></div><div class="line">    ( 25)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">0101         ffffff5  [28]</span></div><div class="line">    ( 26)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">0110         ffffff6  [28]</span></div><div class="line">    ( 27)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">0111         ffffff7  [28]</span></div><div class="line">    ( 28)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1000         ffffff8  [28]</span></div><div class="line">    ( 29)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1001         ffffff9  [28]</span></div><div class="line">    ( 30)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1010         ffffffa  [28]</span></div><div class="line">    ( 31)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011         ffffffb  [28]</span></div><div class="line">' ' ( 32)  |<span class="string">010100                                       14  [ 6]</span></div><div class="line">'!' ( 33)  |<span class="string">11111110</span>|<span class="string">00                                 3f8  [10]</span></div><div class="line">'"' ( 34)  |<span class="string">11111110</span>|<span class="string">01                                 3f9  [10]</span></div><div class="line">'#' ( 35)  |<span class="string">11111111</span>|<span class="string">1010                               ffa  [12]</span></div><div class="line">'$' ( 36)  |<span class="string">11111111</span>|<span class="string">11001                             1ff9  [13]</span></div><div class="line">'%' ( 37)  |<span class="string">010101                                       15  [ 6]</span></div><div class="line">'&amp;' ( 38)  |<span class="string">11111000                                     f8  [ 8]</span></div><div class="line">''' ( 39)  |<span class="string">11111111</span>|<span class="string">010                                7fa  [11]</span></div><div class="line">'(' ( 40)  |<span class="string">11111110</span>|<span class="string">10                                 3fa  [10]</span></div><div class="line">')' ( 41)  |<span class="string">11111110</span>|<span class="string">11                                 3fb  [10]</span></div><div class="line">'*' ( 42)  |<span class="string">11111001                                     f9  [ 8]</span></div><div class="line">'+' ( 43)  |<span class="string">11111111</span>|<span class="string">011                                7fb  [11]</span></div><div class="line">',' ( 44)  |<span class="string">11111010                                     fa  [ 8]</span></div><div class="line">'-' ( 45)  |<span class="string">010110                                       16  [ 6]</span></div><div class="line">'.' ( 46)  |<span class="string">010111                                       17  [ 6]</span></div><div class="line">'/' ( 47)  |<span class="string">011000                                       18  [ 6]</span></div><div class="line">'0' ( 48)  |<span class="string">00000                                         0  [ 5]</span></div><div class="line">'1' ( 49)  |<span class="string">00001                                         1  [ 5]</span></div><div class="line">'2' ( 50)  |<span class="string">00010                                         2  [ 5]</span></div><div class="line">'3' ( 51)  |<span class="string">011001                                       19  [ 6]</span></div><div class="line">'4' ( 52)  |<span class="string">011010                                       1a  [ 6]</span></div><div class="line">'5' ( 53)  |<span class="string">011011                                       1b  [ 6]</span></div><div class="line">'6' ( 54)  |<span class="string">011100                                       1c  [ 6]</span></div><div class="line">'7' ( 55)  |<span class="string">011101                                       1d  [ 6]</span></div><div class="line">'8' ( 56)  |<span class="string">011110                                       1e  [ 6]</span></div><div class="line">'9' ( 57)  |<span class="string">011111                                       1f  [ 6]</span></div><div class="line">':' ( 58)  |<span class="string">1011100                                      5c  [ 7]</span></div><div class="line">';' ( 59)  |<span class="string">11111011                                     fb  [ 8]</span></div><div class="line">'&lt;' ( 60)  |<span class="string">11111111</span>|<span class="string">1111100                           7ffc  [15]</span></div><div class="line">'=' ( 61)  |<span class="string">100000                                       20  [ 6]</span></div><div class="line">'&gt;' ( 62)  |<span class="string">11111111</span>|<span class="string">1011                               ffb  [12]</span></div><div class="line">'?' ( 63)  |<span class="string">11111111</span>|<span class="string">00                                 3fc  [10]</span></div><div class="line">'@' ( 64)  |<span class="string">11111111</span>|<span class="string">11010                             1ffa  [13]</span></div><div class="line">'A' ( 65)  |<span class="string">100001                                       21  [ 6]</span></div><div class="line">'B' ( 66)  |<span class="string">1011101                                      5d  [ 7]</span></div><div class="line">'C' ( 67)  |<span class="string">1011110                                      5e  [ 7]</span></div><div class="line">'D' ( 68)  |<span class="string">1011111                                      5f  [ 7]</span></div><div class="line">'E' ( 69)  |<span class="string">1100000                                      60  [ 7]</span></div><div class="line">'F' ( 70)  |<span class="string">1100001                                      61  [ 7]</span></div><div class="line">'G' ( 71)  |<span class="string">1100010                                      62  [ 7]</span></div><div class="line">'H' ( 72)  |<span class="string">1100011                                      63  [ 7]</span></div><div class="line">'I' ( 73)  |<span class="string">1100100                                      64  [ 7]</span></div><div class="line">'J' ( 74)  |<span class="string">1100101                                      65  [ 7]</span></div><div class="line">'K' ( 75)  |<span class="string">1100110                                      66  [ 7]</span></div><div class="line">'L' ( 76)  |<span class="string">1100111                                      67  [ 7]</span></div><div class="line">'M' ( 77)  |<span class="string">1101000                                      68  [ 7]</span></div><div class="line">'N' ( 78)  |<span class="string">1101001                                      69  [ 7]</span></div><div class="line">'O' ( 79)  |<span class="string">1101010                                      6a  [ 7]</span></div><div class="line">'P' ( 80)  |<span class="string">1101011                                      6b  [ 7]</span></div><div class="line">'Q' ( 81)  |<span class="string">1101100                                      6c  [ 7]</span></div><div class="line">'R' ( 82)  |<span class="string">1101101                                      6d  [ 7]</span></div><div class="line">'S' ( 83)  |<span class="string">1101110                                      6e  [ 7]</span></div><div class="line">'T' ( 84)  |<span class="string">1101111                                      6f  [ 7]</span></div><div class="line">'U' ( 85)  |<span class="string">1110000                                      70  [ 7]</span></div><div class="line">'V' ( 86)  |<span class="string">1110001                                      71  [ 7]</span></div><div class="line">'W' ( 87)  |<span class="string">1110010                                      72  [ 7]</span></div><div class="line">'X' ( 88)  |<span class="string">11111100                                     fc  [ 8]</span></div><div class="line">'Y' ( 89)  |<span class="string">1110011                                      73  [ 7]</span></div><div class="line">'Z' ( 90)  |<span class="string">11111101                                     fd  [ 8]</span></div><div class="line">'[' ( 91)  |<span class="string">11111111</span>|<span class="string">11011                             1ffb  [13]</span></div><div class="line">'\' ( 92)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">000                     7fff0  [19]</span></div><div class="line">']' ( 93)  |<span class="string">11111111</span>|<span class="string">11100                             1ffc  [13]</span></div><div class="line">'^' ( 94)  |<span class="string">11111111</span>|<span class="string">111100                            3ffc  [14]</span></div><div class="line">'_' ( 95)  |<span class="string">100010                                       22  [ 6]</span></div><div class="line">'`' ( 96)  |<span class="string">11111111</span>|<span class="string">1111101                           7ffd  [15]</span></div><div class="line">'a' ( 97)  |<span class="string">00011                                         3  [ 5]</span></div><div class="line">'b' ( 98)  |<span class="string">100011                                       23  [ 6]</span></div><div class="line">'c' ( 99)  |<span class="string">00100                                         4  [ 5]</span></div><div class="line">'d' (100)  |<span class="string">100100                                       24  [ 6]</span></div><div class="line">'e' (101)  |<span class="string">00101                                         5  [ 5]</span></div><div class="line">'f' (102)  |<span class="string">100101                                       25  [ 6]</span></div><div class="line">'g' (103)  |<span class="string">100110                                       26  [ 6]</span></div><div class="line">'h' (104)  |<span class="string">100111                                       27  [ 6]</span></div><div class="line">'i' (105)  |<span class="string">00110                                         6  [ 5]</span></div><div class="line">'j' (106)  |<span class="string">1110100                                      74  [ 7]</span></div><div class="line">'k' (107)  |<span class="string">1110101                                      75  [ 7]</span></div><div class="line">'l' (108)  |<span class="string">101000                                       28  [ 6]</span></div><div class="line">'m' (109)  |<span class="string">101001                                       29  [ 6]</span></div><div class="line">'n' (110)  |<span class="string">101010                                       2a  [ 6]</span></div><div class="line">'o' (111)  |<span class="string">00111                                         7  [ 5]</span></div><div class="line">'p' (112)  |<span class="string">101011                                       2b  [ 6]</span></div><div class="line">'q' (113)  |<span class="string">1110110                                      76  [ 7]</span></div><div class="line">'r' (114)  |<span class="string">101100                                       2c  [ 6]</span></div><div class="line">'s' (115)  |<span class="string">01000                                         8  [ 5]</span></div><div class="line">'t' (116)  |<span class="string">01001                                         9  [ 5]</span></div><div class="line">'u' (117)  |<span class="string">101101                                       2d  [ 6]</span></div><div class="line">'v' (118)  |<span class="string">1110111                                      77  [ 7]</span></div><div class="line">'w' (119)  |<span class="string">1111000                                      78  [ 7]</span></div><div class="line">'x' (120)  |<span class="string">1111001                                      79  [ 7]</span></div><div class="line">'y' (121)  |<span class="string">1111010                                      7a  [ 7]</span></div><div class="line">'z' (122)  |<span class="string">1111011                                      7b  [ 7]</span></div><div class="line">'&#123;' (123)  |<span class="string">11111111</span>|<span class="string">1111110                           7ffe  [15]</span></div><div class="line">'|<span class="string">' (124)  </span>|<span class="string">11111111</span>|<span class="string">100                                7fc  [11]</span></div><div class="line">'&#125;' (125)  |<span class="string">11111111</span>|<span class="string">111101                            3ffd  [14]</span></div><div class="line">'~' (126)  |<span class="string">11111111</span>|<span class="string">11101                             1ffd  [13]</span></div><div class="line">    (127)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100         ffffffc  [28]</span></div><div class="line">    (128)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">0110                    fffe6  [20]</span></div><div class="line">    (129)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">010010                 3fffd2  [22]</span></div><div class="line">    (130)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">0111                    fffe7  [20]</span></div><div class="line">    (131)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1000                    fffe8  [20]</span></div><div class="line">    (132)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">010011                 3fffd3  [22]</span></div><div class="line">    (133)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">010100                 3fffd4  [22]</span></div><div class="line">    (134)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">010101                 3fffd5  [22]</span></div><div class="line">    (135)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011001                7fffd9  [23]</span></div><div class="line">    (136)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">010110                 3fffd6  [22]</span></div><div class="line">    (137)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011010                7fffda  [23]</span></div><div class="line">    (138)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011011                7fffdb  [23]</span></div><div class="line">    (139)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011100                7fffdc  [23]</span></div><div class="line">    (140)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011101                7fffdd  [23]</span></div><div class="line">    (141)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011110                7fffde  [23]</span></div><div class="line">    (142)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11101011               ffffeb  [24]</span></div><div class="line">    (143)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1011111                7fffdf  [23]</span></div><div class="line">    (144)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11101100               ffffec  [24]</span></div><div class="line">    (145)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11101101               ffffed  [24]</span></div><div class="line">    (146)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">010111                 3fffd7  [22]</span></div><div class="line">    (147)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100000                7fffe0  [23]</span></div><div class="line">    (148)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11101110               ffffee  [24]</span></div><div class="line">    (149)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100001                7fffe1  [23]</span></div><div class="line">    (150)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100010                7fffe2  [23]</span></div><div class="line">    (151)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100011                7fffe3  [23]</span></div><div class="line">    (152)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100100                7fffe4  [23]</span></div><div class="line">    (153)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">11100                  1fffdc  [21]</span></div><div class="line">    (154)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">011000                 3fffd8  [22]</span></div><div class="line">    (155)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100101                7fffe5  [23]</span></div><div class="line">    (156)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">011001                 3fffd9  [22]</span></div><div class="line">    (157)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100110                7fffe6  [23]</span></div><div class="line">    (158)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1100111                7fffe7  [23]</span></div><div class="line">    (159)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11101111               ffffef  [24]</span></div><div class="line">    (160)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">011010                 3fffda  [22]</span></div><div class="line">    (161)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">11101                  1fffdd  [21]</span></div><div class="line">    (162)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1001                    fffe9  [20]</span></div><div class="line">    (163)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">011011                 3fffdb  [22]</span></div><div class="line">    (164)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">011100                 3fffdc  [22]</span></div><div class="line">    (165)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101000                7fffe8  [23]</span></div><div class="line">    (166)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101001                7fffe9  [23]</span></div><div class="line">    (167)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">11110                  1fffde  [21]</span></div><div class="line">    (168)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101010                7fffea  [23]</span></div><div class="line">    (169)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">011101                 3fffdd  [22]</span></div><div class="line">    (170)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">011110                 3fffde  [22]</span></div><div class="line">    (171)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110000               fffff0  [24]</span></div><div class="line">    (172)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">11111                  1fffdf  [21]</span></div><div class="line">    (173)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">011111                 3fffdf  [22]</span></div><div class="line">    (174)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101011                7fffeb  [23]</span></div><div class="line">    (175)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101100                7fffec  [23]</span></div><div class="line">    (176)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">00000                  1fffe0  [21]</span></div><div class="line">    (177)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">00001                  1fffe1  [21]</span></div><div class="line">    (178)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">100000                 3fffe0  [22]</span></div><div class="line">    (179)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">00010                  1fffe2  [21]</span></div><div class="line">    (180)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101101                7fffed  [23]</span></div><div class="line">    (181)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">100001                 3fffe1  [22]</span></div><div class="line">    (182)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101110                7fffee  [23]</span></div><div class="line">    (183)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101111                7fffef  [23]</span></div><div class="line">    (184)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1010                    fffea  [20]</span></div><div class="line">    (185)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">100010                 3fffe2  [22]</span></div><div class="line">    (186)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">100011                 3fffe3  [22]</span></div><div class="line">    (187)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">100100                 3fffe4  [22]</span></div><div class="line">    (188)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1110000                7ffff0  [23]</span></div><div class="line">    (189)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">100101                 3fffe5  [22]</span></div><div class="line">    (190)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">100110                 3fffe6  [22]</span></div><div class="line">    (191)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1110001                7ffff1  [23]</span></div><div class="line">    (192)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111000</span>|<span class="string">00           3ffffe0  [26]</span></div><div class="line">    (193)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111000</span>|<span class="string">01           3ffffe1  [26]</span></div><div class="line">    (194)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1011                    fffeb  [20]</span></div><div class="line">    (195)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">001                     7fff1  [19]</span></div><div class="line">    (196)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">100111                 3fffe7  [22]</span></div><div class="line">    (197)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1110010                7ffff2  [23]</span></div><div class="line">    (198)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">101000                 3fffe8  [22]</span></div><div class="line">    (199)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110110</span>|<span class="string">0            1ffffec  [25]</span></div><div class="line">    (200)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111000</span>|<span class="string">10           3ffffe2  [26]</span></div><div class="line">    (201)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111000</span>|<span class="string">11           3ffffe3  [26]</span></div><div class="line">    (202)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111001</span>|<span class="string">00           3ffffe4  [26]</span></div><div class="line">    (203)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111011</span>|<span class="string">110          7ffffde  [27]</span></div><div class="line">    (204)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111011</span>|<span class="string">111          7ffffdf  [27]</span></div><div class="line">    (205)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111001</span>|<span class="string">01           3ffffe5  [26]</span></div><div class="line">    (206)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110001               fffff1  [24]</span></div><div class="line">    (207)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110110</span>|<span class="string">1            1ffffed  [25]</span></div><div class="line">    (208)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">010                     7fff2  [19]</span></div><div class="line">    (209)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">00011                  1fffe3  [21]</span></div><div class="line">    (210)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111001</span>|<span class="string">10           3ffffe6  [26]</span></div><div class="line">    (211)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111100</span>|<span class="string">000          7ffffe0  [27]</span></div><div class="line">    (212)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111100</span>|<span class="string">001          7ffffe1  [27]</span></div><div class="line">    (213)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111001</span>|<span class="string">11           3ffffe7  [26]</span></div><div class="line">    (214)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111100</span>|<span class="string">010          7ffffe2  [27]</span></div><div class="line">    (215)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110010               fffff2  [24]</span></div><div class="line">    (216)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">00100                  1fffe4  [21]</span></div><div class="line">    (217)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">00101                  1fffe5  [21]</span></div><div class="line">    (218)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111010</span>|<span class="string">00           3ffffe8  [26]</span></div><div class="line">    (219)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111010</span>|<span class="string">01           3ffffe9  [26]</span></div><div class="line">    (220)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1101         ffffffd  [28]</span></div><div class="line">    (221)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111100</span>|<span class="string">011          7ffffe3  [27]</span></div><div class="line">    (222)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111100</span>|<span class="string">100          7ffffe4  [27]</span></div><div class="line">    (223)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111100</span>|<span class="string">101          7ffffe5  [27]</span></div><div class="line">    (224)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1100                    fffec  [20]</span></div><div class="line">    (225)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110011               fffff3  [24]</span></div><div class="line">    (226)  |<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">1101                    fffed  [20]</span></div><div class="line">    (227)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">00110                  1fffe6  [21]</span></div><div class="line">    (228)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">101001                 3fffe9  [22]</span></div><div class="line">    (229)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">00111                  1fffe7  [21]</span></div><div class="line">    (230)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">01000                  1fffe8  [21]</span></div><div class="line">    (231)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1110011                7ffff3  [23]</span></div><div class="line">    (232)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">101010                 3fffea  [22]</span></div><div class="line">    (233)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">101011                 3fffeb  [22]</span></div><div class="line">    (234)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110111</span>|<span class="string">0            1ffffee  [25]</span></div><div class="line">    (235)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110111</span>|<span class="string">1            1ffffef  [25]</span></div><div class="line">    (236)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110100               fffff4  [24]</span></div><div class="line">    (237)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11110101               fffff5  [24]</span></div><div class="line">    (238)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111010</span>|<span class="string">10           3ffffea  [26]</span></div><div class="line">    (239)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1110100                7ffff4  [23]</span></div><div class="line">    (240)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111010</span>|<span class="string">11           3ffffeb  [26]</span></div><div class="line">    (241)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111100</span>|<span class="string">110          7ffffe6  [27]</span></div><div class="line">    (242)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111011</span>|<span class="string">00           3ffffec  [26]</span></div><div class="line">    (243)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111011</span>|<span class="string">01           3ffffed  [26]</span></div><div class="line">    (244)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111100</span>|<span class="string">111          7ffffe7  [27]</span></div><div class="line">    (245)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111101</span>|<span class="string">000          7ffffe8  [27]</span></div><div class="line">    (246)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111101</span>|<span class="string">001          7ffffe9  [27]</span></div><div class="line">    (247)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111101</span>|<span class="string">010          7ffffea  [27]</span></div><div class="line">    (248)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111101</span>|<span class="string">011          7ffffeb  [27]</span></div><div class="line">    (249)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">1110         ffffffe  [28]</span></div><div class="line">    (250)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111101</span>|<span class="string">100          7ffffec  [27]</span></div><div class="line">    (251)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111101</span>|<span class="string">101          7ffffed  [27]</span></div><div class="line">    (252)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111101</span>|<span class="string">110          7ffffee  [27]</span></div><div class="line">    (253)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111101</span>|<span class="string">111          7ffffef  [27]</span></div><div class="line">    (254)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111110</span>|<span class="string">000          7fffff0  [27]</span></div><div class="line">    (255)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111011</span>|<span class="string">10           3ffffee  [26]</span></div><div class="line">EOS (256)  |<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">11111111</span>|<span class="string">111111      3fffffff  [30]</span></div></pre></td></tr></table></figure>
<h1 id="C-示例"><a href="#C-示例" class="headerlink" title="C. 示例"></a><a href="https://http2.github.io/http2-spec/compression.html#examples" target="_blank" rel="external">C. 示例</a></h1><p>本附录包含了一些例子，覆盖了整数编码，头部字段表示，及请求和响应的整个头部字段列表的编码，使用或未使用Huffman编码的情况。</p>
<h2 id="C-1-整数表示示例-1"><a href="#C-1-整数表示示例-1" class="headerlink" title="C.1 整数表示示例"></a><a href="https://http2.github.io/http2-spec/compression.html#integer.representation.examples" target="_blank" rel="external">C.1 整数表示示例</a></h2><p>这一节展示整数值表示的细节 (见 <a href="https://http2.github.io/http2-spec/compression.html#integer.representation" target="_blank" rel="external">Section 5.1</a>)。</p>
<h3 id="C-1-1-示例-1：使用5位前缀编码10-1"><a href="#C-1-1-示例-1：使用5位前缀编码10-1" class="headerlink" title="C.1.1 示例 1：使用5位前缀编码10"></a><a href="https://http2.github.io/http2-spec/compression.html#integer.representation.example1" target="_blank" rel="external">C.1.1 示例 1：使用5位前缀编码10</a></h3><p>使用5位前缀编码10。</p>
<ul>
<li>10小于31 (2^5 - 1)，使用5位前缀表示。</li>
</ul>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| X | X | X | 0 | 1 | 0 | 1 | 0 |   10 stored on 5 bits</span></div><div class="line">+---+---+---+---+---+---+---+---+</div></pre></td></tr></table></figure>
<h3 id="C-1-2-示例-2：使用5位前缀编码1337-1"><a href="#C-1-2-示例-2：使用5位前缀编码1337-1" class="headerlink" title="C.1.2 示例 2：使用5位前缀编码1337"></a><a href="https://http2.github.io/http2-spec/compression.html#integer.representation.example2" target="_blank" rel="external">C.1.2 示例 2：使用5位前缀编码1337</a></h3><p>使用5位前缀编码值I=1337。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">1337</span>大于<span class="number">31</span> (<span class="number">2</span>^<span class="number">5</span> - <span class="number">1</span>)。</div><div class="line">       <span class="number">5</span>位前缀用它的最大值 (<span class="number">31</span>) 填充。</div><div class="line">I = <span class="number">1337</span> - (<span class="number">25</span> - <span class="number">1</span>) = <span class="number">1306.</span></div><div class="line">       I (<span class="number">1306</span>) 大于等于<span class="number">128</span>，因而while循环体执行：</div><div class="line">              I % <span class="number">128</span> == <span class="number">26</span></div><div class="line">              <span class="number">26</span> + <span class="number">128</span> == <span class="number">154</span></div><div class="line">              <span class="number">154</span> 用<span class="number">8</span>位编码为：<span class="number">10011010</span></div><div class="line">              I 被设置为 <span class="number">10</span> (<span class="number">1306</span> / <span class="number">128</span> == <span class="number">10</span>)</div><div class="line">              I 不再大于等于<span class="number">128</span>,因而while循环终止。</div><div class="line">       I, 现在是 <span class="number">10</span>, 被编码为<span class="number">8</span>位值：<span class="number">00001010.</span></div><div class="line">过程结束</div></pre></td></tr></table></figure>
<h3 id="C-1-3-示例-3-以字节边界为起始编码42"><a href="#C-1-3-示例-3-以字节边界为起始编码42" class="headerlink" title="C.1.3 示例 3: 以字节边界为起始编码42"></a><a href="https://http2.github.io/http2-spec/compression.html#integer.representation.example3" target="_blank" rel="external">C.1.3 示例 3: 以字节边界为起始编码42</a></h3><p>以字节边界为起始编码值42。这暗示将使用一个8位前缀。</p>
<ul>
<li>42 小于 255 (2^8 - 1)，使用8位前缀表示.</li>
</ul>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="section">  0   1   2   3   4   5   6   7</span></div><div class="line">+---+---+---+---+---+---+---+---+</div><div class="line"><span class="section">| 0 | 0 | 1 | 0 | 1 | 0 | 1 | 0 |   42 stored on 8 bits</span></div><div class="line">+---+---+---+---+---+---+---+---+</div></pre></td></tr></table></figure>
<h2 id="C-2-头部字段表示示例-1"><a href="#C-2-头部字段表示示例-1" class="headerlink" title="C.2 头部字段表示示例"></a><a href="https://http2.github.io/http2-spec/compression.html#header.field.representation.examples" target="_blank" rel="external">C.2 头部字段表示示例</a></h2><p>本节显示了几个独立的表示的例子。</p>
<h3 id="C-2-1-有索引的字面量头部字段-1"><a href="#C-2-1-有索引的字面量头部字段-1" class="headerlink" title="C.2.1 有索引的字面量头部字段"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.2.1" target="_blank" rel="external">C.2.1 有索引的字面量头部字段</a></h3><p>头部字段表示使用一个字面量名字和一个字面量值。头部字段被添加进动态表。</p>
<p>要编码的头部列表：</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">custom</span>-<span class="keyword">key</span>: <span class="keyword">custom</span>-header</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">400</span>a <span class="number">6375</span> <span class="number">7374</span> <span class="number">6</span>f6d <span class="number">2</span>d6b <span class="number">6579</span> <span class="number">0</span>d63 <span class="number">7573</span> | @.custom-<span class="type">key</span>.cus</div><div class="line"><span class="number">746</span>f <span class="number">6</span>d2d <span class="number">6865</span> <span class="number">6164</span> <span class="number">6572</span>                | tom-header</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">40</span>                                      <span class="string">| == Literal indexed ==</span></div><div class="line"><span class="number">0</span>a                                      <span class="string">|   Literal name (len = 10)</span></div><div class="line"><span class="number">6375</span> <span class="number">7374</span> <span class="number">6</span>f6d <span class="number">2</span>d6b <span class="number">6579</span>                <span class="string">| custom-key</span></div><div class="line"><span class="number">0</span>d                                      <span class="string">|   Literal value (len = 13)</span></div><div class="line"><span class="number">6375</span> <span class="number">7374</span> <span class="number">6</span>f6d <span class="number">2</span>d68 <span class="number">6561</span> <span class="number">6465</span> <span class="number">72</span>        <span class="string">| custom-header</span></div><div class="line">                                        <span class="string">| -&gt; custom-key:</span></div><div class="line">                                        <span class="string">|   custom-header</span></div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[  <span class="number">1</span>] (s =  <span class="number">55</span>) custom-<span class="built_in">key</span>: custom-header</div><div class="line">      <span class="keyword">Table</span> <span class="built_in">size</span>:  <span class="number">55</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">custom</span>-<span class="keyword">key</span>: <span class="keyword">custom</span>-header</div></pre></td></tr></table></figure>
<h3 id="C-2-2-无索引的字面量头部字段-1"><a href="#C-2-2-无索引的字面量头部字段-1" class="headerlink" title="C.2.2 无索引的字面量头部字段"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.2.2" target="_blank" rel="external">C.2.2 无索引的字面量头部字段</a></h3><p>头部字段表示使用一个索引的名字和一个字面量值。头部字段不加进动态表。</p>
<p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:path:</span> /sample/path</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">040</span>c <span class="number">2</span>f73 <span class="number">616</span>d <span class="number">706</span>c <span class="number">652</span>f <span class="number">7061</span> <span class="number">7468</span>      | ../sample/path</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">04</span>                                      <span class="string">| == Literal not indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 4)</span></div><div class="line">                                        <span class="string">|     :path</span></div><div class="line"><span class="number">0</span>c                                      <span class="string">|   Literal value (len = 12)</span></div><div class="line"><span class="number">2</span>f73 <span class="number">616</span>d <span class="number">706</span>c <span class="number">652</span>f <span class="number">7061</span> <span class="number">7468</span>           <span class="string">| /sample/path</span></div><div class="line">                                        <span class="string">| -&gt; :path: /sample/path</span></div></pre></td></tr></table></figure>
<p>动态表（解码后）：空的</p>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:path:</span> /sample/path</div></pre></td></tr></table></figure>
<h3 id="C-2-3-从不索引的字面量头部字段-1"><a href="#C-2-3-从不索引的字面量头部字段-1" class="headerlink" title="C.2.3 从不索引的字面量头部字段"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.2.3" target="_blank" rel="external">C.2.3 从不索引的字面量头部字段</a></h3><p>头部字段表示使用一个字面量名字和一个字面量值。头部字段不加进动态表，而且如果由一个中介重编码的话必须使用相同的表示。</p>
<p>要编码的头部列表：</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">password:</span> secre</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">1008 </span><span class="number">7061</span> <span class="number">7373</span> <span class="number">776</span>f <span class="number">7264</span> <span class="number">0673</span> <span class="number">6563</span> <span class="number">7265</span> | ..password.secre</div><div class="line"><span class="symbol">74 </span>                                     | t</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">10</span>                                      <span class="string">| == Literal never indexed ==</span></div><div class="line"><span class="number">08</span>                                      <span class="string">|   Literal name (len = 8)</span></div><div class="line"><span class="number">7061</span> <span class="number">7373</span> <span class="number">776</span>f <span class="number">7264</span>                     <span class="string">| password</span></div><div class="line"><span class="number">06</span>                                      <span class="string">|   Literal value (len = 6)</span></div><div class="line"><span class="number">7365</span> <span class="number">6372</span> <span class="number">6574</span>                          <span class="string">| secret</span></div><div class="line">                                        <span class="string">| -&gt; password: secret</span></div></pre></td></tr></table></figure>
<p>动态表（解码后）：空的</p>
<p>解码后的头部列表：</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">password:</span> secret</div></pre></td></tr></table></figure>
<h3 id="C-2-4-索引的头部字段-1"><a href="#C-2-4-索引的头部字段-1" class="headerlink" title="C.2.4 索引的头部字段"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.2.4" target="_blank" rel="external">C.2.4 索引的头部字段</a></h3><p>头部字段表示使用静态表中一个索引的头部字段。</p>
<p>要编码的头部列表：</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">:<span class="function"><span class="keyword">method</span>:</span> GET</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">82 </span>                                     | .</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">82</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">2</span></div><div class="line">                                        | <span class="type">-&gt; :method</span>: GET</div></pre></td></tr></table></figure>
<p>动态表（解码后）：空的</p>
<p>解码后的头部列表：</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">:<span class="function"><span class="keyword">method</span>:</span> GET</div></pre></td></tr></table></figure>
<h2 id="C-3-没有Huffman编码的请求的例子"><a href="#C-3-没有Huffman编码的请求的例子" class="headerlink" title="C.3 没有Huffman编码的请求的例子"></a><a href="https://http2.github.io/http2-spec/compression.html#request.examples.without.huffman.coding" target="_blank" rel="external">C.3 没有Huffman编码的请求的例子</a></h2><p>这一节展示了相同连接上对应于HTTP请求的多个连续的头部列表。</p>
<h3 id="C-3-1-第一个请求-1"><a href="#C-3-1-第一个请求-1" class="headerlink" title="C.3.1 第一个请求"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.3.1" target="_blank" rel="external">C.3.1 第一个请求</a></h3><p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> http</div><div class="line"><span class="meta">:path:</span> /</div><div class="line"><span class="meta">:authority:</span> www.example.com</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">8286 </span><span class="number">8441</span> <span class="number">0</span>f77 <span class="number">7777</span> <span class="number">2e65</span> <span class="number">7861</span> <span class="number">6d70</span> <span class="number">6</span>c65 | ...A.www.example</div><div class="line"><span class="number">2e63</span> <span class="number">6</span>f6d                               | .<span class="keyword">com</span></div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="number">82</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">2</span></div><div class="line">                                        | <span class="type">-&gt; :method</span>: GET</div><div class="line"><span class="number">86</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">6</span></div><div class="line">                                        | <span class="type">-&gt; :scheme</span>: http</div><div class="line"><span class="number">84</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">4</span></div><div class="line">                                        | <span class="type">-&gt; :path</span>: /</div><div class="line"><span class="number">41</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">1</span>)</div><div class="line">                                        |     <span class="type">:authority</span></div><div class="line"><span class="number">0</span>f                                      |   <span class="type">Literal</span> value (len = <span class="number">15</span>)</div><div class="line"><span class="number">7777</span> <span class="number">772</span>e <span class="number">6578</span> <span class="number">616</span>d <span class="number">706</span>c <span class="number">652</span>e <span class="number">636</span>f <span class="number">6</span>d   | <span class="type">www</span>.example.com</div><div class="line">                                        | <span class="type">-&gt; :authority</span>: </div><div class="line">                                        |   <span class="type">www</span>.example.com</div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">57</span>) <span class="selector-pseudo">:authority</span>: <span class="selector-tag">www</span><span class="selector-class">.example</span><span class="selector-class">.com</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>:  <span class="selector-tag">57</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> http</div><div class="line"><span class="meta">:path:</span> /</div><div class="line"><span class="meta">:authority:</span> www.example.com</div></pre></td></tr></table></figure>
<h3 id="C-3-2-第二个请求-1"><a href="#C-3-2-第二个请求-1" class="headerlink" title="C.3.2 第二个请求"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.3.2" target="_blank" rel="external">C.3.2 第二个请求</a></h3><p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> http</div><div class="line"><span class="meta">:path:</span> /</div><div class="line"><span class="meta">:authority:</span> www.example.com</div><div class="line">cache-control: no-cache</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">8286 </span><span class="number">84</span>be <span class="number">5808</span> <span class="number">6e6</span>f <span class="number">2d63</span> <span class="number">6163</span> <span class="number">6865</span>      | ....X.no-cache</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="number">82</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">2</span></div><div class="line">                                        | <span class="type">-&gt; :method</span>: GET</div><div class="line"><span class="number">86</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">6</span></div><div class="line">                                        | <span class="type">-&gt; :scheme</span>: http</div><div class="line"><span class="number">84</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">4</span></div><div class="line">                                        | <span class="type">-&gt; :path</span>: /</div><div class="line">be                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">62</span></div><div class="line">                                        | <span class="type">-&gt; :authority</span>:</div><div class="line">                                        |   <span class="type">www</span>.example.com</div><div class="line"><span class="number">58</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">24</span>)</div><div class="line">                                        |     <span class="type">cache</span>-control</div><div class="line"><span class="number">08</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">8</span>)</div><div class="line"><span class="number">6e6</span>f <span class="number">2</span>d63 <span class="number">6163</span> <span class="number">6865</span>                     | <span class="type">no</span>-cache</div><div class="line">                                        | <span class="type">-&gt; cache</span>-control: no-cache</div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">53</span>) <span class="selector-tag">cache-control</span>: <span class="selector-tag">no-cache</span></div><div class="line"><span class="selector-attr">[  2]</span> (s =  <span class="number">57</span>) <span class="selector-pseudo">:authority</span>: <span class="selector-tag">www</span><span class="selector-class">.example</span><span class="selector-class">.com</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>: <span class="selector-tag">110</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> http</div><div class="line"><span class="meta">:path:</span> /</div><div class="line"><span class="meta">:authority:</span> www.example.com</div><div class="line">cache-control: no-cache</div></pre></td></tr></table></figure>
<h3 id="C-3-3-第三个请求-1"><a href="#C-3-3-第三个请求-1" class="headerlink" title="C.3.3 第三个请求"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.3.3" target="_blank" rel="external">C.3.3 第三个请求</a></h3><p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> https</div><div class="line"><span class="meta">:path:</span> /index.html</div><div class="line"><span class="meta">:authority:</span> www.example.com</div><div class="line">custom-key: custom-value</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">8287</span> <span class="number">85</span>bf <span class="number">400</span>a <span class="number">6375</span> <span class="number">7374</span> <span class="number">6</span>f6d <span class="number">2</span>d6b <span class="number">6579</span> | ....@.custom-<span class="type">key</span></div><div class="line"><span class="number">0</span>c63 <span class="number">7573</span> <span class="number">746</span>f <span class="number">6</span>d2d <span class="number">7661</span> <span class="number">6</span>c75 <span class="number">65</span>        | .custom-value</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="number">82</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">2</span></div><div class="line">                                        | <span class="type">-&gt; :method</span>: GET</div><div class="line"><span class="number">87</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">7</span></div><div class="line">                                        | <span class="type">-&gt; :scheme</span>: https</div><div class="line"><span class="number">85</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">5</span></div><div class="line">                                        | <span class="type">-&gt; :path</span>: /index.html</div><div class="line">bf                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">63</span></div><div class="line">                                        | <span class="type">-&gt; :authority</span>:</div><div class="line">                                        |   <span class="type">www</span>.example.com</div><div class="line"><span class="number">40</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line"><span class="number">0</span>a                                      |   <span class="type">Literal</span> name (len = <span class="number">10</span>)</div><div class="line"><span class="number">6375</span> <span class="number">7374</span> <span class="number">6</span>f6d <span class="number">2</span>d6b <span class="number">6579</span>                | <span class="type">custom</span>-key</div><div class="line"><span class="number">0</span>c                                      |   <span class="type">Literal</span> value (len = <span class="number">12</span>)</div><div class="line"><span class="number">6375</span> <span class="number">7374</span> <span class="number">6</span>f6d <span class="number">2</span>d76 <span class="number">616</span>c <span class="number">7565</span>           | <span class="type">custom</span>-value</div><div class="line">                                        | <span class="type">-&gt; custom</span>-key:</div><div class="line">                                        |   <span class="type">custom</span>-value</div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">54</span>) <span class="selector-tag">custom-key</span>: <span class="selector-tag">custom-value</span></div><div class="line"><span class="selector-attr">[  2]</span> (s =  <span class="number">53</span>) <span class="selector-tag">cache-control</span>: <span class="selector-tag">no-cache</span></div><div class="line"><span class="selector-attr">[  3]</span> (s =  <span class="number">57</span>) <span class="selector-pseudo">:authority</span>: <span class="selector-tag">www</span><span class="selector-class">.example</span><span class="selector-class">.com</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>: <span class="selector-tag">164</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> https</div><div class="line"><span class="meta">:path:</span> /index.html</div><div class="line"><span class="meta">:authority:</span> www.example.com</div><div class="line">custom-key: custom-value</div></pre></td></tr></table></figure>
<h2 id="C-4-Huffman编码的请求示例"><a href="#C-4-Huffman编码的请求示例" class="headerlink" title="C.4 Huffman编码的请求示例"></a><a href="https://http2.github.io/http2-spec/compression.html#request.examples.with.huffman.coding" target="_blank" rel="external">C.4 Huffman编码的请求示例</a></h2><p>这一节展示了与前一节相同的例子，但为字面值使用了Huffman编码。</p>
<h3 id="C-4-1-第一个请求-1"><a href="#C-4-1-第一个请求-1" class="headerlink" title="C.4.1 第一个请求"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.4.1" target="_blank" rel="external">C.4.1 第一个请求</a></h3><p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> http</div><div class="line"><span class="meta">:path:</span> /</div><div class="line"><span class="meta">:authority:</span> www.example.com</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">8286</span> <span class="number">8441</span> <span class="number">8</span>cf1 e3c2 e5f2 <span class="number">3</span>a6b a0ab <span class="number">90</span>f4 | <span class="params">...</span>A<span class="params">...</span><span class="params">...</span>:k<span class="params">...</span>.</div><div class="line">ff                                      | .</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="number">82</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">2</span></div><div class="line">                                        | <span class="type">-&gt; :method</span>: GET</div><div class="line"><span class="number">86</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">6</span></div><div class="line">                                        | <span class="type">-&gt; :scheme</span>: http</div><div class="line"><span class="number">84</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">4</span></div><div class="line">                                        | <span class="type">-&gt; :path</span>: /</div><div class="line"><span class="number">41</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">1</span>)</div><div class="line">                                        |     <span class="type">:authority</span></div><div class="line"><span class="number">8</span>c                                      |   <span class="type">Literal</span> value (len = <span class="number">12</span>)</div><div class="line">                                        |     <span class="type">Huffman</span> encoded:</div><div class="line">f1e3 c2e5 f23a <span class="number">6</span>ba0 ab90 f4ff           | <span class="type">.....:k</span>.....</div><div class="line">                                        |     <span class="type">Decoded</span>:</div><div class="line">                                        | <span class="type">www</span>.example.com</div><div class="line">                                        | <span class="type">-&gt; :authority</span>:</div><div class="line">                                        |   <span class="type">www</span>.example.com</div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">57</span>) <span class="selector-pseudo">:authority</span>: <span class="selector-tag">www</span><span class="selector-class">.example</span><span class="selector-class">.com</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>:  <span class="selector-tag">57</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> http</div><div class="line"><span class="meta">:path:</span> /</div><div class="line"><span class="meta">:authority:</span> www.example.com</div></pre></td></tr></table></figure>
<h3 id="C-4-2-第二个请求-1"><a href="#C-4-2-第二个请求-1" class="headerlink" title="C.4.2 第二个请求"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.4.2" target="_blank" rel="external">C.4.2 第二个请求</a></h3><p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> http</div><div class="line"><span class="meta">:path:</span> /</div><div class="line"><span class="meta">:authority:</span> www.example.com</div><div class="line">cache-control: no-cache</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">8286 </span><span class="number">84</span>be <span class="number">5886</span> a8eb <span class="number">1064</span> <span class="number">9</span>cbf           | ....X....d..</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="number">82</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">2</span></div><div class="line">                                        | <span class="type">-&gt; :method</span>: GET</div><div class="line"><span class="number">86</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">6</span></div><div class="line">                                        | <span class="type">-&gt; :scheme</span>: http</div><div class="line"><span class="number">84</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">4</span></div><div class="line">                                        | <span class="type">-&gt; :path</span>: /</div><div class="line">be                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">62</span></div><div class="line">                                        | <span class="type">-&gt; :authority</span>:</div><div class="line">                                        |   <span class="type">www</span>.example.com</div><div class="line"><span class="number">58</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">24</span>)</div><div class="line">                                        |     <span class="type">cache</span>-control</div><div class="line"><span class="number">86</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">6</span>)</div><div class="line">                                        |     <span class="type">Huffman</span> encoded:</div><div class="line">a8eb <span class="number">1064</span> <span class="number">9</span>cbf                          | <span class="type">...d</span>..</div><div class="line">                                        |     <span class="type">Decoded</span>:</div><div class="line">                                        | <span class="type">no</span>-cache</div><div class="line">                                        | <span class="type">-&gt; cache</span>-control: no-cache</div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">53</span>) <span class="selector-tag">cache-control</span>: <span class="selector-tag">no-cache</span></div><div class="line"><span class="selector-attr">[  2]</span> (s =  <span class="number">57</span>) <span class="selector-pseudo">:authority</span>: <span class="selector-tag">www</span><span class="selector-class">.example</span><span class="selector-class">.com</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>: <span class="selector-tag">110</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> http</div><div class="line"><span class="meta">:path:</span> /</div><div class="line"><span class="meta">:authority:</span> www.example.com</div><div class="line">cache-control: no-cache</div></pre></td></tr></table></figure>
<h3 id="C-4-3-第三个请求-1"><a href="#C-4-3-第三个请求-1" class="headerlink" title="C.4.3 第三个请求"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.4.3" target="_blank" rel="external">C.4.3 第三个请求</a></h3><p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> https</div><div class="line"><span class="meta">:path:</span> /index.html</div><div class="line"><span class="meta">:authority:</span> www.example.com</div><div class="line">custom-key: custom-value</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">8287</span> <span class="number">85</span>bf <span class="number">4088</span> <span class="number">25</span>a8 <span class="number">49e9</span> <span class="number">5</span>ba9 <span class="number">7</span>d7f <span class="number">8925</span> | ....@.%.I.[.&#125;..%</div><div class="line">a849 e95b b8e8 b4bf                     | .I.[....</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="number">82</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">2</span></div><div class="line">                                        | <span class="type">-&gt; :method</span>: GET</div><div class="line"><span class="number">87</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">7</span></div><div class="line">                                        | <span class="type">-&gt; :scheme</span>: https</div><div class="line"><span class="number">85</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">5</span></div><div class="line">                                        | <span class="type">-&gt; :path</span>: /index.html</div><div class="line">bf                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">63</span></div><div class="line">                                        | <span class="type">-&gt; :authority</span>:</div><div class="line">                                        |   <span class="type">www</span>.example.com</div><div class="line"><span class="number">40</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line"><span class="number">88</span>                                      |   <span class="type">Literal</span> name (len = <span class="number">8</span>)</div><div class="line">                                        |     <span class="type">Huffman</span> encoded:</div><div class="line"><span class="number">25</span>a8 <span class="number">49e9</span> <span class="number">5</span>ba9 <span class="number">7</span>d7f                     | <span class="type">%.I</span>.[.&#125;.</div><div class="line">                                        |     <span class="type">Decoded</span>:</div><div class="line">                                        | <span class="type">custom</span>-key</div><div class="line"><span class="number">89</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">9</span>)</div><div class="line">                                        |     <span class="type">Huffman</span> encoded:</div><div class="line"><span class="number">25</span>a8 <span class="number">49e9</span> <span class="number">5</span>bb8 e8b4 bf                  | <span class="type">%.I</span>.[....</div><div class="line">                                        |     <span class="type">Decoded</span>:</div><div class="line">                                        | <span class="type">custom</span>-value</div><div class="line">                                        | <span class="type">-&gt; custom</span>-key:</div><div class="line">                                        |   <span class="type">custom</span>-value</div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">54</span>) <span class="selector-tag">custom-key</span>: <span class="selector-tag">custom-value</span></div><div class="line"><span class="selector-attr">[  2]</span> (s =  <span class="number">53</span>) <span class="selector-tag">cache-control</span>: <span class="selector-tag">no-cache</span></div><div class="line"><span class="selector-attr">[  3]</span> (s =  <span class="number">57</span>) <span class="selector-pseudo">:authority</span>: <span class="selector-tag">www</span><span class="selector-class">.example</span><span class="selector-class">.com</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>: <span class="selector-tag">164</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:method:</span> GET</div><div class="line"><span class="meta">:scheme:</span> https</div><div class="line"><span class="meta">:path:</span> /index.html</div><div class="line"><span class="meta">:authority:</span> www.example.com</div><div class="line">custom-key: custom-value</div></pre></td></tr></table></figure>
<h2 id="C-5-没有Huffman编码的响应示例"><a href="#C-5-没有Huffman编码的响应示例" class="headerlink" title="C.5 没有Huffman编码的响应示例"></a><a href="https://http2.github.io/http2-spec/compression.html#response.examples.without.huffman.coding" target="_blank" rel="external">C.5 没有Huffman编码的响应示例</a></h2><p>这一节展示了一些相同连接上连续的对应于HTTP响应的头部列表。HTTP/2 设置参数 SETTINGS_HEADER_TABLE_SIZE 被设置为了256字节的值，这使得某些 <strong>驱逐(eviction)</strong>  发生了。</p>
<p>This section shows several consecutive header lists, corresponding to HTTP responses, on the same connection. The HTTP/2 setting parameter SETTINGS_HEADER_TABLE_SIZE is set to the value of 256 octets, causing some evictions to occur.</p>
<h3 id="C-5-1-第一个响应-1"><a href="#C-5-1-第一个响应-1" class="headerlink" title="C.5.1 第一个响应"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.5.1" target="_blank" rel="external">C.5.1 第一个响应</a></h3><p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 302</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:21 GMT</div><div class="line">location: https://www.example.com</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">4803 </span><span class="number">3330</span> <span class="number">3258</span> <span class="number">0770</span> <span class="number">7269</span> <span class="number">7661</span> <span class="number">7465</span> <span class="number">611d</span> | H.<span class="number">302</span>X.privatea.</div><div class="line"><span class="number">4d6</span>f <span class="number">6e2</span>c <span class="number">2032</span> <span class="number">3120</span> <span class="number">4</span>f63 <span class="number">7420</span> <span class="number">3230</span> <span class="number">3133</span> | Mon, <span class="number">21</span> Oct <span class="number">2013</span></div><div class="line"><span class="symbol">2032 </span><span class="number">303</span>a <span class="number">3133</span> <span class="number">3</span>a32 <span class="number">3120</span> <span class="number">474d</span> <span class="number">546e</span> <span class="number">1768</span> |  <span class="number">20</span>:<span class="number">13</span>:<span class="number">21</span> GMTn.h</div><div class="line"><span class="symbol">7474 </span><span class="number">7073</span> <span class="number">3</span>a2f <span class="number">2</span>f77 <span class="number">7777</span> <span class="number">2e65</span> <span class="number">7861</span> <span class="number">6d70</span> | ttps://www.examp</div><div class="line"><span class="number">6</span>c65 <span class="number">2e63</span> <span class="number">6</span>f6d                          | le.<span class="keyword">com</span></div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="number">48</span>                                      <span class="string">| == Literal indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 8)</span></div><div class="line">                                        <span class="string">|     :status</span></div><div class="line"><span class="number">03</span>                                      <span class="string">|   Literal value (len = 3)</span></div><div class="line"><span class="number">3330</span> <span class="number">32</span>                                 <span class="string">| 302</span></div><div class="line">                                        <span class="string">| -&gt; :status: 302</span></div><div class="line"><span class="number">58</span>                                      <span class="string">| == Literal indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 24)</span></div><div class="line">                                        <span class="string">|     cache-control</span></div><div class="line"><span class="number">07</span>                                      <span class="string">|   Literal value (len = 7)</span></div><div class="line"><span class="number">7072</span> <span class="number">6976</span> <span class="number">6174</span> <span class="number">65</span>                       <span class="string">| private</span></div><div class="line">                                        <span class="string">| -&gt; cache-control: private</span></div><div class="line"><span class="number">61</span>                                      <span class="string">| == Literal indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 33)</span></div><div class="line">                                        <span class="string">|     date</span></div><div class="line"><span class="number">1</span>d                                      <span class="string">|   Literal value (len = 29)</span></div><div class="line"><span class="number">4</span>d6f <span class="number">6</span>e2c <span class="number">2032</span> <span class="number">3120</span> <span class="number">4</span>f63 <span class="number">7420</span> <span class="number">3230</span> <span class="number">3133</span> <span class="string">| Mon, 21 Oct 2013</span></div><div class="line"><span class="number">2032</span> <span class="number">303</span>a <span class="number">3133</span> <span class="number">3</span>a32 <span class="number">3120</span> <span class="number">474</span>d <span class="number">54</span>        <span class="string">|  20:13:21 GMT</span></div><div class="line">                                        <span class="string">| -&gt; date: Mon, 21 Oct 2013</span></div><div class="line">                                        <span class="string">|   20:13:21 GMT</span></div><div class="line"><span class="number">6</span>e                                      <span class="string">| == Literal indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 46)</span></div><div class="line">                                        <span class="string">|     location</span></div><div class="line"><span class="number">17</span>                                      <span class="string">|   Literal value (len = 23)</span></div><div class="line"><span class="number">6874</span> <span class="number">7470</span> <span class="number">733</span>a <span class="number">2</span>f2f <span class="number">7777</span> <span class="number">772</span>e <span class="number">6578</span> <span class="number">616</span>d <span class="string">| https://www.exam</span></div><div class="line"><span class="number">706</span>c <span class="number">652</span>e <span class="number">636</span>f <span class="number">6</span>d                       <span class="string">| ple.com</span></div><div class="line">                                        <span class="string">| -&gt; location:</span></div><div class="line">                                        <span class="string">|   https://www.example.com</span></div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">63</span>) <span class="selector-tag">location</span>: <span class="selector-tag">https</span>:<span class="comment">//www.example.com</span></div><div class="line"><span class="selector-attr">[  2]</span> (s =  <span class="number">65</span>) <span class="selector-tag">date</span>: <span class="selector-tag">Mon</span>, <span class="selector-tag">21</span> <span class="selector-tag">Oct</span> <span class="selector-tag">2013</span> <span class="selector-tag">20</span><span class="selector-pseudo">:13</span><span class="selector-pseudo">:21</span> <span class="selector-tag">GMT</span></div><div class="line"><span class="selector-attr">[  3]</span> (s =  <span class="number">52</span>) <span class="selector-tag">cache-control</span>: <span class="selector-tag">private</span></div><div class="line"><span class="selector-attr">[  4]</span> (s =  <span class="number">42</span>) <span class="selector-pseudo">:status</span>: <span class="selector-tag">302</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>: <span class="selector-tag">222</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 302</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:21 GMT</div><div class="line">location: https://www.example.com</div></pre></td></tr></table></figure>
<h3 id="C-5-2-第二个响应-1"><a href="#C-5-2-第二个响应-1" class="headerlink" title="C.5.2 第二个响应"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.5.2" target="_blank" rel="external">C.5.2 第二个响应</a></h3><p><code>(&quot;:status&quot;, &quot;302&quot;)</code> 头部字段被从动态表中驱逐以腾出空间而允许添加 <code>(&quot;:status&quot;, &quot;307&quot;)</code> 头部字段。</p>
<p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 307</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:21 GMT</div><div class="line">location: https://www.example.com</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">4803 </span><span class="number">3330</span> <span class="number">37</span>c1 c0bf                     | H.<span class="number">307...</span></div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="number">48</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">8</span>)</div><div class="line">                                        |     <span class="type">:status</span></div><div class="line"><span class="number">03</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">3</span>)</div><div class="line"><span class="number">3330</span> <span class="number">37</span>                                 | <span class="type">307</span></div><div class="line">                                        | <span class="type">- evict</span>: :status: <span class="number">302</span></div><div class="line">                                        | <span class="type">-&gt; :status</span>: <span class="number">307</span></div><div class="line">c1                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">65</span></div><div class="line">                                        | <span class="type">-&gt; cache</span>-control: private</div><div class="line">c0                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">64</span></div><div class="line">                                        | <span class="type">-&gt; date</span>: Mon, <span class="number">21</span> Oct <span class="number">2013</span></div><div class="line">                                        |   <span class="type">20</span>:<span class="number">13</span>:<span class="number">21</span> GMT</div><div class="line">bf                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">63</span></div><div class="line">                                        | <span class="type">-&gt; location</span>:</div><div class="line">                                        |   <span class="type">https</span>://www.example.com</div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">42</span>) <span class="selector-pseudo">:status</span>: <span class="selector-tag">307</span></div><div class="line"><span class="selector-attr">[  2]</span> (s =  <span class="number">63</span>) <span class="selector-tag">location</span>: <span class="selector-tag">https</span>:<span class="comment">//www.example.com</span></div><div class="line"><span class="selector-attr">[  3]</span> (s =  <span class="number">65</span>) <span class="selector-tag">date</span>: <span class="selector-tag">Mon</span>, <span class="selector-tag">21</span> <span class="selector-tag">Oct</span> <span class="selector-tag">2013</span> <span class="selector-tag">20</span><span class="selector-pseudo">:13</span><span class="selector-pseudo">:21</span> <span class="selector-tag">GMT</span></div><div class="line"><span class="selector-attr">[  4]</span> (s =  <span class="number">52</span>) <span class="selector-tag">cache-control</span>: <span class="selector-tag">private</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>: <span class="selector-tag">222</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 307</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:21 GMT</div><div class="line">location: https://www.example.com</div></pre></td></tr></table></figure>
<h3 id="C-5-3-第三个响应-1"><a href="#C-5-3-第三个响应-1" class="headerlink" title="C.5.3 第三个响应"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.5.3" target="_blank" rel="external">C.5.3 第三个响应</a></h3><p>一些头部字段在处理该头部列表期间被从动态表 <strong>驱逐(eviction)</strong> 了。</p>
<p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 200</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:22 GMT</div><div class="line">location: https://www.example.com</div><div class="line">content-encoding: gzip</div><div class="line">set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">88</span>c1 <span class="number">611d</span> <span class="number">4d6</span>f <span class="number">6e2</span>c <span class="number">2032</span> <span class="number">3120</span> <span class="number">4</span>f63 <span class="number">7420</span> | ..a.Mon, <span class="number">21</span> Oct</div><div class="line"><span class="symbol">3230 </span><span class="number">3133</span> <span class="number">2032</span> <span class="number">303</span>a <span class="number">3133</span> <span class="number">3</span>a32 <span class="number">3220</span> <span class="number">474d</span> | <span class="number">2013</span> <span class="number">20</span>:<span class="number">13</span>:<span class="number">22</span> GM</div><div class="line"><span class="number">54</span>c0 <span class="number">5</span>a04 <span class="number">677</span>a <span class="number">6970</span> <span class="number">7738</span> <span class="number">666</span>f <span class="number">6</span>f3d <span class="number">4153</span> | T.Z.gzipw8foo=AS</div><div class="line"><span class="number">444</span>a <span class="number">4</span>b48 <span class="number">514</span>b <span class="number">425</span>a <span class="number">584</span>f <span class="number">5157</span> <span class="number">454</span>f <span class="number">5049</span> | DJKHQKBZXOQWEOPI</div><div class="line"><span class="symbol">5541 </span><span class="number">5851</span> <span class="number">5745</span> <span class="number">4</span>f49 <span class="number">553</span>b <span class="number">206d</span> <span class="number">6178</span> <span class="number">2d61</span> | UAXQWEOIU; max-a</div><div class="line"><span class="symbol">6765 </span><span class="number">3d33</span> <span class="number">3630</span> <span class="number">303</span>b <span class="number">2076</span> <span class="number">6572</span> <span class="number">7369</span> <span class="number">6</span>f6e | ge=<span class="number">3600</span>; version</div><div class="line"><span class="number">3d31</span>                                    | =<span class="number">1</span></div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="number">88</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">8</span></div><div class="line">                                        | <span class="type">-&gt; :status</span>: <span class="number">200</span></div><div class="line">c1                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">65</span></div><div class="line">                                        | <span class="type">-&gt; cache</span>-control: private</div><div class="line"><span class="number">61</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">33</span>)</div><div class="line">                                        |     <span class="type">date</span></div><div class="line"><span class="number">1</span>d                                      |   <span class="type">Literal</span> value (len = <span class="number">29</span>)</div><div class="line"><span class="number">4</span>d6f <span class="number">6e2</span>c <span class="number">2032</span> <span class="number">3120</span> <span class="number">4</span>f63 <span class="number">7420</span> <span class="number">3230</span> <span class="number">3133</span> | <span class="type">Mon</span>, <span class="number">21</span> Oct <span class="number">2013</span></div><div class="line"><span class="number">2032</span> <span class="number">303</span>a <span class="number">3133</span> <span class="number">3</span>a32 <span class="number">3220</span> <span class="number">474</span>d <span class="number">54</span>        |  <span class="type">20</span>:<span class="number">13</span>:<span class="number">22</span> GMT</div><div class="line">                                        | <span class="type">- evict</span>: cache-control:</div><div class="line">                                        |   <span class="type">private</span></div><div class="line">                                        | <span class="type">-&gt; date</span>: Mon, <span class="number">21</span> Oct <span class="number">2013</span></div><div class="line">                                        |   <span class="type">20</span>:<span class="number">13</span>:<span class="number">22</span> GMT</div><div class="line">c0                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">64</span></div><div class="line">                                        | <span class="type">-&gt; location</span>: </div><div class="line">                                        |   <span class="type">https</span>://www.example.com</div><div class="line"><span class="number">5</span>a                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">26</span>)</div><div class="line">                                        |     <span class="type">content</span>-encoding</div><div class="line"><span class="number">04</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">4</span>)</div><div class="line"><span class="number">677</span>a <span class="number">6970</span>                               | <span class="type">gzip</span></div><div class="line">                                        | <span class="type">- evict</span>: date: Mon, <span class="number">21</span> Oct </div><div class="line">                                        |    <span class="type">2013</span> <span class="number">20</span>:<span class="number">13</span>:<span class="number">21</span> GMT</div><div class="line">                                        | <span class="type">-&gt; content</span>-encoding: gzip</div><div class="line"><span class="number">77</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">55</span>)</div><div class="line">                                        |     <span class="type">set</span>-cookie</div><div class="line"><span class="number">38</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">56</span>)</div><div class="line"><span class="number">666</span>f <span class="number">6</span>f3d <span class="number">4153</span> <span class="number">444</span>a <span class="number">4</span>b48 <span class="number">514</span>b <span class="number">425</span>a <span class="number">584</span>f | <span class="type">foo</span>=ASDJKHQKBZXO</div><div class="line"><span class="number">5157</span> <span class="number">454</span>f <span class="number">5049</span> <span class="number">5541</span> <span class="number">5851</span> <span class="number">5745</span> <span class="number">4</span>f49 <span class="number">553</span>b | <span class="type">QWEOPIUAXQWEOIU</span>;</div><div class="line"><span class="number">206</span>d <span class="number">6178</span> <span class="number">2</span>d61 <span class="number">6765</span> <span class="number">3</span>d33 <span class="number">3630</span> <span class="number">303</span>b <span class="number">2076</span> |  <span class="type">max</span>-age=<span class="number">3600</span>; v</div><div class="line"><span class="number">6572</span> <span class="number">7369</span> <span class="number">6</span>f6e <span class="number">3</span>d31                     | <span class="type">ersion</span>=<span class="number">1</span></div><div class="line">                                        | <span class="type">- evict</span>: location:</div><div class="line">                                        |   <span class="type">https</span>://www.example.com</div><div class="line">                                        | <span class="type">- evict</span>: :status: <span class="number">307</span></div><div class="line">                                        | <span class="type">-&gt; set</span>-cookie: foo=ASDJKHQ</div><div class="line">                                        |   <span class="type">KBZXOQWEOPIUAXQWEOIU</span>; ma</div><div class="line">                                        |   <span class="type">x</span>-age=<span class="number">3600</span>; version=<span class="number">1</span></div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[  1] (s =  <span class="string">98)</span> <span class="built_in">set-cookie:</span> <span class="string">foo=</span><span class="string">ASDJKHQKBZXOQWEOPIUAXQWEOIU;</span></div><div class="line">                 <span class="string">max-age=</span><span class="string">3600;</span> <span class="string">version=</span>1</div><div class="line">[  2] (s =  <span class="string">52)</span> <span class="string">content-encoding:</span> <span class="string">gzip</span></div><div class="line">[  3] (s =  <span class="string">65)</span> <span class="string">date:</span> <span class="string">Mon,</span> <span class="string">21 </span><span class="string">Oct </span><span class="string">2013 </span><span class="string">20:13:</span><span class="string">22 </span><span class="string">GMT</span></div><div class="line">      <span class="string">Table </span><span class="string">size:</span> <span class="string">215</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 200</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:22 GMT</div><div class="line">location: https://www.example.com</div><div class="line">content-encoding: gzip</div><div class="line">set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</div></pre></td></tr></table></figure>
<h2 id="C-6-Huffman编码的响应示例"><a href="#C-6-Huffman编码的响应示例" class="headerlink" title="C.6 Huffman编码的响应示例"></a><a href="https://http2.github.io/http2-spec/compression.html#response.examples.with.huffman.coding" target="_blank" rel="external">C.6 Huffman编码的响应示例</a></h2><p>这一节展示了如前一节相同的示例，但它对字面值使用了Huffman编码。HTTP/2 设置参数 SETTINGS_HEADER_TABLE_SIZE 被设置为了256字节的值，这使得某些 <strong>驱逐(eviction)</strong>  发生了。 <strong>驱逐(eviction)</strong> 机制使用了解码的字面值的长度，因此发生的 <strong>驱逐(eviction)</strong> 与前一节的相同。</p>
<h3 id="C-6-1-第一个响应-1"><a href="#C-6-1-第一个响应-1" class="headerlink" title="C.6.1 第一个响应"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.6.1" target="_blank" rel="external">C.6.1 第一个响应</a></h3><p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 302</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:21 GMT</div><div class="line">location: https://www.example.com</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">4882</span> <span class="number">6402</span> <span class="number">5885</span> aec3 <span class="number">771</span>a <span class="number">4</span>b61 <span class="number">96</span>d0 <span class="number">7</span>abe | H.d.X...w.Ka..z.</div><div class="line"><span class="number">9410</span> <span class="number">54</span>d4 <span class="number">44</span>a8 <span class="number">2005</span> <span class="number">9504</span> <span class="number">0</span>b81 <span class="number">66e0</span> <span class="number">82</span>a6 | ..T.D. .....f...</div><div class="line"><span class="number">2</span>d1b ff6e <span class="number">919</span>d <span class="number">29</span>ad <span class="number">1718</span> <span class="number">63</span>c7 <span class="number">8</span>f0b <span class="number">97</span>c8 | -..n..)...c.....</div><div class="line">e9ae <span class="number">82</span>ae <span class="number">43</span>d3                          | ....C.</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="number">48</span>                                      <span class="string">| == Literal indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 8)</span></div><div class="line">                                        <span class="string">|     :status</span></div><div class="line"><span class="number">82</span>                                      <span class="string">|   Literal value (len = 2)</span></div><div class="line">                                        <span class="string">|     Huffman encoded:</span></div><div class="line"><span class="number">6402</span>                                    <span class="string">| d.</span></div><div class="line">                                        <span class="string">|     Decoded:</span></div><div class="line">                                        <span class="string">| 302</span></div><div class="line">                                        <span class="string">| -&gt; :status: 302</span></div><div class="line"><span class="number">58</span>                                      <span class="string">| == Literal indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 24)</span></div><div class="line">                                        <span class="string">|     cache-control</span></div><div class="line"><span class="number">85</span>                                      <span class="string">|   Literal value (len = 5)</span></div><div class="line">                                        <span class="string">|     Huffman encoded:</span></div><div class="line">aec3 <span class="number">771</span>a <span class="number">4</span>b                            <span class="string">| ..w.K</span></div><div class="line">                                        <span class="string">|     Decoded:</span></div><div class="line">                                        <span class="string">| private</span></div><div class="line">                                        <span class="string">| -&gt; cache-control: private</span></div><div class="line"><span class="number">61</span>                                      <span class="string">| == Literal indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 33)</span></div><div class="line">                                        <span class="string">|     date</span></div><div class="line"><span class="number">96</span>                                      <span class="string">|   Literal value (len = 22)</span></div><div class="line">                                        <span class="string">|     Huffman encoded:</span></div><div class="line">d07a be94 <span class="number">1054</span> d444 a820 <span class="number">0595</span> <span class="number">040</span>b <span class="number">8166</span> <span class="string">| .z...T.D. .....f</span></div><div class="line">e082 a62d <span class="number">1</span>bff                          <span class="string">| ...-..</span></div><div class="line">                                        <span class="string">|     Decoded:</span></div><div class="line">                                        <span class="string">| Mon, 21 Oct 2013 20:13:21</span></div><div class="line">                                        <span class="string">| GMT</span></div><div class="line">                                        <span class="string">| -&gt; date: Mon, 21 Oct 2013</span></div><div class="line">                                        <span class="string">|   20:13:21 GMT</span></div><div class="line"><span class="number">6</span>e                                      <span class="string">| == Literal indexed ==</span></div><div class="line">                                        <span class="string">|   Indexed name (idx = 46)</span></div><div class="line">                                        <span class="string">|     location</span></div><div class="line"><span class="number">91</span>                                      <span class="string">|   Literal value (len = 17)</span></div><div class="line">                                        <span class="string">|     Huffman encoded:</span></div><div class="line"><span class="number">9</span>d29 ad17 <span class="number">1863</span> c78f <span class="number">0</span>b97 c8e9 ae82 ae43 <span class="string">| .)...c.........C</span></div><div class="line">d3                                      <span class="string">| .</span></div><div class="line">                                        <span class="string">|     Decoded:</span></div><div class="line">                                        <span class="string">| https://www.example.com</span></div><div class="line">                                        <span class="string">| -&gt; location:</span></div><div class="line">                                        <span class="string">|   https://www.example.com</span></div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">63</span>) <span class="selector-tag">location</span>: <span class="selector-tag">https</span>:<span class="comment">//www.example.com</span></div><div class="line"><span class="selector-attr">[  2]</span> (s =  <span class="number">65</span>) <span class="selector-tag">date</span>: <span class="selector-tag">Mon</span>, <span class="selector-tag">21</span> <span class="selector-tag">Oct</span> <span class="selector-tag">2013</span> <span class="selector-tag">20</span><span class="selector-pseudo">:13</span><span class="selector-pseudo">:21</span> <span class="selector-tag">GMT</span></div><div class="line"><span class="selector-attr">[  3]</span> (s =  <span class="number">52</span>) <span class="selector-tag">cache-control</span>: <span class="selector-tag">private</span></div><div class="line"><span class="selector-attr">[  4]</span> (s =  <span class="number">42</span>) <span class="selector-pseudo">:status</span>: <span class="selector-tag">302</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>: <span class="selector-tag">222</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 302</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:21 GMT</div><div class="line">location: https://www.example.com</div></pre></td></tr></table></figure>
<h3 id="C-6-2-第二个响应-1"><a href="#C-6-2-第二个响应-1" class="headerlink" title="C.6.2 第二个响应"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.6.2" target="_blank" rel="external">C.6.2 第二个响应</a></h3><p><code>(&quot;:status&quot;, &quot;302&quot;)</code> 头部字段被从动态表驱逐出来腾出空间以允许添加 <code>(&quot;:status&quot;, &quot;307&quot;)</code> 头部字段。</p>
<p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 307</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:21 GMT</div><div class="line">location: https://www.example.com</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">4883 </span><span class="number">640e</span> ffc1 c0bf                     | H.d.....</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="number">48</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">8</span>)</div><div class="line">                                        |     <span class="type">:status</span></div><div class="line"><span class="number">83</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">3</span>)</div><div class="line">                                        |     <span class="type">Huffman</span> encoded:</div><div class="line"><span class="number">640</span>e ff                                 | <span class="type">d</span>..</div><div class="line">                                        |     <span class="type">Decoded</span>:</div><div class="line">                                        | <span class="type">307</span></div><div class="line">                                        | <span class="type">- evict</span>: :status: <span class="number">302</span></div><div class="line">                                        | <span class="type">-&gt; :status</span>: <span class="number">307</span></div><div class="line">c1                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">65</span></div><div class="line">                                        | <span class="type">-&gt; cache</span>-control: private</div><div class="line">c0                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">64</span></div><div class="line">                                        | <span class="type">-&gt; date</span>: Mon, <span class="number">21</span> Oct <span class="number">2013</span></div><div class="line">                                        |   <span class="type">20</span>:<span class="number">13</span>:<span class="number">21</span> GMT</div><div class="line">bf                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">63</span></div><div class="line">                                        | <span class="type">-&gt; location</span>:</div><div class="line">                                        |   <span class="type">https</span>://www.example.com</div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[  1]</span> (s =  <span class="number">42</span>) <span class="selector-pseudo">:status</span>: <span class="selector-tag">307</span></div><div class="line"><span class="selector-attr">[  2]</span> (s =  <span class="number">63</span>) <span class="selector-tag">location</span>: <span class="selector-tag">https</span>:<span class="comment">//www.example.com</span></div><div class="line"><span class="selector-attr">[  3]</span> (s =  <span class="number">65</span>) <span class="selector-tag">date</span>: <span class="selector-tag">Mon</span>, <span class="selector-tag">21</span> <span class="selector-tag">Oct</span> <span class="selector-tag">2013</span> <span class="selector-tag">20</span><span class="selector-pseudo">:13</span><span class="selector-pseudo">:21</span> <span class="selector-tag">GMT</span></div><div class="line"><span class="selector-attr">[  4]</span> (s =  <span class="number">52</span>) <span class="selector-tag">cache-control</span>: <span class="selector-tag">private</span></div><div class="line">      <span class="selector-tag">Table</span> <span class="selector-tag">size</span>: <span class="selector-tag">222</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 307</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:21 GMT</div><div class="line">location: https://www.example.com</div></pre></td></tr></table></figure>
<h3 id="C-6-3-第三个响应-1"><a href="#C-6-3-第三个响应-1" class="headerlink" title="C.6.3 第三个响应"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.section.C.6.3" target="_blank" rel="external">C.6.3 第三个响应</a></h3><p>一些头部字段是在头部列表处理器间从动态表中逐出的。</p>
<p>要编码的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 200</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:22 GMT</div><div class="line">location: https://www.example.com</div><div class="line">content-encoding: gzip</div><div class="line">set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</div></pre></td></tr></table></figure>
<p>编码数据的十六进制转储：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">88</span>c1 <span class="number">6196</span> d07a be94 <span class="number">1054</span> d444 a820 <span class="number">0595</span> | ..a..z...T.D. ..</div><div class="line"><span class="number">040</span>b <span class="number">8166</span> e084 a62d <span class="number">1</span>bff c05a <span class="number">839</span>b d9ab | ...f...-...Z....</div><div class="line"><span class="number">77</span>ad <span class="number">94e7</span> <span class="number">821</span>d d7f2 e6c7 b335 dfdf cd5b | w.........<span class="number">.5</span>...[</div><div class="line"><span class="number">3960</span> d5af <span class="number">2708</span> <span class="number">7</span>f36 <span class="number">72</span>c1 ab27 <span class="number">0</span>fb5 <span class="number">291</span>f | <span class="number">9</span>`..'.<span class="number">.6</span>r..'..).</div><div class="line"><span class="number">9587</span> <span class="number">3160</span> <span class="number">65</span>c0 <span class="number">03</span>ed <span class="number">4</span>ee5 b106 <span class="number">3</span>d50 <span class="number">07</span>   | .<span class="number">.1</span>`e...N...=P.</div></pre></td></tr></table></figure>
<p>解码过程：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="number">88</span>                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">8</span></div><div class="line">                                        | <span class="type">-&gt; :status</span>: <span class="number">200</span></div><div class="line">c1                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">65</span></div><div class="line">                                        | <span class="type">-&gt; cache</span>-control: private</div><div class="line"><span class="number">61</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">33</span>)</div><div class="line">                                        |     <span class="type">date</span></div><div class="line"><span class="number">96</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">22</span>)</div><div class="line">                                        |     <span class="type">Huffman</span> encoded:</div><div class="line">d07a be94 <span class="number">1054</span> d444 a820 <span class="number">0595</span> <span class="number">040</span>b <span class="number">8166</span> | <span class="type">.z</span>...T.D. .....f</div><div class="line">e084 a62d <span class="number">1</span>bff                          | <span class="type">...-..</span></div><div class="line">                                        |     Decoded:</div><div class="line">                                        | <span class="type">Mon</span>, <span class="number">21</span> Oct <span class="number">2013</span> <span class="number">20</span>:<span class="number">13</span>:<span class="number">22</span></div><div class="line">                                        | <span class="type">GMT</span></div><div class="line">                                        | <span class="type">- evict</span>: cache-control:</div><div class="line">                                        |   <span class="type">private</span></div><div class="line">                                        | <span class="type">-&gt; date</span>: Mon, <span class="number">21</span> Oct <span class="number">2013</span> </div><div class="line">                                        |   <span class="type">20</span>:<span class="number">13</span>:<span class="number">22</span> GMT</div><div class="line">c0                                      | <span class="type">== Indexed</span> - <span class="keyword">Add</span> ==</div><div class="line">                                        |   <span class="type">idx</span> = <span class="number">64</span></div><div class="line">                                        | <span class="type">-&gt; location</span>:</div><div class="line">                                        |   <span class="type">https</span>://www.example.com</div><div class="line"><span class="number">5</span>a                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">26</span>)</div><div class="line">                                        |     <span class="type">content</span>-encoding</div><div class="line"><span class="number">83</span>                                      |   <span class="type">Literal</span> value (len = <span class="number">3</span>)</div><div class="line">                                        |     <span class="type">Huffman</span> encoded:</div><div class="line"><span class="number">9</span>bd9 ab                                 | <span class="type">...</span></div><div class="line">                                        |     Decoded:</div><div class="line">                                        | <span class="type">gzip</span></div><div class="line">                                        | <span class="type">- evict</span>: date: Mon, <span class="number">21</span> Oct</div><div class="line">                                        |    <span class="type">2013</span> <span class="number">20</span>:<span class="number">13</span>:<span class="number">21</span> GMT</div><div class="line">                                        | <span class="type">-&gt; content</span>-encoding: gzip</div><div class="line"><span class="number">77</span>                                      | <span class="type">== Literal</span> indexed ==</div><div class="line">                                        |   <span class="type">Indexed</span> name (idx = <span class="number">55</span>)</div><div class="line">                                        |     <span class="type">set</span>-cookie</div><div class="line">ad                                      |   <span class="type">Literal</span> value (len = <span class="number">45</span>)</div><div class="line">                                        |     <span class="type">Huffman</span> encoded:</div><div class="line"><span class="number">94e7</span> <span class="number">821</span>d d7f2 e6c7 b335 dfdf cd5b <span class="number">3960</span> | <span class="type">.........5</span>...[<span class="number">9</span>`</div><div class="line">d5af <span class="number">2708</span> <span class="number">7</span>f36 <span class="number">72</span>c1 ab27 <span class="number">0</span>fb5 <span class="number">291</span>f <span class="number">9587</span> | <span class="type">..'..6r</span>..'..)...</div><div class="line"><span class="number">3160</span> <span class="number">65</span>c0 <span class="number">03</span>ed <span class="number">4</span>ee5 b106 <span class="number">3</span>d50 <span class="number">07</span>        | <span class="type">1</span>`e...N...=P.</div><div class="line">                                        |     <span class="type">Decoded</span>:</div><div class="line">                                        | <span class="type">foo</span>=ASDJKHQKBZXOQWEOPIUAXQ</div><div class="line">                                        | <span class="type">WEOIU</span>; max-age=<span class="number">3600</span>; versi</div><div class="line">                                        | <span class="type">on</span>=<span class="number">1</span></div><div class="line">                                        | <span class="type">- evict</span>: location:</div><div class="line">                                        |   <span class="type">https</span>://www.example.com</div><div class="line">                                        | <span class="type">- evict</span>: :status: <span class="number">307</span></div><div class="line">                                        | <span class="type">-&gt; set</span>-cookie: foo=ASDJKHQ</div><div class="line">                                        |   <span class="type">KBZXOQWEOPIUAXQWEOIU</span>; ma</div><div class="line">                                        |   <span class="type">x</span>-age=<span class="number">3600</span>; version=<span class="number">1</span></div></pre></td></tr></table></figure>
<p>动态表（解码后）：</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[  1] (s =  <span class="string">98)</span> <span class="built_in">set-cookie:</span> <span class="string">foo=</span><span class="string">ASDJKHQKBZXOQWEOPIUAXQWEOIU;</span></div><div class="line">                 <span class="string">max-age=</span><span class="string">3600;</span> <span class="string">version=</span>1</div><div class="line">[  2] (s =  <span class="string">52)</span> <span class="string">content-encoding:</span> <span class="string">gzip</span></div><div class="line">[  3] (s =  <span class="string">65)</span> <span class="string">date:</span> <span class="string">Mon,</span> <span class="string">21 </span><span class="string">Oct </span><span class="string">2013 </span><span class="string">20:13:</span><span class="string">22 </span><span class="string">GMT</span></div><div class="line">      <span class="string">Table </span><span class="string">size:</span> <span class="string">215</span></div></pre></td></tr></table></figure>
<p>解码后的头部列表：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:status:</span> 200</div><div class="line">cache-control: private</div><div class="line">date: Mon, 21 Oct 2013 20:13:22 GMT</div><div class="line">location: https://www.example.com</div><div class="line">content-encoding: gzip</div><div class="line">set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</div></pre></td></tr></table></figure>
<h1 id="鸣谢"><a href="#鸣谢" class="headerlink" title="鸣谢"></a>鸣谢</h1><p>本规范包括以下个人的实质性意见：</p>
<ul>
<li><p>Mike Bishop，Jeff Pinner，Julian Reschke，和 Martin Thomson (实质性的编辑贡献).</p>
</li>
<li><p>Johnny Graettinger (Huffman code statistics).</p>
</li>
</ul>
<h1 id="作者地址-1"><a href="#作者地址-1" class="headerlink" title="作者地址"></a><a href="https://http2.github.io/http2-spec/compression.html#rfc.authors" target="_blank" rel="external">作者地址</a></h1><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">**Roberto Peon**</div><div class="line">Google, Inc</div><div class="line"><span class="string">Email:</span> fenix<span class="meta">@google</span>.com</div><div class="line"></div><div class="line">**Hervé Ruellan**</div><div class="line">Canon CRF</div><div class="line"><span class="string">Email:</span> herve.ruellan<span class="meta">@crf</span>.canon.fr</div></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/网络协议/">网络协议</a><a href="/tags/HTTP2/">HTTP2</a><a href="/tags/翻译/">翻译</a></div><div class="post-nav"><a href="/2016/10/29/npn-spec/" class="pre">传输层安全(TLS)下一个协议协商(NPN)扩展</a><a href="/2016/10/29/alpn-spec/" class="next">应用层协议协商（ALPN）规范（RFC7301）</a></div><div id="disqus_thread"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="widget"><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."/></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android开发/">Android开发</a><span class="category-list-count">34</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/C-C-开发/">C/C++开发</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java开发/">Java开发</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux内核/">Linux内核</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/live555/">live555</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/业界趣闻/">业界趣闻</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后台开发/">后台开发</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络协议/">网络协议</a><span class="category-list-count">39</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络调试/">网络调试</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随想杂谈/">随想杂谈</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/音视频开发/">音视频开发</a><span class="category-list-count">3</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/OpenGL/" style="font-size: 15px;">OpenGL</a> <a href="/tags/网络协议/" style="font-size: 15px;">网络协议</a> <a href="/tags/Android开发/" style="font-size: 15px;">Android开发</a> <a href="/tags/源码分析/" style="font-size: 15px;">源码分析</a> <a href="/tags/chromium/" style="font-size: 15px;">chromium</a> <a href="/tags/后台开发/" style="font-size: 15px;">后台开发</a> <a href="/tags/Java开发/" style="font-size: 15px;">Java开发</a> <a href="/tags/QUIC/" style="font-size: 15px;">QUIC</a> <a href="/tags/翻译/" style="font-size: 15px;">翻译</a> <a href="/tags/网络调试/" style="font-size: 15px;">网络调试</a> <a href="/tags/HTTP2/" style="font-size: 15px;">HTTP2</a> <a href="/tags/UDT/" style="font-size: 15px;">UDT</a> <a href="/tags/图形图像/" style="font-size: 15px;">图形图像</a> <a href="/tags/安全/" style="font-size: 15px;">安全</a> <a href="/tags/HTTPS/" style="font-size: 15px;">HTTPS</a> <a href="/tags/C-C-开发/" style="font-size: 15px;">C/C++开发</a> <a href="/tags/音视频开发/" style="font-size: 15px;">音视频开发</a> <a href="/tags/Linux内核/" style="font-size: 15px;">Linux内核</a> <a href="/tags/live555/" style="font-size: 15px;">live555</a> <a href="/tags/Django/" style="font-size: 15px;">Django</a> <a href="/tags/Go-语言/" style="font-size: 15px;">Go 语言</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-fei"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">七月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">五月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">二月 2013</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/09/04/live555_src_analysis_describe/">live555 源码分析： DESCRIBE 的处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/03/live555_src_analysis_rtspserver/">live555 源码分析：RTSPServer</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/01/live555_src_analysis_rtsp_rtp_rtcp_wireshark/">Wireshark 抓包分析 RTSP/RTP/RTCP 基本工作过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/31/live555_src_analysis_mediaserver/">live555 源码分析：MediaSever</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/30/live555_src_analysis_infrasture/">live555 源码分析：基础设施</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/28/live555_src_analysis_introduction/">live555 源码分析：简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/24/h264_send_with_ortp/">使用 ortp 发送原始 H.264 码流</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/23/h264_play/">原始 H.264 码流播放</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/18/h264_on_rtp/">H.264 视频的 RTP 载荷格式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/12/working/">从工作中得到了什么？</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://developer.android.com/index.html" title="Android Developers" target="_blank">Android Developers</a><ul></ul><a href="https://source.android.com/" title="Android Open Source Project" target="_blank">Android Open Source Project</a><ul></ul><a href="http://www.vants.org/" title="蚂蚁网" target="_blank">蚂蚁网</a></div><div class="widget"><div class="widget-title"><i class="fa fa-commt"> 最近评论</i></div><script type="text/javascript" src="//wolfcstech.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div></div><a id="totop" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.2.0" async></script><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |<a href="/atom.xml">订阅本站</a> |<span>联系博主：<a href="mailto:hanpfei@gmail.com" target="_blank" class="fa fa-email"> </a><a href="undefined" target="_blank" class="fa fa-weibo"></a><a href="https://github.com/hanpfei" target="_blank" class="fa fa-github"> </a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">Han Pengfei</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span><span><a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> Theme </a>by<a rel="nofollow" target="_blank" href="https://github.com/chaooo"> Charles.</a></span></p></div></div></div><script>var disqus_shortname = 'wolfcstech';
var disqus_identifier = '2016/10/29/hpack-spec/';
var disqus_title = 'HPACK：HTTP/2的首部压缩 (RFC7541)';
var disqus_url = 'https://www.wolfcstech.com/2016/10/29/hpack-spec/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//wolfcstech.disqus.com/count.js" async></script><script type="text/javascript" src="/js/search.json.js?v=1.2.0"></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3c736b12c32c019fd9ff6c825b6b9b44";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script></body></html>