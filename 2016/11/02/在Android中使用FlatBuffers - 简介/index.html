<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/freesoft.jpg?v=6.0.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/freesoft.jpg?v=6.0.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/freesoft.jpg?v=6.0.3">


  <link rel="mask-icon" href="/images/freesoft.jpg?v=6.0.3" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="ç¿»è¯‘,Androidå¼€å‘," />


<meta name="description" content="JSON - å¯èƒ½æ¯ä¸ªäººéƒ½çŸ¥é“è¿™ä¸ªè½»é‡çš„æ•°æ®æ ¼å¼å‡ ä¹è¢«ç”¨åœ¨äº†æ‰€æœ‰çš„ç°ä»£æœåŠ¡å™¨ä¸­ã€‚ç›¸å¯¹äºè¿‡å»æµè¡Œçš„ä¸€äº›ä¸œè¥¿ï¼Œå¦‚å¯æ€•çš„XMLï¼Œå®ƒæ›´è½»é‡ï¼Œæ›´å¯è¯»ï¼Œå¯¹å¼€å‘æ›´å‹å¥½ã€‚JSONæ˜¯è¯­è¨€ç‹¬ç«‹çš„æ•°æ®æ ¼å¼ï¼Œä½†è§£æå’Œæ ¼å¼è½¬åŒ–ï¼Œæ¯”å¦‚è½¬ä¸ºJavaå¯¹è±¡ï¼Œè€—è´¹äº†æˆ‘ä»¬çš„æ—¶é—´å’Œå†…å­˜èµ„æºã€‚
å‡ å¤©ä»¥å‰ï¼ŒFacebookå®£å¸ƒï¼Œåœ¨å®ƒçš„Android appä¸­çš„æ•°æ®å¤„ç†éƒ¨åˆ†è·å¾—äº†å·¨å¤§çš„æ€§èƒ½æå‡ã€‚é‚£ä¸ å‡ ä¹åœ¨æ•´ä¸ªappä¸­ä¸¢å¼ƒJSONæ ¼å¼ï¼Œè€Œç”¨F">
<meta property="og:type" content="article">
<meta property="og:title" content="åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹">
<meta property="og:url" content="https://www.wolfcstech.com/2016/11/02/åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹/index.html">
<meta property="og:site_name" content="WolfcsTech">
<meta property="og:description" content="JSON - å¯èƒ½æ¯ä¸ªäººéƒ½çŸ¥é“è¿™ä¸ªè½»é‡çš„æ•°æ®æ ¼å¼å‡ ä¹è¢«ç”¨åœ¨äº†æ‰€æœ‰çš„ç°ä»£æœåŠ¡å™¨ä¸­ã€‚ç›¸å¯¹äºè¿‡å»æµè¡Œçš„ä¸€äº›ä¸œè¥¿ï¼Œå¦‚å¯æ€•çš„XMLï¼Œå®ƒæ›´è½»é‡ï¼Œæ›´å¯è¯»ï¼Œå¯¹å¼€å‘æ›´å‹å¥½ã€‚JSONæ˜¯è¯­è¨€ç‹¬ç«‹çš„æ•°æ®æ ¼å¼ï¼Œä½†è§£æå’Œæ ¼å¼è½¬åŒ–ï¼Œæ¯”å¦‚è½¬ä¸ºJavaå¯¹è±¡ï¼Œè€—è´¹äº†æˆ‘ä»¬çš„æ—¶é—´å’Œå†…å­˜èµ„æºã€‚
å‡ å¤©ä»¥å‰ï¼ŒFacebookå®£å¸ƒï¼Œåœ¨å®ƒçš„Android appä¸­çš„æ•°æ®å¤„ç†éƒ¨åˆ†è·å¾—äº†å·¨å¤§çš„æ€§èƒ½æå‡ã€‚é‚£ä¸ å‡ ä¹åœ¨æ•´ä¸ªappä¸­ä¸¢å¼ƒJSONæ ¼å¼ï¼Œè€Œç”¨F">
<meta property="og:image" content="https://www.wolfcstech.com/images/1315506-412dbddb94e2d3bd.png">
<meta property="og:image" content="https://www.wolfcstech.com/images/1315506-38130dd2acaebf01.png">
<meta property="og:image" content="https://www.wolfcstech.com/images/1315506-98a87c349eb1e6f9.png">
<meta property="og:updated_time" content="2017-02-21T05:02:16.756Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹">
<meta name="twitter:description" content="JSON - å¯èƒ½æ¯ä¸ªäººéƒ½çŸ¥é“è¿™ä¸ªè½»é‡çš„æ•°æ®æ ¼å¼å‡ ä¹è¢«ç”¨åœ¨äº†æ‰€æœ‰çš„ç°ä»£æœåŠ¡å™¨ä¸­ã€‚ç›¸å¯¹äºè¿‡å»æµè¡Œçš„ä¸€äº›ä¸œè¥¿ï¼Œå¦‚å¯æ€•çš„XMLï¼Œå®ƒæ›´è½»é‡ï¼Œæ›´å¯è¯»ï¼Œå¯¹å¼€å‘æ›´å‹å¥½ã€‚JSONæ˜¯è¯­è¨€ç‹¬ç«‹çš„æ•°æ®æ ¼å¼ï¼Œä½†è§£æå’Œæ ¼å¼è½¬åŒ–ï¼Œæ¯”å¦‚è½¬ä¸ºJavaå¯¹è±¡ï¼Œè€—è´¹äº†æˆ‘ä»¬çš„æ—¶é—´å’Œå†…å­˜èµ„æºã€‚
å‡ å¤©ä»¥å‰ï¼ŒFacebookå®£å¸ƒï¼Œåœ¨å®ƒçš„Android appä¸­çš„æ•°æ®å¤„ç†éƒ¨åˆ†è·å¾—äº†å·¨å¤§çš„æ€§èƒ½æå‡ã€‚é‚£ä¸ å‡ ä¹åœ¨æ•´ä¸ªappä¸­ä¸¢å¼ƒJSONæ ¼å¼ï¼Œè€Œç”¨F">
<meta name="twitter:image" content="https://www.wolfcstech.com/images/1315506-412dbddb94e2d3bd.png">






  <link rel="canonical" href="https://www.wolfcstech.com/2016/11/02/åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹ | WolfcsTech</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-109419024-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-109419024-1');
</script>



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3c736b12c32c019fd9ff6c825b6b9b44";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">WolfcsTech</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />é¦–é¡µ</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />åˆ†ç±»</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />å½’æ¡£</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />æ ‡ç­¾</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br />å…³äº</a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="http://www.ixirong.com/404.html" rel="section">
            <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />å…¬ç›Š 404</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wolfcstech.com/2016/11/02/åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Pengfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/freesoft.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WolfcsTech">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-11-02T20:36:49+08:00">2016-11-02</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Androidå¼€å‘/" itemprop="url" rel="index"><span itemprop="name">Androidå¼€å‘</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/11/02/åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2016/11/02/åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/11/02/åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹/" class="leancloud_visitors" data-flag-title="åœ¨Androidä¸­ä½¿ç”¨FlatBuffers - ç®€ä»‹">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <p>JSON - å¯èƒ½æ¯ä¸ªäººéƒ½çŸ¥é“è¿™ä¸ªè½»é‡çš„æ•°æ®æ ¼å¼å‡ ä¹è¢«ç”¨åœ¨äº†æ‰€æœ‰çš„ç°ä»£æœåŠ¡å™¨ä¸­ã€‚ç›¸å¯¹äºè¿‡å»æµè¡Œçš„ä¸€äº›ä¸œè¥¿ï¼Œå¦‚å¯æ€•çš„XMLï¼Œå®ƒæ›´è½»é‡ï¼Œæ›´å¯è¯»ï¼Œå¯¹å¼€å‘æ›´å‹å¥½ã€‚JSONæ˜¯è¯­è¨€ç‹¬ç«‹çš„æ•°æ®æ ¼å¼ï¼Œä½†è§£æå’Œæ ¼å¼è½¬åŒ–ï¼Œæ¯”å¦‚è½¬ä¸ºJavaå¯¹è±¡ï¼Œè€—è´¹äº†æˆ‘ä»¬çš„æ—¶é—´å’Œå†…å­˜èµ„æºã€‚</p>
<p>å‡ å¤©ä»¥å‰ï¼ŒFacebookå®£å¸ƒï¼Œåœ¨å®ƒçš„Android appä¸­çš„æ•°æ®å¤„ç†éƒ¨åˆ†è·å¾—äº†å·¨å¤§çš„æ€§èƒ½æå‡ã€‚é‚£ä¸ å‡ ä¹åœ¨æ•´ä¸ªappä¸­ä¸¢å¼ƒJSONæ ¼å¼ï¼Œè€Œç”¨FlatBuffersä»£æ›¿æœ‰å…³ã€‚è¯·å‚è€ƒ<a href="https://code.facebook.com/posts/872547912839369/improving-facebook-s-performance-on-android-with-flatbuffers/" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>æ¥äº†è§£ä¸€äº›å…³äºFlatBuffersçš„åŸºæœ¬çŸ¥è¯†ï¼Œä»¥åŠä»JSONè½¬æ¢åˆ°å®ƒçš„ç»“æœã€‚</p>
<a id="more"></a>
<p>å°½ç®¡ç»“æœçœ‹ä¸Šå»éå¸¸å¥½ï¼Œä½†ä¹ä¸€çœ‹å®ç°æ–¹å¼ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾ã€‚Facebookä¹Ÿæ²¡æœ‰è¯´å¤ªå¤šã€‚é‚£ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘æƒ³åœ¨è¿™ç¯‡æ–‡ç« ä¸­å±•ç¤ºæˆ‘ä»¬å¯ä»¥å¦‚ä½•ä½¿ç”¨FlatBuffersã€‚</p>
<h1 id="FlatBuffers"><a href="#FlatBuffers" class="headerlink" title="FlatBuffers"></a>FlatBuffers</h1><p>ç®€å•åœ°è¯´ï¼ŒFlatBuffersæ˜¯Googleçš„ä¸€ä¸ªè·¨å¹³å°åºåˆ—åŒ–åº“ï¼Œç‰¹åˆ«ä¸ºæ¸¸æˆå¼€å‘åˆ›å»ºä»¥åŠï¼Œå¦‚Facebookæ‰€å±•ç¤ºçš„é‚£æ ·ï¼Œéµå¾ªAndroidä¸­çš„æµç•…çš„åŠå“åº”å¼UIçš„16msè§„åˆ™ã€‚</p>
<p><em>ä½†æ˜¯æ³¨æ„äº†ï¼Œåœ¨ä½ æ‰”æ‰ä¸€åˆ‡ï¼Œå°†ä½ çš„æ‰€æœ‰æ•°æ®è¿ç§»åˆ°FlatBuffersä¹‹å‰ï¼Œè¯·å…ˆç¡®è®¤ä½ éœ€è¦è¿™æ ·åšã€‚æœ‰æ—¶å€™å¯¹æ€§èƒ½çš„å½±å“å°†æ˜¯æå…¶å¾®å°çš„ï¼Œè€Œæœ‰æ—¶å€™æ•°æ®å®‰å…¨æ€§æ¯”è®¡ç®—é€Ÿåº¦ä¸Šå‡ åæ¯«ç§’çš„å·®å¼‚é‡è¦å¾—å¤šã€‚</em></p>
<p>ä»€ä¹ˆä½¿FlatBufferså¦‚æ­¤é«˜æ•ˆï¼Ÿ</p>
<ul>
<li>ç”±äºå¹³å¦çš„äºŒè¿›åˆ¶ç¼“å†²åŒºï¼Œè®¿é—®åºåˆ—åŒ–åçš„æ•°æ®æ—¶æ— éœ€è§£æï¼Œå³ä½¿æ˜¯å¯¹äºå±‚æ¬¡å¼çš„æ•°æ®ã€‚å¤šäºäºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆå§‹åŒ–è§£æå™¨ï¼ˆè¿™æ„å‘³ç€æ„é€ å¤æ‚çš„å­—æ®µæ˜ å°„ï¼‰ï¼Œä»¥åŠè§£ææ•°æ®ï¼Œè¿™ä¹Ÿè€—è´¹æ—¶é—´ã€‚</li>
<li>FlatBuffersæ•°æ®ä¸éœ€è¦åˆ†é…å¤šäºç¼“å†²åŒºæœ¬èº«æ‰€ç”¨å¤§å°çš„å†…å­˜ã€‚æˆ‘ä»¬ä¸éœ€è¦åƒåœ¨JSONä¸­é‚£æ ·ï¼Œä¸ºè§£æåçš„å±‚æ¬¡å¼æ•°æ®åˆ†é…é¢å¤–çš„å¯¹è±¡ã€‚</li>
</ul>
<p>è¦è·å–çœŸå®çš„æ•°å­—å¯ä»¥å‚è€ƒå…³äºå‘FlatBuffersè¿ç§»çš„<a href="https://code.facebook.com/posts/872547912839369/improving-facebook-s-performance-on-android-with-flatbuffers/" target="_blank" rel="external">facebookçš„æ–‡ç« </a>ï¼Œæˆ–è€…<a href="http://google.github.io/flatbuffers/" target="_blank" rel="external">Googleæ–‡æ¡£</a>ã€‚</p>
<h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><p>è¿™ç¯‡æ–‡ç« å°†æè¿°åœ¨Android appä¸­ä½¿ç”¨FlatBuffersçš„æœ€ç®€å•çš„æ–¹å¼ï¼š</p>
<ul>
<li>åœ¨appä¹‹å¤–çš„<em>æŸä¸ªåœ°æ–¹</em>å°†JSONæ•°æ®è½¬æ¢ä¸ºFlatBUffersæ ¼å¼(æ¯”å¦‚å°†äºŒè¿›åˆ¶æ–‡ä»¶ä»¥æ–‡ä»¶çš„å½¢å¼ä¼ é€ï¼Œæˆ–ç›´æ¥ä»APIè¿”å›)ã€‚</li>
<li>é€šè¿‡flatc (FlatBufferç¼–è¯‘å™¨) æ‰‹åŠ¨äº§ç”Ÿæ•°æ®æ¨¡å‹(Java ç±»)ã€‚</li>
<li>JSONæ–‡ä»¶æœ‰ä¸€äº›é™åˆ¶ (ä¸èƒ½ä½¿ç”¨nullå­—æ®µï¼ŒDataæ ¼å¼è¢«è§£æä¸ºä¸€ä¸ªString)ã€‚</li>
</ul>
<p>å¯èƒ½åœ¨æœªæ¥æˆ‘ä»¬å°†å‡†å¤‡æ›´å¤æ‚çš„æ–¹æ¡ˆã€‚</p>
<h2 id="FlatBuffersç¼–è¯‘å™¨"><a href="#FlatBuffersç¼–è¯‘å™¨" class="headerlink" title="FlatBuffersç¼–è¯‘å™¨"></a>FlatBuffersç¼–è¯‘å™¨</h2><p>é¦–å…ˆæˆ‘ä»¬è¦å…ˆè·å–<strong>flatc</strong> - FlatBuffersç¼–è¯‘å™¨ã€‚å®ƒå¯ä»¥é€šè¿‡ä½äºGoogleçš„<a href="https://github.com/google/flatbuffers" target="_blank" rel="external">flatbuffersä»“åº“</a>ä¸­çš„æºä»£ç æ¥æ„å»ºã€‚è®©æˆ‘ä»¬ä¸‹è½½/cloneå®ƒã€‚æ•´ä¸ªçš„æ„å»ºè¿‡ç¨‹åœ¨<a href="https://google.github.io/flatbuffers/md__building.html" target="_blank" rel="external">FlatBuffersæ„å»º</a>æ–‡æ¡£ä¸­æè¿°ã€‚å¦‚æœä½ æ˜¯Macç”¨æˆ·åˆ™ä½ éœ€è¦åšçš„æ˜¯ï¼š</p>
<ol>
<li>æ‰“å¼€ä¸‹è½½çš„ä»£ç ä¸­çš„<code>\{extract directory}\build\XcodeFlatBuffers.xcodeproj</code>è¿™ä¸ªæ–‡ä»¶ã€‚</li>
<li>é€šè¿‡ç‚¹å‡»<strong>Play</strong>æŒ‰é’®æˆ–æŒ‰ä¸‹âŒ˜ +  Ré”®æ¥è¿è¡Œ<strong>flatc</strong> scheme(åº”è¯¥è¢«é€‰ä¸ºé»˜è®¤é€‰é¡¹)ã€‚</li>
<li><strong>flatc</strong>å¯æ‰§è¡Œæ–‡ä»¶å°†å‡ºç°åœ¨å·¥ç¨‹çš„æ ¹ç›®å½•ã€‚</li>
</ol>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨schemaç¼–è¯‘å™¨ï¼ˆä»¥Javaï¼ŒC#ï¼ŒPythonï¼ŒGOå’ŒC++è¯­è¨€ï¼‰æ¥ä¸ºç»™å®šçš„æ¨¡å¼äº§ç”Ÿæ¨¡å‹ç±»ï¼Œä»¥åŠå°†JSONè½¬æ¢ä¸ºFlatBufferäºŒè¿›åˆ¶æ–‡ä»¶äº†ã€‚</p>
<p>##æ¨¡å¼æ–‡ä»¶</p>
<p>ç°åœ¨æˆ‘ä»¬å¿…é¡»è¦å‡†å¤‡æ¨¡å¼æ–‡ä»¶äº†ï¼Œå®ƒå®šä¹‰äº†æˆ‘ä»¬æƒ³è¦ å-/åºåˆ—åŒ– çš„æ•°æ®ç»“æ„ã€‚è¿™ä¸ªæ¨¡å¼å°†è¢«flatcç”¨äºåˆ›å»ºJavaæ¨¡å‹ä»¥åŠä»JSONåˆ°FlatBufferäºŒè¿›åˆ¶æ–‡ä»¶çš„è½¬æ¢ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬çš„JSONæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼š<br><figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"repos"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="string">"id"</span>: <span class="number">27149168</span>,</div><div class="line">      <span class="string">"name"</span>: <span class="string">"acai"</span>,</div><div class="line">      <span class="string">"full_name"</span>: <span class="string">"google/acai"</span>,</div><div class="line">      <span class="string">"owner"</span>: &#123;</div><div class="line">        <span class="string">"login"</span>: <span class="string">"google"</span>,</div><div class="line">        <span class="string">"id"</span>: <span class="number">1342004</span>,</div><div class="line">        ...</div><div class="line">        <span class="string">"type"</span>: <span class="string">"Organization"</span>,</div><div class="line">        <span class="string">"site_admin"</span>: <span class="literal">false</span></div><div class="line">      &#125;,</div><div class="line">      <span class="string">"private"</span>: <span class="literal">false</span>,</div><div class="line">      <span class="string">"html_url"</span>: <span class="string">"https://github.com/google/acai"</span>,</div><div class="line">      <span class="string">"description"</span>: <span class="string">"Testing library for JUnit4 and Guice."</span>,</div><div class="line">      ...</div><div class="line">      <span class="string">"watchers"</span>: <span class="number">21</span>,</div><div class="line">      <span class="string">"default_branch"</span>: <span class="string">"master"</span></div><div class="line">    &#125;,</div><div class="line">    ...</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>repos_json_fragment.json <a href="https://gist.github.com/frogermcs/804af402e444e76bc012#file-repos_json_fragment-json" target="_blank" rel="external">ä½äºGitHub</a></p>
<p>å¯ä»¥åœ¨<a href="https://github.com/frogermcs/FlatBuffs/blob/master/flatbuffers/repos_json.json" target="_blank" rel="external">è¿™é‡Œ</a>è·å–å®Œæ•´çš„ç‰ˆæœ¬ã€‚å®ƒæ˜¯é€šè¿‡è°ƒç”¨å¦‚ä¸‹çš„Github APIæ‰€è·æ•°æ®ç»è¿‡äº†ä¸€ç‚¹ä¿®æ”¹çš„ç‰ˆæœ¬ï¼š<br><a href="https://api.github.com/users/google/repos" target="_blank" rel="external">https://api.github.com/users/google/repos</a>.</p>
<p>ç¼–å†™FlatBufferæ¨¡å¼æ–‡ä»¶çš„<a href="https://google.github.io/flatbuffers/md__schemas.html" target="_blank" rel="external">æ–‡æ¡£</a>éå¸¸å¥½ï¼Œå› è€Œåœ¨è¿™é‡Œæˆ‘å°±ä¸å†æ·±å…¥è¯´æ˜äº†ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ¨¡å¼æ–‡ä»¶ä¹Ÿä¸æ˜¯éå¸¸å¤æ‚ã€‚æˆ‘ä»¬æ‰€è¦åšçš„æ‰€æœ‰äº‹æƒ…å°±æ˜¯åˆ›å»º3ä¸ªè¡¨ï¼š<code>ReposList</code>ï¼Œ<code>Repo</code>å’Œ<code>User</code>ï¼Œå¹¶å®šä¹‰<code>root_type</code>ã€‚ä¸‹é¢æ˜¯è¿™ä¸ªæ¨¡å¼æ–‡ä»¶çš„é‡è¦éƒ¨åˆ†ï¼š<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">table ReposList &#123;</div><div class="line">    <span class="string">repos :</span> [Repo];</div><div class="line">&#125;</div><div class="line"></div><div class="line">table Repo &#123;</div><div class="line">    <span class="string">id :</span> <span class="keyword">long</span>;</div><div class="line">    <span class="string">name :</span> string;</div><div class="line">    <span class="string">full_name :</span> string;</div><div class="line">    <span class="string">owner :</span> User;</div><div class="line">    <span class="comment">//...</span></div><div class="line">    <span class="string">labels_url :</span> string (deprecated);</div><div class="line">    <span class="string">releases_url :</span> string (deprecated);</div><div class="line">&#125;</div><div class="line"></div><div class="line">table User &#123;</div><div class="line">    <span class="string">login :</span> string;</div><div class="line">    <span class="string">id :</span> <span class="keyword">long</span>;</div><div class="line">    <span class="string">avatar_url :</span> string;</div><div class="line">    <span class="string">gravatar_id :</span> string;</div><div class="line">    <span class="comment">//...</span></div><div class="line">    <span class="string">site_admin :</span> bool;</div><div class="line">&#125;</div><div class="line"></div><div class="line">root_type ReposList;</div></pre></td></tr></table></figure></p>
<p><a href="repos_schema_fragment.fbs hosted with â¤ by GitHub">repos_schema_fragment.fbs</a> ä½äºGitHub</p>
<p>å®Œæ•´çš„æ¨¡å¼æ–‡ä»¶åœ¨<a href="https://github.com/frogermcs/FlatBuffs/blob/master/flatbuffers/repos_schema.fbs" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<h1 id="FlatBuffersæ•°æ®æ–‡ä»¶"><a href="#FlatBuffersæ•°æ®æ–‡ä»¶" class="headerlink" title="FlatBuffersæ•°æ®æ–‡ä»¶"></a>FlatBuffersæ•°æ®æ–‡ä»¶</h1><p>å¾ˆå¥½ï¼Œç°åœ¨æˆ‘ä»¬æ‰€éœ€è¦åšçš„å°±æ˜¯å°†<code>repos_json.json</code>è½¬æ¢ä¸ºFlatBuffersäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶äº§ç”ŸJavaæ¨¡å‹ï¼Œå…¶å¯ä»¥ä»¥Javaå‹å¥½çš„æ–¹å¼è¡¨ç¤ºæˆ‘ä»¬çš„æ•°æ®ï¼ˆè¿™ä¸ªæ“ä½œæ‰€éœ€çš„æ‰€æœ‰çš„æ‰€æœ‰æ–‡ä»¶å¯ä»¥åœ¨æˆ‘ä»¬çš„repository<a href="https://github.com/frogermcs/FlatBuffs/tree/master/flatbuffers" target="_blank" rel="external">è·å–</a>ï¼‰ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./flatc -j -<span class="selector-tag">b</span> repos_schema<span class="selector-class">.fbs</span> repos_json.json</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œè¿™å°†äº§ç”Ÿå¦‚ä¸‹çš„æ–‡ä»¶ï¼š</p>
<ul>
<li>repos_json.bin (å°†è¢«é‡å‘½åä¸ºrepos_flat.bin)</li>
<li>Repos/Repo.java</li>
<li>Repos/ReposList.java</li>
<li>Repos/User.java</li>
</ul>
<h1 id="Android-app"><a href="#Android-app" class="headerlink" title="Android app"></a>Android app</h1><p>ç°åœ¨è®©æˆ‘ä»¬æ¥åˆ›å»ºæˆ‘ä»¬çš„ç¤ºä¾‹appï¼Œæ¥çœ‹ä¸‹FlatBuffersæ ¼å¼æ˜¯å¦‚ä½•åœ¨å®é™…ä¸­ä½¿ç”¨çš„ã€‚è¿™æ˜¯å®ƒçš„æˆªå±ï¼š<br><img src="https://www.wolfcstech.com/images/1315506-412dbddb94e2d3bd.png" alt="screenshot.png"></p>
<p>ProgressBarå°†ä»…è¢«ç”¨äºå±•ç¤ºä¸æ­£ç¡®çš„æ•°æ®å¤„ç†ï¼ˆåœ¨UIçº¿ç¨‹ä¸­ï¼‰å¯ä»¥å¦‚ä½•å½±å“ç”¨æˆ·ç•Œé¢çš„æµç•…åº¦ã€‚</p>
<p>æˆ‘ä»¬çš„appçš„<code>app/build.gradle</code>æ–‡ä»¶çœ‹èµ·æ¥å¦‚ä¸‹é¢è¿™æ ·ï¼š<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line">apply plugin: <span class="string">'com.jakewharton.hugo'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">22</span></div><div class="line">    buildToolsVersion <span class="string">"23.0.0 rc2"</span></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"frogermcs.io.flatbuffs"</span></div><div class="line">        minSdkVersion <span class="number">15</span></div><div class="line">        targetSdkVersion <span class="number">22</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="keyword">false</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:22.2.1'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.google.code.gson:gson:2.3.1'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.jakewharton:butterknife:7.0.1'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'io.reactivex:rxjava:1.0.10'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'io.reactivex:rxandroid:1.0.0'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å½“ç„¶ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ²¡å¿…è¦ä½¿ç”¨Rxæˆ–ButterKnifeï¼Œä½†ä¸ºä»€ä¹ˆä¸è®©è¿™ä¸ªappæ›´å¥½ä¸€ç‚¹å‘¢ğŸ˜‰ ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬æŠŠrepos_flat.binå’Œrepos_json.jsonæ–‡ä»¶æ”¾åˆ°res/raw/ç›®å½•ä¸‹ã€‚</p>
<p>è¿™é‡Œæ˜¯<a href="https://github.com/frogermcs/FlatBuffs/blob/master/app/src/main/java/frogermcs/io/flatbuffs/utils/RawDataReader.java" target="_blank" rel="external">RawDataReader</a> utilï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬åœ¨Android appä¸­è¯»å–rawæ–‡ä»¶ã€‚</p>
<p>æœ€åï¼ŒæŠŠ<code>Repo</code>ï¼Œ<code>ReposList</code>å’Œ<code>User</code>æ”¾åœ¨é¡¹ç›®æºä»£ç ä¸­çš„æŸä¸ªä½ç½®ã€‚</p>
<p>###FlatBuffersåº“</p>
<p>FlatBuffersæä¾›äº†Javaåº“æ¥åœ¨Javaä¸­ç›´æ¥å¤„ç†è¿™ç§æ•°æ®æ ¼å¼ã€‚è¿™é‡Œæ˜¯ <a href="https://github.com/frogermcs/FlatBuffs/blob/master/app/libs/flatbuffers-java-1.2.0-SNAPSHOT.jar" target="_blank" rel="external">flatbuffers-java-1.2.0-SNAPSHOT.jar</a>æ–‡ä»¶ã€‚å¦‚æœä½ æƒ³è¦æ‰‹åŠ¨äº§ç”Ÿå®ƒï¼Œä½ éœ€è¦ç§»å›åˆ°ä¸‹è½½çš„FlatBuffersæºä»£ç ï¼Œè¿›å…¥<code>java/</code>ç›®å½•ï¼Œå¹¶ä½¿ç”¨Mavenäº§ç”Ÿè¿™ä¸ªåº“ï¼š<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">mvn </span>install</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨æŠŠ.jaræ–‡ä»¶æ”¾åˆ°ä½ çš„Androidå·¥ç¨‹çš„<code>app/libs/</code>ç›®å½•ä¸‹ã€‚</p>
<p>éå¸¸å¥½ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å®ç°<code>MainActivity</code>ç±»ã€‚è¿™æ˜¯å®ƒçš„å®Œæ•´çš„ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Bind</span>(R.id.tvFlat)</div><div class="line">    TextView tvFlat;</div><div class="line">    <span class="meta">@Bind</span>(R.id.tvJson)</div><div class="line">    TextView tvJson;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> RawDataReader rawDataReader;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> ReposListJson reposListJson;</div><div class="line">    <span class="keyword">private</span> ReposList reposListFlat;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        ButterKnife.bind(<span class="keyword">this</span>);</div><div class="line">        rawDataReader = <span class="keyword">new</span> RawDataReader(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@OnClick</span>(R.id.btnJson)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onJsonClick</span><span class="params">()</span> </span>&#123;</div><div class="line">        rawDataReader.loadJsonString(R.raw.repos_json).subscribe(<span class="keyword">new</span> SimpleObserver&lt;String&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String reposStr)</span> </span>&#123;</div><div class="line">                parseReposListJson(reposStr);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseReposListJson</span><span class="params">(String reposStr)</span> </span>&#123;</div><div class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</div><div class="line">        reposListJson = <span class="keyword">new</span> Gson().fromJson(reposStr, ReposListJson.class);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; reposListJson.repos.size(); i++) &#123;</div><div class="line">            RepoJson repo = reposListJson.repos.get(i);</div><div class="line">            Log.d(<span class="string">"FlatBuffers"</span>, <span class="string">"Repo #"</span> + i + <span class="string">", id: "</span> + repo.id);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis() - startTime;</div><div class="line">        tvJson.setText(<span class="string">"Elements: "</span> + reposListJson.repos.size() + <span class="string">": load time: "</span> + endTime + <span class="string">"ms"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@OnClick</span>(R.id.btnFlatBuffers)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFlatBuffersClick</span><span class="params">()</span> </span>&#123;</div><div class="line">        rawDataReader.loadBytes(R.raw.repos_flat).subscribe(<span class="keyword">new</span> SimpleObserver&lt;<span class="keyword">byte</span>[]&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(<span class="keyword">byte</span>[] bytes)</span> </span>&#123;</div><div class="line">                loadFlatBuffer(bytes);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loadFlatBuffer</span><span class="params">(<span class="keyword">byte</span>[] bytes)</span> </span>&#123;</div><div class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</div><div class="line">        ByteBuffer bb = ByteBuffer.wrap(bytes);</div><div class="line">        reposListFlat = frogermcs.io.flatbuffs.model.flat.ReposList.getRootAsReposList(bb);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; reposListFlat.reposLength(); i++) &#123;</div><div class="line">            Repo repos = reposListFlat.repos(i);</div><div class="line">            Log.d(<span class="string">"FlatBuffers"</span>, <span class="string">"Repo #"</span> + i + <span class="string">", id: "</span> + repos.id());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis() - startTime;</div><div class="line">        tvFlat.setText(<span class="string">"Elements: "</span> + reposListFlat.reposLength() + <span class="string">": load time: "</span> + endTime + <span class="string">"ms"</span>);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><a href="https://gist.github.com/frogermcs/804af402e444e76bc012#file-mainactivity-java" target="_blank" rel="external">MainActivity.java</a> ä½äº<a href="https://github.com/" target="_blank" rel="external">GitHub</a></p>
<p>æœ€å¸å¼•æˆ‘ä»¬çš„æ–¹æ³•åº”è¯¥æ˜¯è¿™äº›ï¼š</p>
<ul>
<li><code>parseReposListJson(String reposStr)</code> - è¿™ä¸ªæ–¹æ³•åˆå§‹åŒ–Gsonè§£æå™¨å¹¶å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaå¯¹è±¡ã€‚</li>
<li><code>loadFlatBuffer(byte[] bytes)</code> - è¿™ä¸ªæ–¹æ³•å°†bytesï¼ˆæˆ‘ä»¬çš„ repos_flat.binæ–‡ä»¶ï¼‰è½¬ä¸ºJavaå¯¹è±¡ã€‚</li>
</ul>
<h1 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h1><p>ç°åœ¨è®©æˆ‘ä»¬æ¥å¯è§†åŒ–JSONå’ŒFlatBuffersåŠ è½½æ—¶é—´åŠèµ„æºæ¶ˆè€—çš„å·®åˆ«ã€‚æµ‹è¯•æ˜¯åœ¨å®‰è£…äº†Android M (beta) çš„Nexus 5ä¸Šè¿›è¡Œçš„ã€‚</p>
<h2 id="åŠ è½½æ—¶é—´"><a href="#åŠ è½½æ—¶é—´" class="headerlink" title="åŠ è½½æ—¶é—´"></a>åŠ è½½æ—¶é—´</h2><p>æµ‹é‡çš„æ“ä½œæ˜¯è½¬æ¢Javaæ–‡ä»¶å¹¶è¿­ä»£æ‰€æœ‰çš„ (90 ä¸ª) å…ƒç´ ã€‚</p>
<p>JSON - 200ms (èŒƒå›´ï¼š180ms - 250ms) - æˆ‘ä»¬çš„JSONæ–‡ä»¶çš„å¹³å‡åŠ è½½æ—¶é—´ ï¼ˆå¤§å°ï¼š478kBï¼‰<br>FlatBuffers - 5ms (èŒƒå›´ï¼š3ms - 10ms) - FlatBuffersäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¤§å°ï¼š362kBï¼‰çš„å¹³å‡åŠ è½½æ—¶é—´</p>
<p>è®°å¾—æˆ‘ä»¬çš„<a href="https://www.youtube.com/watch?v=CaMTIgxCSqU" target="_blank" rel="external">16msè§„åˆ™</a>ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨UIçº¿ç¨‹ä¸­è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚çœ‹ä¸€ä¸‹åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬çš„ç•Œé¢çš„è¡Œä¸ºå¦‚ä½•ï¼š</p>
<h3 id="JSONåŠ è½½"><a href="#JSONåŠ è½½" class="headerlink" title="JSONåŠ è½½"></a>JSONåŠ è½½</h3><p><img src="https://www.wolfcstech.com/images/1315506-38130dd2acaebf01.png" alt="json.gif"></p>
<h3 id="FlatBufferåŠ è½½"><a href="#FlatBufferåŠ è½½" class="headerlink" title="FlatBufferåŠ è½½"></a>FlatBufferåŠ è½½</h3><p><img src="https://www.wolfcstech.com/images/1315506-98a87c349eb1e6f9.png" alt="Paste_Image.png"></p>
<p>çœ‹åˆ°å·®åˆ«äº†ä¹ˆï¼ŸJsonåŠ è½½çš„ProgressBaråœäº†ä¸€ä¼šå„¿ï¼Œä½¿æˆ‘ä»¬çš„ç•Œé¢å‡ºç°äº†ä¸æ„‰å¿«çš„æƒ…å½¢ï¼ˆæ“ä½œè€—æ—¶è¶…è¿‡äº† 16msï¼‰ã€‚</p>
<h2 id="åˆ†é…ï¼ŒCPUç­‰ç­‰"><a href="#åˆ†é…ï¼ŒCPUç­‰ç­‰" class="headerlink" title="åˆ†é…ï¼ŒCPUç­‰ç­‰"></a>åˆ†é…ï¼ŒCPUç­‰ç­‰</h2><p>æƒ³åšæ›´å¤šåœ°æµ‹è¯•ï¼Ÿè¿™æ—¶å¯èƒ½æ˜¯å°è¯•<a href="http://android-developers.blogspot.com/2015/07/get-your-hands-on-android-studio-13.html" target="_blank" rel="external">Android Studio 1.3</a>å’Œè¯¸å¦‚Allocation Trackerï¼ŒMemory Viewerå’ŒMethod Tracerè¿™æ ·çš„æ–°åŠŸèƒ½çš„å¥½æ—¶æœºã€‚</p>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>è¿™é‡Œæè¿°çš„å·¥ç¨‹çš„å®Œæ•´çš„ä»£ç åœ¨Github <a href="https://github.com/frogermcs/FlatBuffs" target="_blank" rel="external">repository</a>ä¸­ã€‚ä½ ä¸éœ€è¦å¤„ç†FlatBufferså·¥ç¨‹ - ä½ éœ€è¦çš„æ‰€æœ‰ä¸œè¥¿éƒ½åœ¨flatbuffers/ç›®å½•ä¸‹ã€‚</p>
<p><a href="http://frogermcs.github.io/flatbuffers-in-android-introdution/" target="_blank" rel="external">åŸæ–‡åœ°å€</a>ã€‚</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>æ‰“èµ</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wxpay.png" alt="Han Pengfei å¾®ä¿¡æ”¯ä»˜"/>
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Han Pengfei æ”¯ä»˜å®"/>
        <p>æ”¯ä»˜å®</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ç¿»è¯‘/" rel="tag"># ç¿»è¯‘</a>
          
            <a href="/tags/Androidå¼€å‘/" rel="tag"># Androidå¼€å‘</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/29/Cronet_android_altsvc/" rel="next" title="Cronet android è®¾è®¡ä¸å®ç°åˆ†æâ€”â€”å¤‡é€‰æœåŠ¡æœºåˆ¶">
                <i class="fa fa-chevron-left"></i> Cronet android è®¾è®¡ä¸å®ç°åˆ†æâ€”â€”å¤‡é€‰æœåŠ¡æœºåˆ¶
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/11/02/ç”¨FlatBuffersæå‡Androidå¹³å°ä¸ŠFacebookçš„æ€§èƒ½/" rel="prev" title="ç”¨FlatBuffersæå‡Androidå¹³å°ä¸ŠFacebookçš„æ€§èƒ½">
                ç”¨FlatBuffersæå‡Androidå¹³å°ä¸ŠFacebookçš„æ€§èƒ½ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/freesoft.jpg"
                alt="Han Pengfei" />
            
              <p class="site-author-name" itemprop="name">Han Pengfei</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">207</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/hanpfei" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.douban.com/people/3681478/" target="_blank" title="è±†ç“£"><i class="fa fa-fw fa-globe"></i>è±†ç“£</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.zhihu.com/people/han-peng-fei-49" target="_blank" title="çŸ¥ä¹"><i class="fa fa-fw fa-globe"></i>çŸ¥ä¹</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:hanpfei@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://developer.android.com/index.html" title="Android Developers" target="_blank">Android Developers</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://source.android.com/" title="Android Open Source Project" target="_blank">Android Open Source Project</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.vants.org/" title="èš‚èšç½‘" target="_blank">èš‚èšç½‘</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#FlatBuffers"><span class="nav-number">1.</span> <span class="nav-text">FlatBuffers</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å®ç°"><span class="nav-number">2.</span> <span class="nav-text">å®ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#FlatBuffersç¼–è¯‘å™¨"><span class="nav-number">2.1.</span> <span class="nav-text">FlatBuffersç¼–è¯‘å™¨</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#FlatBuffersæ•°æ®æ–‡ä»¶"><span class="nav-number">3.</span> <span class="nav-text">FlatBuffersæ•°æ®æ–‡ä»¶</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Android-app"><span class="nav-number">4.</span> <span class="nav-text">Android app</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç»“æœ"><span class="nav-number">5.</span> <span class="nav-text">ç»“æœ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#åŠ è½½æ—¶é—´"><span class="nav-number">5.1.</span> <span class="nav-text">åŠ è½½æ—¶é—´</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSONåŠ è½½"><span class="nav-number">5.1.1.</span> <span class="nav-text">JSONåŠ è½½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FlatBufferåŠ è½½"><span class="nav-number">5.1.2.</span> <span class="nav-text">FlatBufferåŠ è½½</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ†é…ï¼ŒCPUç­‰ç­‰"><span class="nav-number">5.2.</span> <span class="nav-text">åˆ†é…ï¼ŒCPUç­‰ç­‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æºä»£ç "><span class="nav-number">5.3.</span> <span class="nav-text">æºä»£ç </span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016.09.16 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Han Pengfei</span>

  

  
</div>




  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.0.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.3"></script>



  



	





  





  









<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 's9sbM9ODdusCzKcm5JcIj6t8-gzGzoHsz',
    appKey: 'UoO9ia1DLNwOXRUsTBQ6QXxm',
    placeholder: 'ãƒ¾ï¾‰â‰§âˆ€â‰¦)oæ¥å•Šï¼Œå¿«æ´»å•Š!',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: true,
    lang: '' || 'zh-cn'
  });
</script>


  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  
  

  

  

  

  

</body>
</html>
